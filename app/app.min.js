!function(){"use strict";function e(e,t){e.$on("$routeChangeError",t.routeChangeError)}angular.module("app",["ngRoute","ui.bootstrap"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function t(e){return e.isAuthenticated()}function r(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",t]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",r]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function r(r,n,o,a){a===t.UNAUTHORIZED?e.path("/login"):a===t.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:r}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e,t){function r(e){switch(this.type=e,this.base="api/",e){case"event":case"calendar":this.base+="activity/calendar/";break;case"label":case"task":this.base+="activity/task/";break;default:this.base+=e+"/"}this.base+=e+"Manager.php"}function n(t){return e.get(this.base+"?id="+t).then(l)["catch"](u)}function o(t,r){return e.get(this.base+"?usewhere=true&where="+escape(t)+"&id="+r).then(l)["catch"](u)}function a(t){return t=this.removeUnecessaryKeys(t),e.post(this.base,t).then(l)["catch"](u)}function i(t,r){return r=this.removeUnecessaryKeys(r),e.put(this.base+"?id="+t,r).then(l)["catch"](u)}function c(t){return e["delete"](this.base+"?id="+t).then(l)["catch"](u)}function s(t,r){return e["delete"](this.base+"?where=true&id="+r,t).then(l)["catch"](u)}function l(e){return e}function u(e){return t.error(e),{success:"false",title:"Error when querying server.",message:e}}function d(e){for(var t=["id","person_id",this.type+"_id","activity_info_id","parent_name"],r=0;r<t.length;r++)delete e[t[r]];return e}var p=r;return p.prototype={get:n,getWhere:o,create:a,update:i,remove:c,removeWhere:s,removeUnecessaryKeys:d},p}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function r(t){return e.get(i.base+t).then(o)["catch"](a)}function n(t,r){return e.post(i.base+t,r).then(o)["catch"](a)}function o(e){return e}function a(e){return t.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:r,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,r,n){function o(){c()}function a(t){return t===e.otherModel.$viewValue}function i(e,t){n.$validate()}var c=e.$watch("otherModel",i);n.$validators.spCompareTo=a,t.on("$destroy",o)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.login(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.loading=!1,r.error="",r.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r){function n(n){function o(e){return e.data.success===!1?e.data.title:void t.path("/dashboard")}function a(e){return r.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",n).then(o)["catch"](a)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e,t,r){function n(){e.close()}function o(){e.dismiss("cancel")}function a(t){e.dismiss(t)}function i(t){e.close(t)}var c=this;c.groups=t,c.item=r,c.close=n,c.cancel=o,c.confirm=i,c.remove=a}angular.module("app").controller("ModalController",e),e.$inject=["$uibModalInstance","groups","item"]}(),function(){"use strict";function e(e,t){function r(){e.getTasks().then(a)}function n(e){t.openTaskModal(e).then(a)}function o(t){e.toggleCompleted(t).then(a)}function a(e){e&&(i.tasks=e)}var i=this;i.tasks=[],i.showTaskDialog=n,i.toggleCompleted=o,r()}angular.module("app").controller("TasksController",e),e.$inject=["tasksService","taskModalService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,t,r,n){function o(e){return d.task.create(e).then(u)}function a(e){return e.task_id?l(e.task_id,e):o(e)}function i(e){return d.task.remove(e).then(u)}function c(){function e(e){var t=e.data;return t.success?d.task.getWhere("",t.data).then(u):t.title}return n.getVar("id").then(e)}function s(e){return e.completed=!parseInt(e.completed),l(e.task_id,e).then(c)}function l(e,t){return d.task.update(e,t).then(u)}function u(e){var t=e.data;return t.success?t.data:t.title}var d=this;return d.task=new r("task"),{createTask:o,createOrUpdateTask:a,deleteTask:i,getTasks:c,toggleCompleted:s,updateTask:l}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.register(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.error="",r.loading=!1,r.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t,r){function n(r){function n(r){return"false"===r.success?(t.error(r.title),r.title):void e.url("/login")}return o.crud.create(r).then(n)}var o=this;return o.crud=new r("user"),{register:n}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e,t,r,n){function o(){function e(e){return e.data.success!==!1?i.resolve(n.OK):i.reject(n.UNAUTHORIZED),i.promise}return r.getVar("name").then(e)}function a(){}var i=t.defer();return{isAuthenticated:o,isAdmin:a}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,t,r){function n(n){return angular.isString(n.due)&&(n.due=new Date(n.due.replace(/(.+) (.+)/,"$1T$2Z"))),angular.isString(n.reminder)&&(n.reminder=new Date(n.reminder.replace(/(.+) (.+)/,"$1T$2Z"))),e.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/tasks/modal/task.modal.html",resolve:{groups:t.getLabels(),item:n}}).result.then(function(e){return r.createOrUpdateTask(e).then(r.getTasks)},function(e){return e?r.deleteTask(e).then(r.getTasks):void 0})}return{openTaskModal:n}}angular.module("app").factory("taskModalService",e),e.$inject=["$uibModal","labelService","tasksService"]}(),function(){"use strict";function e(e,t,r,n){function o(e){return l.label.create(e).then(s)}function a(e){return l.label.remove(e).then(s)}function i(){function e(e){var t=e.data;return t.success?l.label.getWhere("person_id="+t.data,"").then(s):t.title}return n.getVar("id").then(e)}function c(e,t){return l.label.update(e,t).then(s)}function s(e){var t=e.data;return t.success?t.data:t.title}var l=this;return l.label=new r("label"),{createLabel:o,deleteLabel:a,getLabels:i,updateLabel:c}}angular.module("app").factory("labelService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t){function r(t){e.$evalAsync(function(){n.name=t.name===!1?"Login":t.name,n.url=t.url})}var n=this;n.name="",n.url="",t.getUser().then(r)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,t,r){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t,r){function n(){function e(e){var t=e.data;return t.success===!1?{name:!1,url:"#/login"}:{name:t.data,url:"#/dashboard"}}return r.getVar("name").then(e)}return{getUser:n}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,r){function n(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(r.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImNvbmZpZyIsIiRsb2NhdGlvbiIsInN0YXR1c1NlcnZpY2UiLCJldmVudCIsImN1cnJlbnQiLCJwcmV2aW91cyIsInJlamVjdGlvbiIsIlVOQVVUSE9SSVpFRCIsInBhdGgiLCJGT1JCSURERU4iLCJmYWN0b3J5IiwiY3J1ZFNlcnZpY2UiLCIkaHR0cCIsIiRsb2ciLCJpbml0IiwidHlwZSIsInRoaXMiLCJiYXNlIiwiZ2V0IiwiaWQiLCJ0aGVuIiwicHJvbWlzZUNvbXBsZXRlIiwicHJvbWlzZUZhaWxlZCIsImdldFdoZXJlIiwid2hlcmUiLCJ1c2VySUQiLCJlc2NhcGUiLCJjcmVhdGUiLCJkYXRhIiwicmVtb3ZlVW5lY2Vzc2FyeUtleXMiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicmVtb3ZlIiwicmVtb3ZlV2hlcmUiLCJyZXNwb25zZSIsImVycm9yIiwic3VjY2VzcyIsInRpdGxlIiwibWVzc2FnZSIsInRvRGVsZXRlIiwiaSIsImxlbmd0aCIsImNydWQiLCJwcm90b3R5cGUiLCJzZXNzaW9uU2VydmljZSIsImdldFZhciIsIiRuYW1lIiwidm0iLCJzZXRWYXIiLCIkdmFsdWUiLCJjb21wYXJlVG8iLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwiY2xlYW5VcCIsInVuYmluZFdhdGNoIiwiY29tcGFyZVZhbHVlcyIsInZpZXdWYWx1ZSIsIm90aGVyTW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsaWRhdGVPbkNoYW5nZSIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCIkdmFsaWRhdGUiLCIkd2F0Y2giLCIkdmFsaWRhdG9ycyIsInNwQ29tcGFyZVRvIiwib24iLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwiTG9naW5Db250cm9sbGVyIiwibG9naW5TZXJ2aWNlIiwibG9naW4iLCJsb2FkaW5nIiwidXNlciIsImxvZ2luQ29tcGxldGUiLCJsb2dpbkZhaWxlZCIsIk1vZGFsQ29udHJvbGxlciIsIiR1aWJNb2RhbEluc3RhbmNlIiwiZ3JvdXBzIiwiaXRlbSIsImNsb3NlIiwiY2FuY2VsIiwiZGlzbWlzcyIsImNvbmZpcm0iLCJUYXNrc0NvbnRyb2xsZXIiLCJ0YXNrc1NlcnZpY2UiLCJ0YXNrTW9kYWxTZXJ2aWNlIiwiYWN0aXZhdGUiLCJnZXRUYXNrcyIsInVwZGF0ZVRhc2tzIiwic2hvd1Rhc2tEaWFsb2ciLCJ0YXNrIiwib3BlblRhc2tNb2RhbCIsInRvZ2dsZUNvbXBsZXRlZCIsInRhc2tzIiwidGFza3NEaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwiY3JlYXRlVGFzayIsImNyZWF0ZU9yVXBkYXRlVGFzayIsInRhc2tfaWQiLCJ1cGRhdGVUYXNrIiwiZGVsZXRlVGFzayIsImdldFRhc2tXaXRoVXNlcklEIiwicmVzIiwiY29tcGxldGVkIiwicGFyc2VJbnQiLCJEYXNoYm9hcmRDb250cm9sbGVyIiwiUmVnaXN0ZXJDb250cm9sbGVyIiwicmVnaXN0ZXJTZXJ2aWNlIiwicmVnaXN0ZXIiLCJyZWdpc3RyYXRpb25Db21wbGV0ZSIsInVybCIsIiRxIiwiaXNBdXRoZW50aWNhdGVkQ29tcGxldGUiLCJkZWZlcnJlZCIsIk9LIiwicmVqZWN0IiwicHJvbWlzZSIsImRlZmVyIiwic2VydmljZSIsIiR1aWJNb2RhbCIsImxhYmVsU2VydmljZSIsImlzU3RyaW5nIiwiZHVlIiwiRGF0ZSIsInJlcGxhY2UiLCJyZW1pbmRlciIsIm9wZW4iLCJnZXRMYWJlbHMiLCJyZXN1bHQiLCJjcmVhdGVMYWJlbCIsImxhYmVsIiwiZGVsZXRlTGFiZWwiLCJnZXRMYWJlbFdpdGhVc2VySUQiLCJ1cGRhdGVMYWJlbCIsIkhlYWRlckNvbnRyb2xsZXIiLCIkc2NvcGUiLCJoZWFkZXJTZXJ2aWNlIiwiZ2V0VXNlckNvbXBsZXRlIiwiJGV2YWxBc3luYyIsIm5hbWUiLCJnZXRVc2VyIiwiaGVhZGVyRGlyZWN0aXZlIiwiZ2V0TmFtZUNvbXBsZXRlIiwiU2lkZWJhckNvbnRyb2xsZXIiLCJjb2xsYXBzZWQiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhckRpcmVjdGl2ZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0MsWUFPQSxTQUFTQSxHQUFjQyxFQUFZQyxHQUNsQ0QsRUFBV0UsSUFBSSxvQkFBcUJELEVBQVdFLGtCQU5oREMsUUFDRUMsT0FBTyxPQUFRLFVBQVcsaUJBQzFCQyxXQUFXLGdCQUFpQlAsR0FFOUJBLEVBQWNRLFNBQVcsYUFBYyxpQkFLeEMsV0FDQyxZQU9BLFNBQVNDLEdBQVVDLEdBcUNsQixRQUFTQyxHQUFnQkMsR0FDeEIsTUFBT0EsR0FBY0Qsa0JBR3RCLFFBQVNFLEdBQVFELEdBQ2hCLE1BQU9BLEdBQWNDLFVBekN0QkgsRUFDRUksS0FBSyxVQUNMQyxZQUFhLDJCQUNiUixXQUFZLGtCQUNaUyxhQUFjLE9BRWRGLEtBQUssV0FDTEMsWUFBYSw2QkFDYlIsV0FBWSxtQkFDWlMsYUFBYyxPQUVkRixLQUFLLGFBQ0xDLFlBQWEsK0JBQ2JSLFdBQVkscUJBQ1pTLGFBQWMsT0FFZEYsS0FBSyxjQUNMQyxZQUFhLGlDQUNiUixXQUFZLHNCQUNaUyxhQUFjLEtBQ2RDLFNBQ0NOLGlCQUFrQixnQkFBaUJBLE1BR3BDRyxLQUFLLFVBQ0xDLFlBQWEseUJBQ2JSLFdBQVksa0JBQ1pTLGFBQWMsS0FDZEMsU0FDQ0osU0FBVSxnQkFBaUJBLE1BRzVCSyxXQUNBQyxXQUFZLFdBdkNmZCxRQUNFQyxPQUFPLE9BQ1Bj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UEMsV0FBVyxvQkFBcUJpSyxNQVluQyxXQUNDLFlBTUEsU0FBU0csS0FTUixRQUFTbkcsR0FBS0MsRUFBT0MsRUFBU0MsR0FHN0IsUUFBUytGLEdBQWNELEdBQ2xCQSxFQUNIL0YsRUFBUWtHLFlBQVksYUFFcEJsRyxFQUFRbUcsU0FBUyxhQU5uQnBHLEVBQU1jLE9BQU9aLEVBQU1nRyxpQkFBa0JELEdBVHRDLE9BQ0NsRyxLQUFNQSxFQUNOekQsWUFBYSxvQ0FDYlIsV0FBWSxvQkFDWlMsYUFBYyxLQUNkd0csa0JBQWtCLEdBVnBCbkgsUUFDRUMsT0FBTyxPQUNQcUYsVUFBVSxZQUFhZ0YiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsICd1aS5ib290c3RyYXAnXSlcclxuXHRcdC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgQXBwQ29udHJvbGxlcik7XHJcblxyXG5cdEFwcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICdhcHBTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkcm9vdFNjb3BlLCBhcHBTZXJ2aWNlKSB7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBhcHBTZXJ2aWNlLnJvdXRlQ2hhbmdlRXJyb3IpO1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG5cdGFwcENvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cdGZ1bmN0aW9uIGFwcENvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG5cdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9naW4vbG9naW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2xvZ291dCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9nb3V0L2xvZ291dC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9kYXNoYm9hcmQnLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdFx0aXNBdXRoZW50aWNhdGVkOiBbJ2FjY2Vzc1NlcnZpY2UnLCBpc0F1dGhlbnRpY2F0ZWRdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2FkbWluJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvYWRtaW4vYWRtaW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0FkbWluQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGlzQWRtaW46IFsnYWNjZXNzU2VydmljZScsIGlzQWRtaW5dXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRyZWRpcmVjdFRvOiAnL2xvZ2luJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoYWNjZXNzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gYWNjZXNzU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0FkbWluKGFjY2Vzc1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIGFjY2Vzc1NlcnZpY2UuaXNBZG1pbigpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnYXBwU2VydmljZScsIGFwcFNlcnZpY2UpO1xyXG5cclxuXHRhcHBTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICdzdGF0dXNTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gYXBwU2VydmljZSgkbG9jYXRpb24sIHN0YXR1c1NlcnZpY2UpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJvdXRlQ2hhbmdlRXJyb3I6IHJvdXRlQ2hhbmdlRXJyb3JcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcm91dGVDaGFuZ2VFcnJvcihldmVudCwgY3VycmVudCwgcHJldmlvdXMsIHJlamVjdGlvbikge1xyXG5cdFx0XHRpZiAocmVqZWN0aW9uID09PSBzdGF0dXNTZXJ2aWNlLlVOQVVUSE9SSVpFRCkge1xyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcclxuXHRcdFx0fSBlbHNlIGlmIChyZWplY3Rpb24gPT09IHN0YXR1c1NlcnZpY2UuRk9SQklEREVOKSB7XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9mb3JiaWRkZW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFVzZWQgdG8gYWNjZXNzIHRoZSBhcGkgb2YgdGhlIHZhcmlvdXMgaXRlbSB0eXBlcy5cclxuXHQqIEFuIGluc3RhbmNlIG9mIGNydWQgbXVzdCBiZSBjcmVhdGVkIGluIG9yZGVyIHRvIHVzZSB0aGUgc2VydmljZS5cclxuXHQqXHJcblx0KiBBbGwgcHJvbWlzZXMgcmV0dXJuICdzdWNjZXNzJyBhbmQgZWl0aGVyICdkYXRhJyBvbiBzdWNjZXNzIG9yLCBvbiBlcnJvciwgJ3RpdGxlJ1xyXG5cdCogd2l0aCBhIGdlbmVyYWwgZXJyb3IgYW5kICdkZXRhaWxzJyB3aXRoIG1vcmUgZGV0YWlscy5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2NydWRTZXJ2aWNlJywgY3J1ZFNlcnZpY2UpO1xyXG5cclxuXHRjcnVkU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gY3J1ZFNlcnZpY2UoJGh0dHAsICRsb2cpIHtcclxuXHRcdHZhciBjcnVkID0gaW5pdDtcclxuXHRcdGNydWQucHJvdG90eXBlID0ge1xyXG5cdFx0XHRnZXQ6IGdldCxcclxuXHRcdFx0Z2V0V2hlcmU6IGdldFdoZXJlLFxyXG5cdFx0XHRjcmVhdGU6IGNyZWF0ZSxcclxuXHRcdFx0dXBkYXRlOiB1cGRhdGUsXHJcblx0XHRcdHJlbW92ZTogcmVtb3ZlLFxyXG5cdFx0XHRyZW1vdmVXaGVyZTogcmVtb3ZlV2hlcmUsXHJcblx0XHRcdHJlbW92ZVVuZWNlc3NhcnlLZXlzOiByZW1vdmVVbmVjZXNzYXJ5S2V5c1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gY3J1ZDtcclxuXHJcblx0XHQvKipcclxuXHRcdCogSW5pdGlhbGl6ZSB0aGUgYmFzZSB1cmwgdXNpbmcgdGhlIHR5cGUgb2YgaXRlbSB0byBiZSBjYWxsZWQgb24uXHJcblx0XHQqIEFjdGl2aXRpZXMgYW5kIHRoZWlyIHBhcmVudHMgaGF2ZSBhIHNwZWNpZmljIHN1YmZvbGRlciB0byBiZSBwb2ludGVkIHRvLFxyXG5cdFx0KiB3aGlsZSBvdGhlcnMgZG8gbm90LlxyXG5cdFx0KlxyXG5cdFx0KiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlIG9mIGl0ZW0uXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gaW5pdCh0eXBlKSB7XHJcblx0XHRcdC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cclxuXHRcdFx0dGhpcy50eXBlID0gdHlwZTtcclxuXHRcdFx0dGhpcy5iYXNlID0gJ2FwaS8nO1xyXG5cdFx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0XHRjYXNlICdldmVudCc6XHJcblx0XHRcdFx0Y2FzZSAnY2FsZW5kYXInOlxyXG5cdFx0XHRcdFx0dGhpcy5iYXNlICs9ICdhY3Rpdml0eS9jYWxlbmRhci8nO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnbGFiZWwnOlxyXG5cdFx0XHRcdGNhc2UgJ3Rhc2snOlxyXG5cdFx0XHRcdFx0dGhpcy5iYXNlICs9ICdhY3Rpdml0eS90YXNrLyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0dGhpcy5iYXNlICs9IHR5cGUgKyAnLyc7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5iYXNlICs9IHR5cGUgKyAnTWFuYWdlci5waHAnO1xyXG5cdFx0XHQvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZ2V0LlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PSBxdWVyeSByZXN1bHRzIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0KGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSBcdHtzdHJpbmd9XHR3aGVyZSBcdFdoZXJlIGNsYXVzZS5cclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0dXNlcklEXHRGb3IgYWN0aXZpdGllcyAodGFza3MsIGV2ZW50cyksIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdHVzZXIgZm9yIHRoZSBhY3Rpdml0eS4gUGFzcyBlbXB0eSBzdHJpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0b3RoZXJ3aXNlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PSBxdWVyeSByZXN1bHRzIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0V2hlcmUod2hlcmUsIHVzZXJJRCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KHRoaXMuYmFzZSArICc/dXNld2hlcmU9dHJ1ZSZ3aGVyZT0nICsgZXNjYXBlKHdoZXJlKSArICcmaWQ9JyArIHVzZXJJRCkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7bWl4ZWRbXX1cdGRhdGFcdERhdGEgb2YgaXRlbSB0byBjcmVhdGUuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09PSAxIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuXHRcdFx0ZGF0YSA9IHRoaXMucmVtb3ZlVW5lY2Vzc2FyeUtleXMoZGF0YSk7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QodGhpcy5iYXNlLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gdXBkYXRlLlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIHVwZGF0ZS5cclxuXHRcdCpcclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09ICcxJyBvbiBzdWNjZXNzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShpZCwgZGF0YSkge1xyXG5cdFx0XHRkYXRhID0gdGhpcy5yZW1vdmVVbmVjZXNzYXJ5S2V5cyhkYXRhKTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KHRoaXMuYmFzZSArICc/aWQ9JyArIGlkLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZGVsZXRlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gMSBvbiBzdWNjZXNzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZShpZCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/aWQ9JyArIGlkKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW0gXHR7c3RyaW5nfVx0d2hlcmUgXHRXaGVyZSBjbGF1c2UuXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdHVzZXJJRFx0Rm9yIGFjdGl2aXRpZXMgKHRhc2tzLCBldmVudHMpLCB0aGUgY29ycmVzcG9uZGluZ1xyXG5cdFx0Klx0XHRcdFx0XHRcdFx0XHR1c2VyIGZvciB0aGUgYWN0aXZpdHkuIFBhc3MgZW1wdHkgc3RyaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdG90aGVyd2lzZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPj0gMCBvbiBzdWNjZXNzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZVdoZXJlKHdoZXJlLCB1c2VySUQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmRlbGV0ZSh0aGlzLmJhc2UgKyAnP3doZXJlPXRydWUmaWQ9JyArIHVzZXJJRCwgd2hlcmUpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHJldHVybiByZXNwb25zZTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHN1Y2Nlc3M6ICdmYWxzZScsXHJcblx0XHRcdFx0dGl0bGU6ICdFcnJvciB3aGVuIHF1ZXJ5aW5nIHNlcnZlci4nLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEl0ZW0gZGF0YSBwYXNzZWQgaW4gbWF5IHN0aWxsIGhhdmUgdGhlaXIgaWRzIG9yIGFsaWFzIGZpZWxkcyAoZm9yIGFjdGl2aXRpZXMpXHJcblx0XHQqIGVtYmVkZGVkLCB3aGljaCB3aWxsIGNhbiBjYXVzZSBlcnJvcnMgaW4gdGhlIFNRTC5cclxuXHRcdCpcclxuXHRcdCogQHBhcmFtXHR7bWl4ZWRbXX0gZGF0YVxyXG5cdFx0KiBAcmV0dXJuXHR7bWl4ZWRbXX1cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiByZW1vdmVVbmVjZXNzYXJ5S2V5cyhkYXRhKSB7XHJcblx0XHRcdHZhciB0b0RlbGV0ZSA9IFsnaWQnLCAncGVyc29uX2lkJywgdGhpcy50eXBlICsgJ19pZCcsICdhY3Rpdml0eV9pbmZvX2lkJywgJ3BhcmVudF9uYW1lJ107ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0b0RlbGV0ZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGRlbGV0ZSBkYXRhW3RvRGVsZXRlW2ldXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBVc2VkIHRvIGFjY2VzcyBzZXNzaW9uIHZhcmlhYmxlcy5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Nlc3Npb25TZXJ2aWNlJywgc2Vzc2lvblNlcnZpY2UpO1xyXG5cclxuXHRzZXNzaW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gc2Vzc2lvblNlcnZpY2UoJGh0dHAsICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmJhc2UgPSAnYXBpL3Nlc3Npb24vc2Vzc2lvblZhck1hbmFnZXIucGhwP3Zhcj0nO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFZhcjogZ2V0VmFyLFxyXG5cdFx0XHRzZXRWYXI6IHNldFZhclxyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfSAkbmFtZVx0VmFyaWFibGUgbmFtZSB0byBnZXQgZnJvbSBzZXNzaW9uLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nfSBcdFx0UHJvbWlzZSBvciBlcnJvciBvbiBmYWlsLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGdldFZhcigkbmFtZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KHZtLmJhc2UgKyAkbmFtZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9ICRuYW1lXHRWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9IFx0XHRQcm9taXNlIG9yIGVycm9yIG9uIGZhaWwuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0VmFyKCRuYW1lLCAkdmFsdWUpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3Qodm0uYmFzZSArICRuYW1lLCAkdmFsdWUpXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gYWNjZXNzaW5nIHZhcmlhYmxlLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBDb21wYXJlIGFuIGlucHV0IGZpZWxkIHRvIGFub3RoZXIgZmllbGQsIGRldGVybWluZWQgYnkgdGhlIGRldi5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BDb21wYXJlVG8nLCBjb21wYXJlVG8pO1xyXG5cclxuXHRmdW5jdGlvbiBjb21wYXJlVG8oKSB7XHJcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xyXG5cdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXHJcblx0XHRcdHNjb3BlOiB7XHJcblx0XHRcdFx0b3RoZXJNb2RlbDogJz1zcENvbXBhcmVUbydcclxuXHRcdFx0fSxcclxuXHRcdFx0bGluazogbGlua1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuXHRcdFx0dmFyIHVuYmluZFdhdGNoID0gc2NvcGUuJHdhdGNoKCdvdGhlck1vZGVsJywgdmFsaWRhdGVPbkNoYW5nZSk7XHJcblx0XHRcdG5nTW9kZWwuJHZhbGlkYXRvcnMuc3BDb21wYXJlVG8gPSBjb21wYXJlVmFsdWVzO1xyXG5cdFx0XHRlbGVtZW50Lm9uKCckZGVzdHJveScsIGNsZWFuVXApO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY2xlYW5VcCgpIHtcclxuXHRcdFx0XHR1bmJpbmRXYXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjb21wYXJlVmFsdWVzKHZpZXdWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiAodmlld1ZhbHVlID09PSBzY29wZS5vdGhlck1vZGVsLiR2aWV3VmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB2YWxpZGF0ZU9uQ2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG5cdFx0XHRcdG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XHJcblxyXG5cdExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWydsb2dpblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIobG9naW5TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5sb2dpbiA9IGxvZ2luO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBMb2dpblNlcnZpY2Ugd2lsbCByZWRpcmVjdCBpZiB0aGVyZSBpcyBubyBlcnJvci4gVGh1cywgdGhlcmUncyBvbmx5IGFcclxuXHRcdCogbmVlZCB0byByZXR1cm4gYSBwcm9taXNlIGlmIHRoZXJlJ3MgYW4gZXJyb3IuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gbG9naW4oKSB7XHJcblx0XHRcdHZtLmxvYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRsb2dpblNlcnZpY2UubG9naW4odm0udXNlcilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XHJcblxyXG5cdGxvZ2luU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9jYXRpb24nLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGxvZ2luU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJ2FwaS91c2VyL2xvZ2luTWFuYWdlci5waHAnLCB1c2VyKVxyXG5cdFx0XHRcdC50aGVuKGxvZ2luQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKGxvZ2luRmFpbGVkKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGEudGl0bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZGFzaGJvYXJkJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdFx0cmV0dXJuICdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignTW9kYWxDb250cm9sbGVyJywgTW9kYWxDb250cm9sbGVyKTtcclxuXHJcblx0TW9kYWxDb250cm9sbGVyLiRpbmplY3QgPSBbJyR1aWJNb2RhbEluc3RhbmNlJywgJ2dyb3VwcycsICdpdGVtJ107XHJcblx0ZnVuY3Rpb24gTW9kYWxDb250cm9sbGVyKCR1aWJNb2RhbEluc3RhbmNlLCBncm91cHMsIGl0ZW0pIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5ncm91cHMgPSBncm91cHM7XHJcblx0XHR2bS5pdGVtID0gaXRlbTtcclxuXHRcdHZtLmNsb3NlID0gY2xvc2U7XHJcblx0XHR2bS5jYW5jZWwgPSBjYW5jZWw7XHJcblx0XHR2bS5jb25maXJtID0gY29uZmlybTtcclxuXHRcdHZtLnJlbW92ZSA9IHJlbW92ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBjbG9zZSgpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjYW5jZWwoKSB7XHJcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZShkYXRhKSB7XHJcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoZGF0YSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29uZmlybShkYXRhKSB7XHJcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKGRhdGEpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignVGFza3NDb250cm9sbGVyJywgVGFza3NDb250cm9sbGVyKTtcclxuXHJcblx0VGFza3NDb250cm9sbGVyLiRpbmplY3QgPSBbJ3Rhc2tzU2VydmljZScsICd0YXNrTW9kYWxTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gVGFza3NDb250cm9sbGVyKHRhc2tzU2VydmljZSwgdGFza01vZGFsU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLnRhc2tzID0gW107XHJcblx0XHR2bS5zaG93VGFza0RpYWxvZyA9IHNob3dUYXNrRGlhbG9nO1xyXG5cdFx0dm0udG9nZ2xlQ29tcGxldGVkID0gdG9nZ2xlQ29tcGxldGVkO1xyXG5cclxuXHRcdGFjdGl2YXRlKCk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS5nZXRUYXNrcygpLnRoZW4odXBkYXRlVGFza3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dUYXNrRGlhbG9nKHRhc2spIHtcclxuXHRcdFx0dGFza01vZGFsU2VydmljZS5vcGVuVGFza01vZGFsKHRhc2spLnRoZW4odXBkYXRlVGFza3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS50b2dnbGVDb21wbGV0ZWQodGFzaykudGhlbih1cGRhdGVUYXNrcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGFza3MocmVzcG9uc2UpIHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0udGFza3MgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFRhc2tzJywgdGFza3NEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiB0YXNrc0RpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy90YXNrcy90YXNrcy5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1Rhc2tzQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tzU2VydmljZScsIHRhc2tzU2VydmljZSk7XHJcblxyXG5cdHRhc2tzU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gdGFza3NTZXJ2aWNlKCRodHRwLCAkbG9nLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLnRhc2sgPSBuZXcgY3J1ZFNlcnZpY2UoJ3Rhc2snKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVUYXNrOiBjcmVhdGVUYXNrLFxyXG5cdFx0XHRjcmVhdGVPclVwZGF0ZVRhc2s6IGNyZWF0ZU9yVXBkYXRlVGFzayxcclxuXHRcdFx0ZGVsZXRlVGFzazogZGVsZXRlVGFzayxcclxuXHRcdFx0Z2V0VGFza3M6IGdldFRhc2tzLFxyXG5cdFx0XHR0b2dnbGVDb21wbGV0ZWQ6IHRvZ2dsZUNvbXBsZXRlZCxcclxuXHRcdFx0dXBkYXRlVGFzazogdXBkYXRlVGFza1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVUYXNrKHRhc2spIHtcclxuXHRcdFx0cmV0dXJuIHZtLnRhc2suY3JlYXRlKHRhc2spLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVRhc2sodGFzaykge1xyXG5cdFx0XHRpZiAoIXRhc2sudGFza19pZCkge1xyXG5cdFx0XHRcdHJldHVybiBjcmVhdGVUYXNrKHRhc2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB1cGRhdGVUYXNrKHRhc2sudGFza19pZCwgdGFzayk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0udGFzay5yZW1vdmUoaWQpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldFRhc2tXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFRhc2tXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0udGFzay5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2suY29tcGxldGVkID0gIXBhcnNlSW50KHRhc2suY29tcGxldGVkKTtcclxuXHRcdFx0cmV0dXJuIHVwZGF0ZVRhc2sodGFzay50YXNrX2lkLCB0YXNrKS50aGVuKGdldFRhc2tzKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVUYXNrKGlkLCB0YXNrKSB7XHJcblx0XHRcdHJldHVybiB2bS50YXNrLnVwZGF0ZShpZCwgdGFzaykudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIERhc2hib2FyZENvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG5cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFJlZ2lzdGVyQ29udHJvbGxlcik7XHJcblxyXG5cdFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydyZWdpc3RlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIocmVnaXN0ZXJTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XHJcblx0XHRcdHZtLmxvYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRyZWdpc3RlclNlcnZpY2UucmVnaXN0ZXIodm0udXNlcilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3JlZ2lzdGVyU2VydmljZScsIHJlZ2lzdGVyU2VydmljZSk7XHJcblxyXG5cdHJlZ2lzdGVyU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJGxvZycsICdjcnVkU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZSgkbG9jYXRpb24sICRsb2csIGNydWRTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5jcnVkID0gbmV3IGNydWRTZXJ2aWNlKCd1c2VyJyk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cmVnaXN0ZXI6IHJlZ2lzdGVyXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmNydWQuY3JlYXRlKHVzZXIpXHJcblx0XHRcdFx0LnRoZW4ocmVnaXN0cmF0aW9uQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmVnaXN0cmF0aW9uQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2Uuc3VjY2VzcyA9PT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0JGxvZy5lcnJvcihyZXNwb25zZS50aXRsZSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UudGl0bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRsb2NhdGlvbi51cmwoJy9sb2dpbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdhY2Nlc3NTZXJ2aWNlJywgYWNjZXNzU2VydmljZSk7XHJcblxyXG5cdGFjY2Vzc1NlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRxJywgJ3Nlc3Npb25TZXJ2aWNlJywgJ3N0YXR1c1NlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBhY2Nlc3NTZXJ2aWNlKCRsb2NhdGlvbiwgJHEsIHNlc3Npb25TZXJ2aWNlLCBzdGF0dXNTZXJ2aWNlKSB7XHJcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkLFxyXG5cdFx0XHRpc0FkbWluOiBpc0FkbWluXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oaXNBdXRoZW50aWNhdGVkQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzICE9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShzdGF0dXNTZXJ2aWNlLk9LKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHN0YXR1c1NlcnZpY2UuVU5BVVRIT1JJWkVEKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBZG1pbigpIHtcclxuXHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogU3RhdHVzIGNvZGVzIHVzZWQgd2hlbiBhY2Nlc3NpbmcgdmFyaW91cyBwYWdlcyBpbiB0aGUgYXBwLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuc2VydmljZSgnc3RhdHVzU2VydmljZScsIHN0YXR1c1NlcnZpY2UpO1xyXG5cclxuXHRmdW5jdGlvbiBzdGF0dXNTZXJ2aWNlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0T0s6IDIwMCxcclxuXHRcdFx0VU5BVVRIT1JJWkVEOiA0MDEsXHJcblx0XHRcdEZPUkJJRERFTjogNDAzXHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tNb2RhbFNlcnZpY2UnLCB0YXNrTW9kYWxTZXJ2aWNlKTtcclxuXHJcblx0dGFza01vZGFsU2VydmljZS4kaW5qZWN0ID0gWyckdWliTW9kYWwnLCAnbGFiZWxTZXJ2aWNlJywgJ3Rhc2tzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHRhc2tNb2RhbFNlcnZpY2UoJHVpYk1vZGFsLCBsYWJlbFNlcnZpY2UsIHRhc2tzU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG9wZW5UYXNrTW9kYWw6IG9wZW5UYXNrTW9kYWxcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gb3BlblRhc2tNb2RhbCh0YXNrKSB7XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKHRhc2suZHVlKSkge1xyXG5cdFx0XHRcdHRhc2suZHVlID0gbmV3IERhdGUodGFzay5kdWUucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKHRhc2sucmVtaW5kZXIpKSB7XHJcblx0XHRcdFx0dGFzay5yZW1pbmRlciA9IG5ldyBEYXRlKHRhc2sucmVtaW5kZXIucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdGFza3MvbW9kYWwvdGFzay5tb2RhbC5odG1sJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRncm91cHM6IGxhYmVsU2VydmljZS5nZXRMYWJlbHMoKSxcclxuXHRcdFx0XHRcdGl0ZW06IHRhc2tcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLnJlc3VsdFxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGFza3NTZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlVGFzayhyZXNwb25zZSlcclxuXHRcdFx0XHRcdFx0LnRoZW4odGFza3NTZXJ2aWNlLmdldFRhc2tzKTtcclxuXHRcdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB0YXNrc1NlcnZpY2UuZGVsZXRlVGFzayhyZXNwb25zZSlcclxuXHRcdFx0XHRcdFx0XHQudGhlbih0YXNrc1NlcnZpY2UuZ2V0VGFza3MpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2xhYmVsU2VydmljZScsIGxhYmVsU2VydmljZSk7XHJcblxyXG5cdGxhYmVsU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gbGFiZWxTZXJ2aWNlKCRodHRwLCAkbG9nLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmxhYmVsID0gbmV3IGNydWRTZXJ2aWNlKCdsYWJlbCcpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGNyZWF0ZUxhYmVsOiBjcmVhdGVMYWJlbCxcclxuXHRcdFx0ZGVsZXRlTGFiZWw6IGRlbGV0ZUxhYmVsLFxyXG5cdFx0XHRnZXRMYWJlbHM6IGdldExhYmVscyxcclxuXHRcdFx0dXBkYXRlTGFiZWw6IHVwZGF0ZUxhYmVsXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUxhYmVsKGxhYmVsKSB7XHJcblx0XHRcdHJldHVybiB2bS5sYWJlbC5jcmVhdGUobGFiZWwpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBkZWxldGVMYWJlbChpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0ubGFiZWwucmVtb3ZlKGlkKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0TGFiZWxzKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCdpZCcpXHJcblx0XHRcdFx0LnRoZW4oZ2V0TGFiZWxXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldExhYmVsV2l0aFVzZXJJRChyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2Vzcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHZtLmxhYmVsLmdldFdoZXJlKCdwZXJzb25faWQ9JyArIHJlcy5kYXRhLCAnJykudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcmVzLnRpdGxlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlTGFiZWwoaWQsIGxhYmVsKSB7XHJcblx0XHRcdHJldHVybiB2bS5sYWJlbC51cGRhdGUoaWQsIGxhYmVsKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XHJcblxyXG5cdEhlYWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ2hlYWRlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRzY29wZSwgaGVhZGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLm5hbWUgPSAnJztcclxuXHRcdHZtLnVybCA9ICcnO1xyXG5cclxuXHRcdGhlYWRlclNlcnZpY2UuZ2V0VXNlcigpXHJcblx0XHRcdC50aGVuKGdldFVzZXJDb21wbGV0ZSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlckNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdCRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZtLm5hbWUgPSAocmVzcG9uc2UubmFtZSA9PT0gZmFsc2UpID8gJ0xvZ2luJyA6IHJlc3BvbnNlLm5hbWU7XHJcblx0XHRcdFx0dm0udXJsID0gcmVzcG9uc2UudXJsO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BIZWFkZXInLCBoZWFkZXJEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBoZWFkZXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9oZWFkZXIvaGVhZGVyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnaGVhZGVyU2VydmljZScsIGhlYWRlclNlcnZpY2UpO1xyXG5cclxuXHRoZWFkZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBoZWFkZXJTZXJ2aWNlKCRodHRwLCAkbG9nLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihnZXROYW1lQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0TmFtZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblxyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2VzcyA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiB7bmFtZTogZmFsc2UsIHVybDogJyMvbG9naW4nfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHtuYW1lOiByZXMuZGF0YSwgdXJsOiAnIy9kYXNoYm9hcmQnfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJywgU2lkZWJhckNvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBTaWRlYmFyQ29udHJvbGxlcigpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0dm0uY29sbGFwc2VkID0gdHJ1ZTtcclxuXHJcblx0XHR2bS50b2dnbGVTaWRlYmFyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZtLmNvbGxhcHNlZCA9ICF2bS5jb2xsYXBzZWQ7XHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFNpZGViYXInLCBzaWRlYmFyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gc2lkZWJhckRpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGxpbms6IGxpbmssXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvbGF5b3V0L3NpZGViYXIvc2lkZWJhci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1NpZGViYXJDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcblx0XHRcdHNjb3BlLiR3YXRjaChhdHRycy5zaWRlYmFyRGlyZWN0aXZlLCB0b2dnbGVTaWRlYmFyKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoY29sbGFwc2VkKSB7XHJcblx0XHRcdFx0aWYgKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
