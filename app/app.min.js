!function(){"use strict";function e(e,t){e.$on("$routeChangeError",t.routeChangeError)}angular.module("app",["ngRoute","ui.bootstrap","angularMoment"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function t(e){return e.getCalendars()}function n(e){return e.getEvents()}function r(e){return e.getLabels()}function a(e){return e.getTasks()}function o(e){return e.isAuthenticated()}function i(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",o],tasks:["tasksService",a],events:["eventsService",n],labels:["labelService",r],calendars:["calendarService",t]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",i]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function n(n,r,a,o){o===t.UNAUTHORIZED?e.path("/login"):o===t.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:n}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e){return function(t,n){for(var r=[],a=0;a<t.length;a++){var o=n.isSame(e(t[a].dt_start),"day");o||(o=n.isSame(e(t[a].dt_end),"day")),o&&r.push(t[a])}return r}}angular.module("app").filter("sameDayAs",e),e.$inject=["moment"]}(),function(){"use strict";function e(e,t){function n(e){switch(this.type=e,this.base="api/",e){case"event":case"calendar":this.base+="activity/calendar/";break;case"label":case"task":this.base+="activity/task/";break;default:this.base+=e+"/"}this.base+=e+"Manager.php"}function r(t){return e.get(this.base+"?id="+t).then(u)["catch"](l)}function a(t,n){return e.get(this.base+"?usewhere=true&where="+escape(t)+"&id="+n).then(u)["catch"](l)}function o(t){return t=this.removeUnecessaryKeys(t),e.post(this.base,t).then(u)["catch"](l)}function i(t,n){return n=this.removeUnecessaryKeys(n),e.put(this.base+"?id="+t,n).then(u)["catch"](l)}function c(t){return e["delete"](this.base+"?id="+t).then(u)["catch"](l)}function s(t,n){return e["delete"](this.base+"?where=true&id="+n,t).then(u)["catch"](l)}function u(e){return e}function l(e){return t.error(e),{success:"false",title:"Error when querying server.",message:e}}function d(e){for(var t=["id","person_id",this.type+"_id","activity_info_id","parent_name"],n=0;n<t.length;n++)delete e[t[n]];return e}var f=n;return f.prototype={get:r,getWhere:a,create:o,update:i,remove:c,removeWhere:s,removeUnecessaryKeys:d},f}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function n(t){return e.get(i.base+t).then(a)["catch"](o)}function r(t,n){return e.post(i.base+t,n).then(a)["catch"](o)}function a(e){return e}function o(e){return t.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:n,setVar:r}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,n,r){function a(){c()}function o(t){return t===e.otherModel.$viewValue}function i(e,t){r.$validate()}var c=e.$watch("otherModel",i);r.$validators.spCompareTo=o,t.on("$destroy",a)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e,t,n,r){function a(){l.today=t.getToday(),l.selectedDay=l.today,l.month=t.getMonth(l.today)}function o(e){return t.getEndOfDay(e)}function i(e){return t.isSameDay(e,l.selectedDay)}function c(e){l.selectedDay=e.fullDate}function s(e){r.openEventModal(e,l.calendars).then(u)}function u(e){e&&(l.events=e)}var l=this;l.isSameDayAsSelected=i,l.getEndOfDay=o,l.selectDay=c,l.showEventModal=s,a()}angular.module("app").controller("EventsController",e),e.$inject=["moment","calendarWidgetService","eventsService","eventModalService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/events/events.html",controller:"EventsController",controllerAs:"vm",bindToController:!0,scope:{events:"=",calendars:"="}}}angular.module("app").directive("spEvents",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return l.event.create(e).then(u)}function o(e){return e.event_id?s(e.event_id,e):a(e)}function i(e){return l.event.remove(e).then(u)}function c(){function e(e){var t=e.data;return t.success?l.event.getWhere("",t.data).then(u):t.title}return r.getVar("id").then(e)}function s(e,t){return l.event.update(e,t).then(u)}function u(e){var t=e.data;return t.success?t.data:t.title}var l=this;return l.event=new n("event"),{createEvent:a,createOrUpdateEvent:o,deleteEvent:i,getEvents:c,updateEvent:s}}angular.module("app").factory("eventsService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t){function n(e){t.openTaskModal(e,o.labels).then(a)}function r(t){e.toggleCompleted(t).then(a)}function a(e){e&&(o.tasks=e)}var o=this;o.showTaskModal=n,o.toggleCompleted=r}angular.module("app").controller("TasksController",e),e.$inject=["tasksService","taskModalService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0,scope:{tasks:"=",labels:"=",order:"="}}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return d.task.create(e).then(l)}function o(e){return e.task_id?u(e.task_id,e):a(e)}function i(e){return d.task.remove(e).then(l)}function c(){function e(e){var t=e.data;return t.success?d.task.getWhere("",t.data).then(l):t.title}return r.getVar("id").then(e)}function s(e){return e.completed=!parseInt(e.completed),u(e.task_id,e).then(c)}function u(e,t){return d.task.update(e,t).then(l)}function l(e){var t=e.data;return t.success?t.data:t.title}var d=this;return d.task=new n("task"),{createTask:a,createOrUpdateTask:o,deleteTask:i,getTasks:c,toggleCompleted:s,updateTask:u}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e){function t(){n.loading=!0,e.login(n.user).then(function(e){n.loading=!1,n.error=e})}var n=this;n.loading=!1,n.error="",n.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,n){function r(r){function a(e){return e.data.success===!1?e.data.title:void t.path("/dashboard")}function o(e){return n.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",r).then(a)["catch"](o)}return{login:r}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e,t,n){function r(){e.close()}function a(){e.dismiss("cancel")}function o(t){e.dismiss(t)}function i(t){e.close(t)}var c=this;c.groups=t,c.item=n,c.close=r,c.cancel=a,c.confirm=i,c.remove=o}angular.module("app").controller("ModalController",e),e.$inject=["$uibModalInstance","groups","item"]}(),function(){"use strict";function e(e,t,n,r,a){var o=this;o.tasks=t,o.events=n,o.labels=r,o.calendars=a}angular.module("app").controller("DashboardController",e),e.$inject=["isAuthenticated","tasks","events","labels","calendars"]}(),function(){"use strict";function e(e){function t(){n.loading=!0,e.register(n.user).then(function(e){n.loading=!1,n.error=e})}var n=this;n.error="",n.loading=!1,n.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t,n){function r(n){function r(n){return"false"===n.success?(t.error(n.title),n.title):void e.url("/login")}return a.crud.create(n).then(r)}var a=this;return a.crud=new n("user"),{register:r}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e,t,n,r){function a(){function e(e){return e.data.success!==!1?i.resolve(r.OK):i.reject(r.UNAUTHORIZED),i.promise}return n.getVar("name").then(e)}function o(){}var i=t.defer();return{isAuthenticated:a,isAdmin:o}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return u.calendar.create(e).then(s)}function o(e){return u.calendar.remove(e).then(s)}function i(){function e(e){var t=e.data;return t.success?u.calendar.getWhere("person_id="+t.data,"").then(s):t.title}return r.getVar("id").then(e)}function c(e,t){return u.calendar.update(e,t).then(s)}function s(e){var t=e.data;return t.success?t.data:t.title}var u=this;return u.calendar=new n("calendar"),{createCalendar:a,deleteCalendar:o,getCalendars:i,updateCalendar:c}}angular.module("app").factory("calendarService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t,n){function r(t,r){return e.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/events/modal/event.modal.html",resolve:{groups:function(){return r},item:t}}).result.then(function(e){return n.createOrUpdateEvent(e).then(n.getEvents)},function(e){return"string"!=typeof e?n.deleteEvent(e).then(n.getEvents):void 0})}return{openEventModal:r}}angular.module("app").factory("eventModalService",e),e.$inject=["$uibModal","calendarService","eventsService"]}(),function(){"use strict";function e(e){function t(e){return e.clone().add(1,"day").subtract(1,"ms")}function n(e){for(var t=[],n=e.clone().date(1).startOf("week"),r=e.month();r===e.month();r=n.month())t.push(a(n,e.month())),n=n.add(1,"weeks");return t}function r(){return e()}function a(t,n){for(var r=[],a=t.clone(),o=0;7>o;o++)r.push({number:a.date(),isTargetMonth:a.month()===n,isToday:a.isSame(e(),"day"),fullDate:a}),a=a.clone().add(1,"days");return r}function o(e,t){return e.isSame(t,"day")}return{getEndOfDay:t,getMonth:n,getToday:r,getWeek:a,isSameDay:o}}angular.module("app").factory("calendarWidgetService",e),e.$inject=["moment"]}(),function(){"use strict";function e(e,t,n,r){function a(e){return u.label.create(e).then(s)}function o(e){return u.label.remove(e).then(s)}function i(){function e(e){var t=e.data;return t.success?u.label.getWhere("person_id="+t.data,"").then(s):t.title}return r.getVar("id").then(e)}function c(e,t){return u.label.update(e,t).then(s)}function s(e){var t=e.data;return t.success?t.data:t.title}var u=this;return u.label=new n("label"),{createLabel:a,deleteLabel:o,getLabels:i,updateLabel:c}}angular.module("app").factory("labelService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t,n){function r(t,r){return e.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/tasks/modal/task.modal.html",resolve:{groups:function(){return r},item:t}}).result.then(function(e){return n.createOrUpdateTask(e).then(n.getTasks)},function(e){return"string"!=typeof e?n.deleteTask(e).then(n.getTasks):void 0})}return{openTaskModal:r}}angular.module("app").factory("taskModalService",e),e.$inject=["$uibModal","labelService","tasksService"]}(),function(){"use strict";function e(e,t){function n(t){e.$evalAsync(function(){r.name=t.name===!1?"Login":t.name,r.url=t.url})}var r=this;r.name="",r.url="",t.getUser().then(n)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,t,n){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t,n){function r(){function e(e){var t=e.data;return t.success===!1?{name:!1,url:"#/login"}:{name:t.data,url:"#/dashboard"}}return n.getVar("name").then(e)}return{getUser:r}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,n){function r(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(n.sidebarDirective,r)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiZ2V0Q2FsZW5kYXJzIiwiY2FsZW5kYXJTZXJ2aWNlIiwiZ2V0RXZlbnRzIiwiZXZlbnRzU2VydmljZSIsImdldExhYmVscyIsImxhYmVsU2VydmljZSIsImdldFRhc2tzIiwidGFza3NTZXJ2aWNlIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwidGFza3MiLCJldmVudHMiLCJsYWJlbHMiLCJjYWxlbmRhcnMiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiY29uZmlnIiwiJGxvY2F0aW9uIiwic3RhdHVzU2VydmljZSIsImV2ZW50IiwiY3VycmVudCIsInByZXZpb3VzIiwicmVqZWN0aW9uIiwiVU5BVVRIT1JJWkVEIiwicGF0aCIsIkZPUkJJRERFTiIsImZhY3RvcnkiLCJzYW1lRGF5QXMiLCJtb21lbnQiLCJkYXkiLCJzYW1lRGF5RXZlbnRzIiwiaSIsImxlbmd0aCIsInJlc3VsdCIsImlzU2FtZSIsImR0X3N0YXJ0IiwiZHRfZW5kIiwicHVzaCIsImZpbHRlciIsImNydWRTZXJ2aWNlIiwiJGh0dHAiLCIkbG9nIiwiaW5pdCIsInR5cGUiLCJ0aGlzIiwiYmFzZSIsImdldCIsImlkIiwidGhlbiIsInByb21pc2VDb21wbGV0ZSIsInByb21pc2VGYWlsZWQiLCJnZXRXaGVyZSIsIndoZXJlIiwidXNlcklEIiwiZXNjYXBlIiwiY3JlYXRlIiwiZGF0YSIsInJlbW92ZVVuZWNlc3NhcnlLZXlzIiwicG9zdCIsInVwZGF0ZSIsInB1dCIsInJlbW92ZSIsInJlbW92ZVdoZXJlIiwicmVzcG9uc2UiLCJlcnJvciIsInN1Y2Nlc3MiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJ0b0RlbGV0ZSIsImNydWQiLCJwcm90b3R5cGUiLCJzZXNzaW9uU2VydmljZSIsImdldFZhciIsIiRuYW1lIiwidm0iLCJzZXRWYXIiLCIkdmFsdWUiLCJjb21wYXJlVG8iLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwiY2xlYW5VcCIsInVuYmluZFdhdGNoIiwiY29tcGFyZVZhbHVlcyIsInZpZXdWYWx1ZSIsIm90aGVyTW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsaWRhdGVPbkNoYW5nZSIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCIkdmFsaWRhdGUiLCIkd2F0Y2giLCIkdmFsaWRhdG9ycyIsInNwQ29tcGFyZVRvIiwib24iLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwiRXZlbnRzQ29udHJvbGxlciIsImNhbGVuZGFyV2lkZ2V0U2VydmljZSIsImV2ZW50TW9kYWxTZXJ2aWNlIiwiYWN0aXZhdGUiLCJ0b2RheSIsImdldFRvZGF5Iiwic2VsZWN0ZWREYXkiLCJtb250aCIsImdldE1vbnRoIiwiZ2V0RW5kT2ZEYXkiLCJpc1NhbWVEYXlBc1NlbGVjdGVkIiwiaXNTYW1lRGF5Iiwic2VsZWN0RGF5IiwiZnVsbERhdGUiLCJzaG93RXZlbnRNb2RhbCIsIm9wZW5FdmVudE1vZGFsIiwidXBkYXRlRXZlbnRzIiwiZXZlbnRzRGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlT3JVcGRhdGVFdmVudCIsImV2ZW50X2lkIiwidXBkYXRlRXZlbnQiLCJkZWxldGVFdmVudCIsImdldEV2ZW50V2l0aFVzZXJJRCIsInJlcyIsIlRhc2tzQ29udHJvbGxlciIsInRhc2tNb2RhbFNlcnZpY2UiLCJzaG93VGFza01vZGFsIiwidGFzayIsIm9wZW5UYXNrTW9kYWwiLCJ1cGRhdGVUYXNrcyIsInRvZ2dsZUNvbXBsZXRlZCIsInRhc2tzRGlyZWN0aXZlIiwib3JkZXIiLCJjcmVhdGVUYXNrIiwiY3JlYXRlT3JVcGRhdGVUYXNrIiwidGFza19pZCIsInVwZGF0ZVRhc2siLCJkZWxldGVUYXNrIiwiZ2V0VGFza1dpdGhVc2VySUQiLCJjb21wbGV0ZWQiLCJwYXJzZUludCIsIkxvZ2luQ29udHJvbGxlciIsImxvZ2luU2VydmljZSIsImxvZ2luIiwibG9hZGluZyIsInVzZXIiLCJsb2dpbkNvbXBsZXRlIiwibG9naW5GYWlsZWQiLCJNb2RhbENvbnRyb2xsZXIiLCIkdWliTW9kYWxJbnN0YW5jZSIsImdyb3VwcyIsIml0ZW0iLCJjbG9zZSIsImNhbmNlbCIsImRpc21pc3MiLCJjb25maXJtIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJ1cmwiLCIkcSIsImlzQXV0aGVudGljYXRlZENvbXBsZXRlIiwiZGVmZXJyZWQiLCJPSyIsInJlamVjdCIsInByb21pc2UiLCJkZWZlciIsInNlcnZpY2UiLCJjcmVhdGVDYWxlbmRhciIsImNhbGVuZGFyIiwiZGVsZXRlQ2FsZW5kYXIiLCJnZXRDYWxlbmRhcldpdGhVc2VySUQiLCJ1cGRhdGVDYWxlbmRhciIsIiR1aWJNb2RhbCIsIm9wZW4iLCJjbG9uZSIsImFkZCIsInN1YnRyYWN0IiwiYURheSIsImRhdGUiLCJzdGFydE9mIiwiZ2V0V2VlayIsInN0YXJ0RGF5IiwidGFyZ2V0TW9udGgiLCJ3ZWVrIiwibnVtYmVyIiwiaXNUYXJnZXRNb250aCIsImlzVG9kYXkiLCJkYXkxIiwiZGF5MiIsImNyZWF0ZUxhYmVsIiwibGFiZWwiLCJkZWxldGVMYWJlbCIsImdldExhYmVsV2l0aFVzZXJJRCIsInVwZGF0ZUxhYmVsIiwiSGVhZGVyQ29udHJvbGxlciIsIiRzY29wZSIsImhlYWRlclNlcnZpY2UiLCJnZXRVc2VyQ29tcGxldGUiLCIkZXZhbEFzeW5jIiwibmFtZSIsImdldFVzZXIiLCJoZWFkZXJEaXJlY3RpdmUiLCJnZXROYW1lQ29tcGxldGUiLCJTaWRlYmFyQ29udHJvbGxlciIsImNvbGxhcHNlZCIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyRGlyZWN0aXZlIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQyxZQU9BLFNBQVNBLEdBQWNDLEVBQVlDLEdBQ2xDRCxFQUFXRSxJQUFJLG9CQUFxQkQsRUFBV0Usa0JBTmhEQyxRQUNFQyxPQUFPLE9BQVEsVUFBVyxlQUFnQixrQkFDMUNDLFdBQVcsZ0JBQWlCUCxHQUU5QkEsRUFBY1EsU0FBVyxhQUFjLGlCQUt4QyxXQUNDLFlBT0EsU0FBU0MsR0FBVUMsR0F5Q2xCLFFBQVNDLEdBQWFDLEdBQ3JCLE1BQU9BLEdBQWdCRCxlQUd4QixRQUFTRSxHQUFVQyxHQUNsQixNQUFPQSxHQUFjRCxZQUd0QixRQUFTRSxHQUFVQyxHQUNsQixNQUFPQSxHQUFhRCxZQUdyQixRQUFTRSxHQUFTQyxHQUNqQixNQUFPQSxHQUFhRCxXQUdyQixRQUFTRSxHQUFnQkMsR0FDeEIsTUFBT0EsR0FBY0Qsa0JBR3RCLFFBQVNFLEdBQVFELEdBQ2hCLE1BQU9BLEdBQWNDLFVBN0R0QlgsRUFDRVksS0FBSyxVQUNMQyxZQUFhLDJCQUNiaEIsV0FBWSxrQkFDWmlCLGFBQWMsT0FFZEYsS0FBSyxXQUNMQyxZQUFhLDZCQUNiaEIsV0FBWSxtQkFDWmlCLGFBQWMsT0FFZEYsS0FBSyxhQUNMQyxZQUFhLCtCQUNiaEIsV0FBWSxxQkFDWmlCLGFBQWMsT0FFZEYsS0FBSyxjQUNMQyxZQUFhLGlDQUNiaEIsV0FBWSxzQkFDWmlCLGFBQWMsS0FDZEMsU0FDQ04saUJBQWtCLGdCQUFpQkEsR0FDbkNPLE9BQVEsZUFBZ0JULEdBQ3hCVSxRQUFTLGdCQUFpQmQsR0FDMUJlLFFBQVMsZUFBZ0JiLEdBQ3pCYyxXQUFZLGtCQUFtQmxCLE1BR2hDVyxLQUFLLFVBQ0xDLFlBQWEseUJBQ2JoQixXQUFZLGtCQUNaaUIsYUFBYyxLQUNkQyxTQUND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QUFTUCxJQUVuQixPQUFJb0UsR0FBSTNELFdBQVksR0FDWDBJLE1BQU0sRUFBT3pDLElBQUssWUFFbkJ5QyxLQUFNL0UsRUFBSXBFLEtBQU0wRyxJQUFLLGVBVDlCLE1BQU8zRixHQUFlQyxPQUFPLFFBQzNCeEIsS0FBSzhKLEdBTlIsT0FDQ0YsUUFBU0EsR0FQWHZOLFFBQ0VDLE9BQU8sT0FDUG9DLFFBQVEsZ0JBQWlCOEssR0FFM0JBLEVBQWNoTixTQUFXLFFBQVMsT0FBUSxxQkFzQjNDLFdBQ0MsWUFNQSxTQUFTdU4sS0FDUixHQUFJckksR0FBSzlCLElBRVQ4QixHQUFHc0ksV0FBWSxFQUVmdEksRUFBR3VJLGNBQWdCLFdBQ2xCdkksRUFBR3NJLFdBQWF0SSxFQUFHc0ksV0FWckIzTixRQUNFQyxPQUFPLE9BQ1BDLFdBQVcsb0JBQXFCd04sTUFZbkMsV0FDQyxZQU1BLFNBQVNHLEtBU1IsUUFBU3BJLEdBQUtDLEVBQU9DLEVBQVNDLEdBRzdCLFFBQVNnSSxHQUFjRCxHQUNsQkEsRUFDSGhJLEVBQVFtSSxZQUFZLGFBRXBCbkksRUFBUW9JLFNBQVMsYUFObkJySSxFQUFNYyxPQUFPWixFQUFNaUksaUJBQWtCRCxHQVR0QyxPQUNDbkksS0FBTUEsRUFDTnZFLFlBQWEsb0NBQ2JoQixXQUFZLG9CQUNaaUIsYUFBYyxLQUNkNkcsa0JBQWtCLEdBVnBCaEksUUFDRUMsT0FBTyxPQUNQMkcsVUFBVSxZQUFhaUgiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcsIFsnbmdSb3V0ZScsICd1aS5ib290c3RyYXAnLCAnYW5ndWxhck1vbWVudCddKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLCBBcHBDb250cm9sbGVyKTtcclxuXHJcblx0QXBwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJ2FwcFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBBcHBDb250cm9sbGVyKCRyb290U2NvcGUsIGFwcFNlcnZpY2UpIHtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VFcnJvcicsIGFwcFNlcnZpY2Uucm91dGVDaGFuZ2VFcnJvcik7XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb25maWcoYXBwQ29uZmlnKTtcclxuXHJcblx0YXBwQ29uZmlnLiRpbmplY3QgPSBbJyRyb3V0ZVByb3ZpZGVyJ107XHJcblx0ZnVuY3Rpb24gYXBwQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcblx0XHQkcm91dGVQcm92aWRlclxyXG5cdFx0XHQud2hlbignL2xvZ2luJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9sb2dpbi9sb2dpbi5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvbG9nb3V0Jywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9sb2dvdXQvbG9nb3V0Lmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdMb2dvdXRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9yZWdpc3RlcicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2Rhc2hib2FyZCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2Rhc2hib2FyZC9kYXNoYm9hcmQuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRpc0F1dGhlbnRpY2F0ZWQ6IFsnYWNjZXNzU2VydmljZScsIGlzQXV0aGVudGljYXRlZF0sXHJcblx0XHRcdFx0XHR0YXNrczogWyd0YXNrc1NlcnZpY2UnLCBnZXRUYXNrc10sXHJcblx0XHRcdFx0XHRldmVudHM6IFsnZXZlbnRzU2VydmljZScsIGdldEV2ZW50c10sXHJcblx0XHRcdFx0XHRsYWJlbHM6IFsnbGFiZWxTZXJ2aWNlJywgZ2V0TGFiZWxzXSxcclxuXHRcdFx0XHRcdGNhbGVuZGFyczogWydjYWxlbmRhclNlcnZpY2UnLCBnZXRDYWxlbmRhcnNdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2FkbWluJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvYWRtaW4vYWRtaW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0FkbWluQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGlzQWRtaW46IFsnYWNjZXNzU2VydmljZScsIGlzQWRtaW5dXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRyZWRpcmVjdFRvOiAnL2xvZ2luJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRDYWxlbmRhcnMoY2FsZW5kYXJTZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiBjYWxlbmRhclNlcnZpY2UuZ2V0Q2FsZW5kYXJzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0RXZlbnRzKGV2ZW50c1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIGV2ZW50c1NlcnZpY2UuZ2V0RXZlbnRzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0TGFiZWxzKGxhYmVsU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gbGFiZWxTZXJ2aWNlLmdldExhYmVscygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFRhc2tzKHRhc2tzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gdGFza3NTZXJ2aWNlLmdldFRhc2tzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKGFjY2Vzc1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIGFjY2Vzc1NlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBZG1pbihhY2Nlc3NTZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiBhY2Nlc3NTZXJ2aWNlLmlzQWRtaW4oKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2FwcFNlcnZpY2UnLCBhcHBTZXJ2aWNlKTtcclxuXHJcblx0YXBwU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnc3RhdHVzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGFwcFNlcnZpY2UoJGxvY2F0aW9uLCBzdGF0dXNTZXJ2aWNlKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyb3V0ZUNoYW5nZUVycm9yOiByb3V0ZUNoYW5nZUVycm9yXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJvdXRlQ2hhbmdlRXJyb3IoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzLCByZWplY3Rpb24pIHtcclxuXHRcdFx0aWYgKHJlamVjdGlvbiA9PT0gc3RhdHVzU2VydmljZS5VTkFVVEhPUklaRUQpIHtcclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAocmVqZWN0aW9uID09PSBzdGF0dXNTZXJ2aWNlLkZPUkJJRERFTikge1xyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZm9yYmlkZGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5maWx0ZXIoJ3NhbWVEYXlBcycsIHNhbWVEYXlBcyk7XHJcblxyXG5cdHNhbWVEYXlBcy4kaW5qZWN0ID0gWydtb21lbnQnXTtcclxuXHRmdW5jdGlvbiBzYW1lRGF5QXMobW9tZW50KSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oZXZlbnRzLCBkYXkpIHtcclxuXHRcdFx0dmFyIHNhbWVEYXlFdmVudHMgPSBbXTtcclxuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIHJlc3VsdCA9IGRheS5pc1NhbWUobW9tZW50KGV2ZW50c1tpXS5kdF9zdGFydCksICdkYXknKTtcclxuXHJcblx0XHRcdFx0aWYgKCFyZXN1bHQpIHtcclxuXHRcdFx0XHRcdHJlc3VsdCA9IGRheS5pc1NhbWUobW9tZW50KGV2ZW50c1tpXS5kdF9lbmQpLCAnZGF5Jyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZihyZXN1bHQpIHtcclxuXHRcdFx0XHRcdHNhbWVEYXlFdmVudHMucHVzaChldmVudHNbaV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHNhbWVEYXlFdmVudHM7XHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3MgdGhlIGFwaSBvZiB0aGUgdmFyaW91cyBpdGVtIHR5cGVzLlxyXG5cdCogQW4gaW5zdGFuY2Ugb2YgY3J1ZCBtdXN0IGJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gdXNlIHRoZSBzZXJ2aWNlLlxyXG5cdCpcclxuXHQqIEFsbCBwcm9taXNlcyByZXR1cm4gJ3N1Y2Nlc3MnIGFuZCBlaXRoZXIgJ2RhdGEnIG9uIHN1Y2Nlc3Mgb3IsIG9uIGVycm9yLCAndGl0bGUnXHJcblx0KiB3aXRoIGEgZ2VuZXJhbCBlcnJvciBhbmQgJ2RldGFpbHMnIHdpdGggbW9yZSBkZXRhaWxzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnY3J1ZFNlcnZpY2UnLCBjcnVkU2VydmljZSk7XHJcblxyXG5cdGNydWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBjcnVkU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIGNydWQgPSBpbml0O1xyXG5cdFx0Y3J1ZC5wcm90b3R5cGUgPSB7XHJcblx0XHRcdGdldDogZ2V0LFxyXG5cdFx0XHRnZXRXaGVyZTogZ2V0V2hlcmUsXHJcblx0XHRcdGNyZWF0ZTogY3JlYXRlLFxyXG5cdFx0XHR1cGRhdGU6IHVwZGF0ZSxcclxuXHRcdFx0cmVtb3ZlOiByZW1vdmUsXHJcblx0XHRcdHJlbW92ZVdoZXJlOiByZW1vdmVXaGVyZSxcclxuXHRcdFx0cmVtb3ZlVW5lY2Vzc2FyeUtleXM6IHJlbW92ZVVuZWNlc3NhcnlLZXlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjcnVkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBJbml0aWFsaXplIHRoZSBiYXNlIHVybCB1c2luZyB0aGUgdHlwZSBvZiBpdGVtIHRvIGJlIGNhbGxlZCBvbi5cclxuXHRcdCogQWN0aXZpdGllcyBhbmQgdGhlaXIgcGFyZW50cyBoYXZlIGEgc3BlY2lmaWMgc3ViZm9sZGVyIHRvIGJlIHBvaW50ZWQgdG8sXHJcblx0XHQqIHdoaWxlIG90aGVycyBkbyBub3QuXHJcblx0XHQqXHJcblx0XHQqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgaXRlbS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBpbml0KHR5cGUpIHtcclxuXHRcdFx0LyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xyXG5cdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLyc7XHJcblx0XHRcdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0XHRcdGNhc2UgJ2V2ZW50JzpcclxuXHRcdFx0XHRjYXNlICdjYWxlbmRhcic6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L2NhbGVuZGFyLyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsYWJlbCc6XHJcblx0XHRcdFx0Y2FzZSAndGFzayc6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L3Rhc2svJztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICcvJztcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICdNYW5hZ2VyLnBocCc7XHJcblx0XHRcdC8qIGpzaGludCBpZ25vcmU6ZW5kICovXHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBnZXQuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXQoaWQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh0aGlzLmJhc2UgKyAnP2lkPScgKyBpZCkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIFx0e3N0cmluZ31cdHdoZXJlIFx0V2hlcmUgY2xhdXNlLlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHR1c2VySURcdEZvciBhY3Rpdml0aWVzICh0YXNrcywgZXZlbnRzKSwgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0dXNlciBmb3IgdGhlIGFjdGl2aXR5LiBQYXNzIGVtcHR5IHN0cmluZ1xyXG5cdFx0Klx0XHRcdFx0XHRcdFx0XHRvdGhlcndpc2UuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRXaGVyZSh3aGVyZSwgdXNlcklEKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz91c2V3aGVyZT10cnVlJndoZXJlPScgKyBlc2NhcGUod2hlcmUpICsgJyZpZD0nICsgdXNlcklEKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIGNyZWF0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09IDEgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xyXG5cdFx0XHRkYXRhID0gdGhpcy5yZW1vdmVVbmVjZXNzYXJ5S2V5cyhkYXRhKTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh0aGlzLmJhc2UsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byB1cGRhdGUuXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gdXBkYXRlLlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGlkLCBkYXRhKSB7XHJcblx0XHRcdGRhdGEgPSB0aGlzLnJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdHJldHVybiAkaHR0cC5wdXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBkZWxldGUuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09PSAxIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSBcdHtzdHJpbmd9XHR3aGVyZSBcdFdoZXJlIGNsYXVzZS5cclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0dXNlcklEXHRGb3IgYWN0aXZpdGllcyAodGFza3MsIGV2ZW50cyksIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdHVzZXIgZm9yIHRoZSBhY3Rpdml0eS4gUGFzcyBlbXB0eSBzdHJpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0b3RoZXJ3aXNlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA+PSAwIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlV2hlcmUod2hlcmUsIHVzZXJJRCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/d2hlcmU9dHJ1ZSZpZD0nICsgdXNlcklELCB3aGVyZSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gcXVlcnlpbmcgc2VydmVyLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogSXRlbSBkYXRhIHBhc3NlZCBpbiBtYXkgc3RpbGwgaGF2ZSB0aGVpciBpZHMgb3IgYWxpYXMgZmllbGRzIChmb3IgYWN0aXZpdGllcylcclxuXHRcdCogZW1iZWRkZWQsIHdoaWNoIHdpbGwgY2FuIGNhdXNlIGVycm9ycyBpbiB0aGUgU1FMLlxyXG5cdFx0KlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfSBkYXRhXHJcblx0XHQqIEByZXR1cm5cdHttaXhlZFtdfVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpIHtcclxuXHRcdFx0dmFyIHRvRGVsZXRlID0gWydpZCcsICdwZXJzb25faWQnLCB0aGlzLnR5cGUgKyAnX2lkJywgJ2FjdGl2aXR5X2luZm9faWQnLCAncGFyZW50X25hbWUnXTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRvRGVsZXRlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGFbdG9EZWxldGVbaV1dO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFVzZWQgdG8gYWNjZXNzIHNlc3Npb24gdmFyaWFibGVzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnc2Vzc2lvblNlcnZpY2UnLCBzZXNzaW9uU2VydmljZSk7XHJcblxyXG5cdHNlc3Npb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBzZXNzaW9uU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uYmFzZSA9ICdhcGkvc2Vzc2lvbi9zZXNzaW9uVmFyTWFuYWdlci5waHA/dmFyPSc7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VmFyOiBnZXRWYXIsXHJcblx0XHRcdHNldFZhcjogc2V0VmFyXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9ICRuYW1lXHRWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9IFx0XHRQcm9taXNlIG9yIGVycm9yIG9uIGZhaWwuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0VmFyKCRuYW1lKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodm0uYmFzZSArICRuYW1lKVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ30gJG5hbWVcdFZhcmlhYmxlIG5hbWUgdG8gZ2V0IGZyb20gc2Vzc2lvbi5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ30gXHRcdFByb21pc2Ugb3IgZXJyb3Igb24gZmFpbC5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzZXRWYXIoJG5hbWUsICR2YWx1ZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh2bS5iYXNlICsgJG5hbWUsICR2YWx1ZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUZhaWxlZChlcnJvcikge1xyXG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRzdWNjZXNzOiAnZmFsc2UnLFxyXG5cdFx0XHRcdHRpdGxlOiAnRXJyb3Igd2hlbiBhY2Nlc3NpbmcgdmFyaWFibGUuJyxcclxuXHRcdFx0XHRtZXNzYWdlOiBlcnJvclxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIENvbXBhcmUgYW4gaW5wdXQgZmllbGQgdG8gYW5vdGhlciBmaWVsZCwgZGV0ZXJtaW5lZCBieSB0aGUgZGV2LlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcENvbXBhcmVUbycsIGNvbXBhcmVUbyk7XHJcblxyXG5cdGZ1bmN0aW9uIGNvbXBhcmVUbygpIHtcclxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XHJcblx0XHRcdHJlcXVpcmU6ICduZ01vZGVsJyxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHRvdGhlck1vZGVsOiAnPXNwQ29tcGFyZVRvJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRsaW5rOiBsaW5rXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG5cdFx0XHR2YXIgdW5iaW5kV2F0Y2ggPSBzY29wZS4kd2F0Y2goJ290aGVyTW9kZWwnLCB2YWxpZGF0ZU9uQ2hhbmdlKTtcclxuXHRcdFx0bmdNb2RlbC4kdmFsaWRhdG9ycy5zcENvbXBhcmVUbyA9IGNvbXBhcmVWYWx1ZXM7XHJcblx0XHRcdGVsZW1lbnQub24oJyRkZXN0cm95JywgY2xlYW5VcCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjbGVhblVwKCkge1xyXG5cdFx0XHRcdHVuYmluZFdhdGNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGNvbXBhcmVWYWx1ZXModmlld1ZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuICh2aWV3VmFsdWUgPT09IHNjb3BlLm90aGVyTW9kZWwuJHZpZXdWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIHZhbGlkYXRlT25DaGFuZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcblx0XHRcdFx0bmdNb2RlbC4kdmFsaWRhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignRXZlbnRzQ29udHJvbGxlcicsIEV2ZW50c0NvbnRyb2xsZXIpO1xyXG5cclxuXHRFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJ21vbWVudCcsICdjYWxlbmRhcldpZGdldFNlcnZpY2UnLCAnZXZlbnRzU2VydmljZScsICdldmVudE1vZGFsU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIEV2ZW50c0NvbnRyb2xsZXIobW9tZW50LCBjYWxlbmRhcldpZGdldFNlcnZpY2UsIGV2ZW50c1NlcnZpY2UsIGV2ZW50TW9kYWxTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uaXNTYW1lRGF5QXNTZWxlY3RlZCA9IGlzU2FtZURheUFzU2VsZWN0ZWQ7XHJcblx0XHR2bS5nZXRFbmRPZkRheSA9IGdldEVuZE9mRGF5O1xyXG5cdFx0dm0uc2VsZWN0RGF5ID0gc2VsZWN0RGF5O1xyXG5cdFx0dm0uc2hvd0V2ZW50TW9kYWwgPSBzaG93RXZlbnRNb2RhbDtcclxuXHJcblx0XHRhY3RpdmF0ZSgpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG5cdFx0XHR2bS50b2RheSA9IGNhbGVuZGFyV2lkZ2V0U2VydmljZS5nZXRUb2RheSgpO1xyXG5cdFx0XHR2bS5zZWxlY3RlZERheSA9IHZtLnRvZGF5O1xyXG5cdFx0XHR2bS5tb250aCA9IGNhbGVuZGFyV2lkZ2V0U2VydmljZS5nZXRNb250aCh2bS50b2RheSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0RW5kT2ZEYXkoZGF5KSB7XHJcblx0XHRcdHJldHVybiBjYWxlbmRhcldpZGdldFNlcnZpY2UuZ2V0RW5kT2ZEYXkoZGF5KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc1NhbWVEYXlBc1NlbGVjdGVkKGRheSkge1xyXG5cdFx0XHRyZXR1cm4gY2FsZW5kYXJXaWRnZXRTZXJ2aWNlLmlzU2FtZURheShkYXksIHZtLnNlbGVjdGVkRGF5KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzZWxlY3REYXkoZGF5KSB7XHJcblx0XHRcdHZtLnNlbGVjdGVkRGF5ID0gZGF5LmZ1bGxEYXRlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dFdmVudE1vZGFsKGV2ZW50KSB7XHJcblx0XHRcdGV2ZW50TW9kYWxTZXJ2aWNlLm9wZW5FdmVudE1vZGFsKGV2ZW50LCB2bS5jYWxlbmRhcnMpLnRoZW4odXBkYXRlRXZlbnRzKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVFdmVudHMocmVzcG9uc2UpIHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0uZXZlbnRzID0gcmVzcG9uc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BFdmVudHMnLCBldmVudHNEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBldmVudHNEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvZXZlbnRzL2V2ZW50cy5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0V2ZW50c0NvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXHJcblx0XHRcdHNjb3BlOiB7XHJcblx0XHRcdFx0ZXZlbnRzOiAnPScsXHJcblx0XHRcdFx0Y2FsZW5kYXJzOiAnPSdcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2V2ZW50c1NlcnZpY2UnLCBldmVudHNTZXJ2aWNlKTtcclxuXHJcblx0ZXZlbnRzU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gZXZlbnRzU2VydmljZSgkaHR0cCwgJGxvZywgY3J1ZFNlcnZpY2UsIHNlc3Npb25TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5ldmVudCA9IG5ldyBjcnVkU2VydmljZSgnZXZlbnQnKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVFdmVudDogY3JlYXRlRXZlbnQsXHJcblx0XHRcdGNyZWF0ZU9yVXBkYXRlRXZlbnQ6IGNyZWF0ZU9yVXBkYXRlRXZlbnQsXHJcblx0XHRcdGRlbGV0ZUV2ZW50OiBkZWxldGVFdmVudCxcclxuXHRcdFx0Z2V0RXZlbnRzOiBnZXRFdmVudHMsXHJcblx0XHRcdHVwZGF0ZUV2ZW50OiB1cGRhdGVFdmVudFxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVFdmVudChldmVudCkge1xyXG5cdFx0XHRyZXR1cm4gdm0uZXZlbnQuY3JlYXRlKGV2ZW50KS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVFdmVudChldmVudCkge1xyXG5cdFx0XHRpZiAoIWV2ZW50LmV2ZW50X2lkKSB7XHJcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZUV2ZW50KGV2ZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdXBkYXRlRXZlbnQoZXZlbnQuZXZlbnRfaWQsIGV2ZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBkZWxldGVFdmVudChpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0uZXZlbnQucmVtb3ZlKGlkKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0RXZlbnRzKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCdpZCcpXHJcblx0XHRcdFx0LnRoZW4oZ2V0RXZlbnRXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldEV2ZW50V2l0aFVzZXJJRChyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2Vzcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHZtLmV2ZW50LmdldFdoZXJlKCcnLCByZXMuZGF0YSkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcmVzLnRpdGxlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlRXZlbnQoaWQsIGV2ZW50KSB7XHJcblx0XHRcdHJldHVybiB2bS5ldmVudC51cGRhdGUoaWQsIGV2ZW50KS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdUYXNrc0NvbnRyb2xsZXInLCBUYXNrc0NvbnRyb2xsZXIpO1xyXG5cclxuXHRUYXNrc0NvbnRyb2xsZXIuJGluamVjdCA9IFsndGFza3NTZXJ2aWNlJywgJ3Rhc2tNb2RhbFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBUYXNrc0NvbnRyb2xsZXIodGFza3NTZXJ2aWNlLCB0YXNrTW9kYWxTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uc2hvd1Rhc2tNb2RhbCA9IHNob3dUYXNrTW9kYWw7XHJcblx0XHR2bS50b2dnbGVDb21wbGV0ZWQgPSB0b2dnbGVDb21wbGV0ZWQ7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvd1Rhc2tNb2RhbCh0YXNrKSB7XHJcblx0XHRcdHRhc2tNb2RhbFNlcnZpY2Uub3BlblRhc2tNb2RhbCh0YXNrLCB2bS5sYWJlbHMpLnRoZW4odXBkYXRlVGFza3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS50b2dnbGVDb21wbGV0ZWQodGFzaykudGhlbih1cGRhdGVUYXNrcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGFza3MocmVzcG9uc2UpIHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0udGFza3MgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFRhc2tzJywgdGFza3NEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiB0YXNrc0RpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy90YXNrcy90YXNrcy5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1Rhc2tzQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHR0YXNrczogJz0nLFxyXG5cdFx0XHRcdGxhYmVsczogJz0nLFxyXG5cdFx0XHRcdG9yZGVyOiAnPSdcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tzU2VydmljZScsIHRhc2tzU2VydmljZSk7XHJcblxyXG5cdHRhc2tzU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gdGFza3NTZXJ2aWNlKCRodHRwLCAkbG9nLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLnRhc2sgPSBuZXcgY3J1ZFNlcnZpY2UoJ3Rhc2snKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVUYXNrOiBjcmVhdGVUYXNrLFxyXG5cdFx0XHRjcmVhdGVPclVwZGF0ZVRhc2s6IGNyZWF0ZU9yVXBkYXRlVGFzayxcclxuXHRcdFx0ZGVsZXRlVGFzazogZGVsZXRlVGFzayxcclxuXHRcdFx0Z2V0VGFza3M6IGdldFRhc2tzLFxyXG5cdFx0XHR0b2dnbGVDb21wbGV0ZWQ6IHRvZ2dsZUNvbXBsZXRlZCxcclxuXHRcdFx0dXBkYXRlVGFzazogdXBkYXRlVGFza1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVUYXNrKHRhc2spIHtcclxuXHRcdFx0cmV0dXJuIHZtLnRhc2suY3JlYXRlKHRhc2spLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVRhc2sodGFzaykge1xyXG5cdFx0XHRpZiAoIXRhc2sudGFza19pZCkge1xyXG5cdFx0XHRcdHJldHVybiBjcmVhdGVUYXNrKHRhc2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB1cGRhdGVUYXNrKHRhc2sudGFza19pZCwgdGFzayk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0udGFzay5yZW1vdmUoaWQpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldFRhc2tXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFRhc2tXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0udGFzay5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2suY29tcGxldGVkID0gIXBhcnNlSW50KHRhc2suY29tcGxldGVkKTtcclxuXHRcdFx0cmV0dXJuIHVwZGF0ZVRhc2sodGFzay50YXNrX2lkLCB0YXNrKS50aGVuKGdldFRhc2tzKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVUYXNrKGlkLCB0YXNrKSB7XHJcblx0XHRcdHJldHVybiB2bS50YXNrLnVwZGF0ZShpZCwgdGFzaykudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcclxuXHJcblx0TG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJ2xvZ2luU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihsb2dpblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHR2bS5lcnJvciA9ICcnO1xyXG5cclxuXHRcdHZtLmxvZ2luID0gbG9naW47XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIExvZ2luU2VydmljZSB3aWxsIHJlZGlyZWN0IGlmIHRoZXJlIGlzIG5vIGVycm9yLiBUaHVzLCB0aGVyZSdzIG9ubHkgYVxyXG5cdFx0KiBuZWVkIHRvIHJldHVybiBhIHByb21pc2UgaWYgdGhlcmUncyBhbiBlcnJvci5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBsb2dpbigpIHtcclxuXHRcdFx0dm0ubG9hZGluZyA9IHRydWU7XHJcblx0XHRcdGxvZ2luU2VydmljZS5sb2dpbih2bS51c2VyKVxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR2bS5lcnJvciA9IHJlc3BvbnNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnbG9naW5TZXJ2aWNlJywgbG9naW5TZXJ2aWNlKTtcclxuXHJcblx0bG9naW5TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2NhdGlvbicsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gbG9naW5TZXJ2aWNlKCRodHRwLCAkbG9jYXRpb24sICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsb2dpbjogbG9naW5cclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbG9naW4odXNlcikge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnYXBpL3VzZXIvbG9naW5NYW5hZ2VyLnBocCcsIHVzZXIpXHJcblx0XHRcdFx0LnRoZW4obG9naW5Db21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gobG9naW5GYWlsZWQpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gbG9naW5Db21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YS50aXRsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9kYXNoYm9hcmQnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gbG9naW5GYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHRyZXR1cm4gJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdNb2RhbENvbnRyb2xsZXInLCBNb2RhbENvbnRyb2xsZXIpO1xyXG5cclxuXHRNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHVpYk1vZGFsSW5zdGFuY2UnLCAnZ3JvdXBzJywgJ2l0ZW0nXTtcclxuXHRmdW5jdGlvbiBNb2RhbENvbnRyb2xsZXIoJHVpYk1vZGFsSW5zdGFuY2UsIGdyb3VwcywgaXRlbSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmdyb3VwcyA9IGdyb3VwcztcclxuXHRcdHZtLml0ZW0gPSBpdGVtO1xyXG5cdFx0dm0uY2xvc2UgPSBjbG9zZTtcclxuXHRcdHZtLmNhbmNlbCA9IGNhbmNlbDtcclxuXHRcdHZtLmNvbmZpcm0gPSBjb25maXJtO1xyXG5cdFx0dm0ucmVtb3ZlID0gcmVtb3ZlO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNsb3NlKCkge1xyXG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGRhdGEpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcyhkYXRhKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjb25maXJtKGRhdGEpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZGF0YSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJywgRGFzaGJvYXJkQ29udHJvbGxlcik7XHJcblxyXG5cdERhc2hib2FyZENvbnRyb2xsZXIuJGluamVjdCA9IFsnaXNBdXRoZW50aWNhdGVkJywgJ3Rhc2tzJywgJ2V2ZW50cycsICdsYWJlbHMnLCAnY2FsZW5kYXJzJ107XHJcblx0ZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcihpc0F1dGhlbnRpY2F0ZWQsIHRhc2tzLCBldmVudHMsIGxhYmVscywgY2FsZW5kYXJzKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0udGFza3MgPSB0YXNrcztcclxuXHRcdHZtLmV2ZW50cyA9IGV2ZW50cztcclxuXHRcdHZtLmxhYmVscyA9IGxhYmVscztcclxuXHRcdHZtLmNhbGVuZGFycyA9IGNhbGVuZGFycztcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFJlZ2lzdGVyQ29udHJvbGxlcik7XHJcblxyXG5cdFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydyZWdpc3RlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIocmVnaXN0ZXJTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XHJcblx0XHRcdHZtLmxvYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRyZWdpc3RlclNlcnZpY2UucmVnaXN0ZXIodm0udXNlcilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3JlZ2lzdGVyU2VydmljZScsIHJlZ2lzdGVyU2VydmljZSk7XHJcblxyXG5cdHJlZ2lzdGVyU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJGxvZycsICdjcnVkU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZSgkbG9jYXRpb24sICRsb2csIGNydWRTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5jcnVkID0gbmV3IGNydWRTZXJ2aWNlKCd1c2VyJyk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cmVnaXN0ZXI6IHJlZ2lzdGVyXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmNydWQuY3JlYXRlKHVzZXIpXHJcblx0XHRcdFx0LnRoZW4ocmVnaXN0cmF0aW9uQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmVnaXN0cmF0aW9uQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2Uuc3VjY2VzcyA9PT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0JGxvZy5lcnJvcihyZXNwb25zZS50aXRsZSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UudGl0bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRsb2NhdGlvbi51cmwoJy9sb2dpbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdhY2Nlc3NTZXJ2aWNlJywgYWNjZXNzU2VydmljZSk7XHJcblxyXG5cdGFjY2Vzc1NlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRxJywgJ3Nlc3Npb25TZXJ2aWNlJywgJ3N0YXR1c1NlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBhY2Nlc3NTZXJ2aWNlKCRsb2NhdGlvbiwgJHEsIHNlc3Npb25TZXJ2aWNlLCBzdGF0dXNTZXJ2aWNlKSB7XHJcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGlzQXV0aGVudGljYXRlZDogaXNBdXRoZW50aWNhdGVkLFxyXG5cdFx0XHRpc0FkbWluOiBpc0FkbWluXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oaXNBdXRoZW50aWNhdGVkQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzICE9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShzdGF0dXNTZXJ2aWNlLk9LKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KHN0YXR1c1NlcnZpY2UuVU5BVVRIT1JJWkVEKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBZG1pbigpIHtcclxuXHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogU3RhdHVzIGNvZGVzIHVzZWQgd2hlbiBhY2Nlc3NpbmcgdmFyaW91cyBwYWdlcyBpbiB0aGUgYXBwLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuc2VydmljZSgnc3RhdHVzU2VydmljZScsIHN0YXR1c1NlcnZpY2UpO1xyXG5cclxuXHRmdW5jdGlvbiBzdGF0dXNTZXJ2aWNlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0T0s6IDIwMCxcclxuXHRcdFx0VU5BVVRIT1JJWkVEOiA0MDEsXHJcblx0XHRcdEZPUkJJRERFTjogNDAzXHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2NhbGVuZGFyU2VydmljZScsIGNhbGVuZGFyU2VydmljZSk7XHJcblxyXG5cdGNhbGVuZGFyU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gY2FsZW5kYXJTZXJ2aWNlKCRodHRwLCAkbG9nLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmNhbGVuZGFyID0gbmV3IGNydWRTZXJ2aWNlKCdjYWxlbmRhcicpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGNyZWF0ZUNhbGVuZGFyOiBjcmVhdGVDYWxlbmRhcixcclxuXHRcdFx0ZGVsZXRlQ2FsZW5kYXI6IGRlbGV0ZUNhbGVuZGFyLFxyXG5cdFx0XHRnZXRDYWxlbmRhcnM6IGdldENhbGVuZGFycyxcclxuXHRcdFx0dXBkYXRlQ2FsZW5kYXI6IHVwZGF0ZUNhbGVuZGFyXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUNhbGVuZGFyKGNhbGVuZGFyKSB7XHJcblx0XHRcdHJldHVybiB2bS5jYWxlbmRhci5jcmVhdGUoY2FsZW5kYXIpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBkZWxldGVDYWxlbmRhcihpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0uY2FsZW5kYXIucmVtb3ZlKGlkKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0Q2FsZW5kYXJzKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCdpZCcpXHJcblx0XHRcdFx0LnRoZW4oZ2V0Q2FsZW5kYXJXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldENhbGVuZGFyV2l0aFVzZXJJRChyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2Vzcykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHZtLmNhbGVuZGFyLmdldFdoZXJlKCdwZXJzb25faWQ9JyArIHJlcy5kYXRhLCAnJykudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcmVzLnRpdGxlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlQ2FsZW5kYXIoaWQsIGNhbGVuZGFyKSB7XHJcblx0XHRcdHJldHVybiB2bS5jYWxlbmRhci51cGRhdGUoaWQsIGNhbGVuZGFyKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdldmVudE1vZGFsU2VydmljZScsIGV2ZW50TW9kYWxTZXJ2aWNlKTtcclxuXHJcblx0ZXZlbnRNb2RhbFNlcnZpY2UuJGluamVjdCA9IFsnJHVpYk1vZGFsJywgJ2NhbGVuZGFyU2VydmljZScsICdldmVudHNTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gZXZlbnRNb2RhbFNlcnZpY2UoJHVpYk1vZGFsLCBjYWxlbmRhclNlcnZpY2UsIGV2ZW50c1NlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRvcGVuRXZlbnRNb2RhbDogb3BlbkV2ZW50TW9kYWxcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gb3BlbkV2ZW50TW9kYWwoZXZlbnQsIGNhbGVuZGFycykge1xyXG5cdFx0XHRyZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvZXZlbnRzL21vZGFsL2V2ZW50Lm1vZGFsLmh0bWwnLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGdyb3VwczogZnVuY3Rpb24oKSB7IHJldHVybiBjYWxlbmRhcnM7IH0sXHJcblx0XHRcdFx0XHRpdGVtOiBldmVudFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkucmVzdWx0XHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiBldmVudHNTZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlRXZlbnQocmVzcG9uc2UpXHJcblx0XHRcdFx0XHRcdC50aGVuKGV2ZW50c1NlcnZpY2UuZ2V0RXZlbnRzKTtcclxuXHRcdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNwb25zZSAhPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGV2ZW50c1NlcnZpY2UuZGVsZXRlRXZlbnQocmVzcG9uc2UpXHJcblx0XHRcdFx0XHRcdFx0LnRoZW4oZXZlbnRzU2VydmljZS5nZXRFdmVudHMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2NhbGVuZGFyV2lkZ2V0U2VydmljZScsIGNhbGVuZGFyV2lkZ2V0U2VydmljZSk7XHJcblxyXG5cdGNhbGVuZGFyV2lkZ2V0U2VydmljZS4kaW5qZWN0ID0gWydtb21lbnQnXTtcclxuXHRmdW5jdGlvbiBjYWxlbmRhcldpZGdldFNlcnZpY2UobW9tZW50KSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXRFbmRPZkRheTogZ2V0RW5kT2ZEYXksXHJcblx0XHRcdGdldE1vbnRoOiBnZXRNb250aCxcclxuXHRcdFx0Z2V0VG9kYXk6IGdldFRvZGF5LFxyXG5cdFx0XHRnZXRXZWVrOiBnZXRXZWVrLFxyXG5cdFx0XHRpc1NhbWVEYXk6IGlzU2FtZURheVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRFbmRPZkRheShkYXkpIHtcclxuXHRcdFx0cmV0dXJuIGRheS5jbG9uZSgpLmFkZCgxLCAnZGF5Jykuc3VidHJhY3QoMSwgJ21zJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSB7TW9tZW50IE9iamVjdH0gYURheSBEYXkgdG8gYnVpbGQgbW9udGggYXJvdW5kLlxyXG5cdFx0KiBAcmV0dXJuIHtNb21lbnQgT2JqZWN0W11bXX1cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRNb250aChhRGF5KSB7XHJcblx0XHRcdHZhciBtb250aCA9IFtdO1xyXG5cdFx0XHR2YXIgZGF5ID0gYURheS5jbG9uZSgpLmRhdGUoMSkuc3RhcnRPZignd2VlaycpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gYURheS5tb250aCgpOyBpID09PSBhRGF5Lm1vbnRoKCk7IGkgPSBkYXkubW9udGgoKSkge1xyXG5cdFx0XHRcdG1vbnRoLnB1c2goZ2V0V2VlayhkYXksIGFEYXkubW9udGgoKSkpO1xyXG5cdFx0XHRcdGRheSA9IGRheS5hZGQoMSwgJ3dlZWtzJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG1vbnRoO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFRvZGF5KCkge1xyXG5cdFx0XHRyZXR1cm4gbW9tZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSB7TW9tZW50IE9iamVjdH1cdHN0YXJ0RGF5XHRTdGFydGluZyBkYXkgb2YgYSB3ZWVrLlxyXG5cdFx0KiBAcGFyYW0ge2ludH1cdFx0XHRcdHRhcmdldE1vbnRoXHRNb250aCBudW1iZXIgYmVpbmcgYnVpbHQuXHJcblx0XHQqXHJcblx0XHQqIEByZXR1cm4ge01vbWVudCBPYmplY3RbXX1cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRXZWVrKHN0YXJ0RGF5LCB0YXJnZXRNb250aCkge1xyXG5cdFx0XHR2YXIgd2VlayA9IFtdO1xyXG5cclxuXHRcdFx0dmFyIGRheSA9IHN0YXJ0RGF5LmNsb25lKCk7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcblx0XHRcdFx0d2Vlay5wdXNoKHtcclxuXHRcdFx0XHRcdG51bWJlcjogZGF5LmRhdGUoKSxcclxuXHRcdFx0XHRcdGlzVGFyZ2V0TW9udGg6IChkYXkubW9udGgoKSA9PT0gdGFyZ2V0TW9udGgpLFxyXG5cdFx0XHRcdFx0aXNUb2RheTogZGF5LmlzU2FtZShtb21lbnQoKSwgJ2RheScpLFxyXG5cdFx0XHRcdFx0ZnVsbERhdGU6IGRheVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGRheSA9IGRheS5jbG9uZSgpLmFkZCgxLCAnZGF5cycpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gd2VlaztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIHtNb21lbnQgT2JqZWN0fVx0ZGF5MVxyXG5cdFx0KiBAcGFyYW0ge01vbWVudCBPYmplY3R9XHRkYXkyXHJcblx0XHQqXHJcblx0XHQqIEByZXR1cm4ge2Jvb2x9XHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gaXNTYW1lRGF5KGRheTEsIGRheTIpIHtcclxuXHRcdFx0cmV0dXJuIGRheTEuaXNTYW1lKGRheTIsICdkYXknKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdsYWJlbFNlcnZpY2UnLCBsYWJlbFNlcnZpY2UpO1xyXG5cclxuXHRsYWJlbFNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZycsICdjcnVkU2VydmljZScsICdzZXNzaW9uU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGxhYmVsU2VydmljZSgkaHR0cCwgJGxvZywgY3J1ZFNlcnZpY2UsIHNlc3Npb25TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5sYWJlbCA9IG5ldyBjcnVkU2VydmljZSgnbGFiZWwnKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVMYWJlbDogY3JlYXRlTGFiZWwsXHJcblx0XHRcdGRlbGV0ZUxhYmVsOiBkZWxldGVMYWJlbCxcclxuXHRcdFx0Z2V0TGFiZWxzOiBnZXRMYWJlbHMsXHJcblx0XHRcdHVwZGF0ZUxhYmVsOiB1cGRhdGVMYWJlbFxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVMYWJlbChsYWJlbCkge1xyXG5cdFx0XHRyZXR1cm4gdm0ubGFiZWwuY3JlYXRlKGxhYmVsKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlTGFiZWwoaWQpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmxhYmVsLnJlbW92ZShpZCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldExhYmVscygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldExhYmVsV2l0aFVzZXJJRCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnZXRMYWJlbFdpdGhVc2VySUQocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiB2bS5sYWJlbC5nZXRXaGVyZSgncGVyc29uX2lkPScgKyByZXMuZGF0YSwgJycpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUxhYmVsKGlkLCBsYWJlbCkge1xyXG5cdFx0XHRyZXR1cm4gdm0ubGFiZWwudXBkYXRlKGlkLCBsYWJlbCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgndGFza01vZGFsU2VydmljZScsIHRhc2tNb2RhbFNlcnZpY2UpO1xyXG5cclxuXHR0YXNrTW9kYWxTZXJ2aWNlLiRpbmplY3QgPSBbJyR1aWJNb2RhbCcsICdsYWJlbFNlcnZpY2UnLCAndGFza3NTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gdGFza01vZGFsU2VydmljZSgkdWliTW9kYWwsIGxhYmVsU2VydmljZSwgdGFza3NTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0b3BlblRhc2tNb2RhbDogb3BlblRhc2tNb2RhbFxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBvcGVuVGFza01vZGFsKHRhc2ssIGxhYmVscykge1xyXG5cdFx0XHRyZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdGFza3MvbW9kYWwvdGFzay5tb2RhbC5odG1sJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRncm91cHM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGFiZWxzOyB9LFxyXG5cdFx0XHRcdFx0aXRlbTogdGFza1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkucmVzdWx0XHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0YXNrc1NlcnZpY2UuY3JlYXRlT3JVcGRhdGVUYXNrKHJlc3BvbnNlKVxyXG5cdFx0XHRcdFx0XHQudGhlbih0YXNrc1NlcnZpY2UuZ2V0VGFza3MpO1xyXG5cdFx0XHRcdH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGFza3NTZXJ2aWNlLmRlbGV0ZVRhc2socmVzcG9uc2UpXHJcblx0XHRcdFx0XHRcdFx0LnRoZW4odGFza3NTZXJ2aWNlLmdldFRhc2tzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XHJcblxyXG5cdEhlYWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ2hlYWRlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRzY29wZSwgaGVhZGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLm5hbWUgPSAnJztcclxuXHRcdHZtLnVybCA9ICcnO1xyXG5cclxuXHRcdGhlYWRlclNlcnZpY2UuZ2V0VXNlcigpXHJcblx0XHRcdC50aGVuKGdldFVzZXJDb21wbGV0ZSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlckNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdCRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZtLm5hbWUgPSAocmVzcG9uc2UubmFtZSA9PT0gZmFsc2UpID8gJ0xvZ2luJyA6IHJlc3BvbnNlLm5hbWU7XHJcblx0XHRcdFx0dm0udXJsID0gcmVzcG9uc2UudXJsO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BIZWFkZXInLCBoZWFkZXJEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBoZWFkZXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9oZWFkZXIvaGVhZGVyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnaGVhZGVyU2VydmljZScsIGhlYWRlclNlcnZpY2UpO1xyXG5cclxuXHRoZWFkZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBoZWFkZXJTZXJ2aWNlKCRodHRwLCAkbG9nLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihnZXROYW1lQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0TmFtZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblxyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2VzcyA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiB7bmFtZTogZmFsc2UsIHVybDogJyMvbG9naW4nfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHtuYW1lOiByZXMuZGF0YSwgdXJsOiAnIy9kYXNoYm9hcmQnfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJywgU2lkZWJhckNvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBTaWRlYmFyQ29udHJvbGxlcigpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0dm0uY29sbGFwc2VkID0gdHJ1ZTtcclxuXHJcblx0XHR2bS50b2dnbGVTaWRlYmFyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZtLmNvbGxhcHNlZCA9ICF2bS5jb2xsYXBzZWQ7XHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFNpZGViYXInLCBzaWRlYmFyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gc2lkZWJhckRpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGxpbms6IGxpbmssXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvbGF5b3V0L3NpZGViYXIvc2lkZWJhci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1NpZGViYXJDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcblx0XHRcdHNjb3BlLiR3YXRjaChhdHRycy5zaWRlYmFyRGlyZWN0aXZlLCB0b2dnbGVTaWRlYmFyKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoY29sbGFwc2VkKSB7XHJcblx0XHRcdFx0aWYgKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
