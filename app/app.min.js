!function(){"use strict";function e(e,t){e.$on("$routeChangeError",t.routeChangeError)}angular.module("app",["ngRoute","ui.bootstrap"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function t(e){return e.isAuthenticated()}function r(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",t]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",r]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function r(r,n,o,a){a===t.UNAUTHORIZED?e.path("/login"):a===t.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:r}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e,t){function r(e){switch(this.type=e,this.base="api/",e){case"event":case"calendar":this.base+="activity/calendar/";break;case"label":case"task":this.base+="activity/task/";break;default:this.base+=e+"/"}this.base+=e+"Manager.php"}function n(t){return e.get(this.base+"?id="+t).then(l)["catch"](u)}function o(t,r){return e.get(this.base+"?where=true&id="+r,t).then(l)["catch"](u)}function a(t){return t=this.removeUnecessaryKeys(t),e.post(this.base,t).then(l)["catch"](u)}function i(t,r){return r=this.removeUnecessaryKeys(r),e.put(this.base+"?id="+t,r).then(l)["catch"](u)}function s(t){return e["delete"](this.base+"?id="+t).then(l)["catch"](u)}function c(t,r){return e["delete"](this.base+"?where=true&id="+r,t).then(l)["catch"](u)}function l(e){return e}function u(e){return t.error(e),{success:"false",title:"Error when querying server.",message:e}}function d(e){for(var t=["id","person_id",this.type+"_id","activity_info_id","parent_name"],r=0;r<t.length;r++)delete e[t[r]];return e}var f=r;return f.prototype={get:n,getWhere:o,create:a,update:i,remove:s,removeWhere:c,removeUnecessaryKeys:d},f}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function r(t){return e.get(i.base+t).then(o)["catch"](a)}function n(t,r){return e.post(i.base+t,r).then(o)["catch"](a)}function o(e){return e}function a(e){return t.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:r,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,r,n){function o(){s()}function a(t){return t===e.otherModel.$viewValue}function i(e,t){n.$validate()}var s=e.$watch("otherModel",i);n.$validators.spCompareTo=a,t.on("$destroy",o)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.login(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.loading=!1,r.error="",r.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r){function n(n){function o(e){return e.data.success===!1?e.data.title:void t.path("/dashboard")}function a(e){return r.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",n).then(o)["catch"](a)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e,t){function r(){e.close()}function n(){e.dismiss("cancel")}function o(t){e.dismiss(t)}function a(t){e.close(t)}var i=this;i.item=t,i.close=r,i.cancel=n,i.confirm=a,i.remove=o}angular.module("app").controller("ModalController",e),e.$inject=["$uibModalInstance","item"]}(),function(){"use strict";function e(e){function t(){e.getTasks().then(n)}function r(t){e.openTaskModal(t).then(n)}function n(e){e&&(o.tasks=e)}var o=this;o.tasks={},o.showTaskDialog=r,t()}angular.module("app").controller("TasksController",e),e.$inject=["tasksService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,t,r,n,o){function a(e){return e.task_id?u.task.update(e.task_id,e).then(l):u.task.create(e).then(l)}function i(e){return u.task.remove(e.task_id).then(l)}function s(){function e(e){var t=e.data;return t.success?u.task.getWhere("",t.data).then(l):t.title}return o.getVar("id").then(e)}function c(e){return angular.isString(e.due)&&(e.due=new Date(e.due.replace(/(.+) (.+)/,"$1T$2Z"))),angular.isString(e.reminder)&&(e.reminder=new Date(e.reminder.replace(/(.+) (.+)/,"$1T$2Z"))),r.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/tasks/modal/task.modal.html",resolve:{item:e}}).result.then(function(e){return a(e).then(s)},function(e){return e.task_id?i(e).then(s):void 0})}function l(e){var t=e.data;return t.success?t.data:t.title}var u=this;return u.task=new n("task"),{createOrUpdateTask:a,deleteTask:i,getTasks:s,openTaskModal:c}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log","$uibModal","crudService","sessionService"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.register(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.error="",r.loading=!1,r.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t,r){function n(r){function n(r){return"false"===r.success?(t.error(r.title),r.title):void e.url("/login")}return o.crud.create(r).then(n)}var o=this;return o.crud=new r("user"),{register:n}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e,t,r,n){function o(){function e(e){return e.data.success!==!1?i.resolve(n.OK):i.reject(n.UNAUTHORIZED),i.promise}return r.getVar("name").then(e)}function a(){}var i=t.defer();return{isAuthenticated:o,isAdmin:a}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,t){function r(t){e.$evalAsync(function(){n.name=t.name===!1?"Login":t.name,n.url=t.url})}var n=this;n.name="",n.url="",t.getUser().then(r)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,t,r){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t,r){function n(){function e(e){var t=e.data;return t.success===!1?{name:!1,url:"#/login"}:{name:t.data,url:"#/dashboard"}}return r.getVar("name").then(e)}return{getUser:n}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,r){function n(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(r.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImNvbmZpZyIsIiRsb2NhdGlvbiIsInN0YXR1c1NlcnZpY2UiLCJldmVudCIsImN1cnJlbnQiLCJwcmV2aW91cyIsInJlamVjdGlvbiIsIlVOQVVUSE9SSVpFRCIsInBhdGgiLCJGT1JCSURERU4iLCJmYWN0b3J5IiwiY3J1ZFNlcnZpY2UiLCIkaHR0cCIsIiRsb2ciLCJpbml0IiwidHlwZSIsInRoaXMiLCJiYXNlIiwiZ2V0IiwiaWQiLCJ0aGVuIiwicHJvbWlzZUNvbXBsZXRlIiwicHJvbWlzZUZhaWxlZCIsImdldFdoZXJlIiwid2hlcmUiLCJ1c2VySUQiLCJjcmVhdGUiLCJkYXRhIiwicmVtb3ZlVW5lY2Vzc2FyeUtleXMiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicmVtb3ZlIiwicmVtb3ZlV2hlcmUiLCJyZXNwb25zZSIsImVycm9yIiwic3VjY2VzcyIsInRpdGxlIiwibWVzc2FnZSIsInRvRGVsZXRlIiwiaSIsImxlbmd0aCIsImNydWQiLCJwcm90b3R5cGUiLCJzZXNzaW9uU2VydmljZSIsImdldFZhciIsIiRuYW1lIiwidm0iLCJzZXRWYXIiLCIkdmFsdWUiLCJjb21wYXJlVG8iLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwiY2xlYW5VcCIsInVuYmluZFdhdGNoIiwiY29tcGFyZVZhbHVlcyIsInZpZXdWYWx1ZSIsIm90aGVyTW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsaWRhdGVPbkNoYW5nZSIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCIkdmFsaWRhdGUiLCIkd2F0Y2giLCIkdmFsaWRhdG9ycyIsInNwQ29tcGFyZVRvIiwib24iLCJkaXJlY3RpdmUiLCJyZXF1aXJlIiwiTG9naW5Db250cm9sbGVyIiwibG9naW5TZXJ2aWNlIiwibG9naW4iLCJsb2FkaW5nIiwidXNlciIsImxvZ2luQ29tcGxldGUiLCJsb2dpbkZhaWxlZCIsIk1vZGFsQ29udHJvbGxlciIsIiR1aWJNb2RhbEluc3RhbmNlIiwiaXRlbSIsImNsb3NlIiwiY2FuY2VsIiwiZGlzbWlzcyIsImNvbmZpcm0iLCJUYXNrc0NvbnRyb2xsZXIiLCJ0YXNrc1NlcnZpY2UiLCJhY3RpdmF0ZSIsImdldFRhc2tzIiwidXBkYXRlVGFza3MiLCJzaG93VGFza0RpYWxvZyIsInRhc2siLCJvcGVuVGFza01vZGFsIiwidGFza3MiLCJ0YXNrc0RpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCIkdWliTW9kYWwiLCJjcmVhdGVPclVwZGF0ZVRhc2siLCJ0YXNrX2lkIiwiZGVsZXRlVGFzayIsImdldFRhc2tXaXRoVXNlcklEIiwicmVzIiwiaXNTdHJpbmciLCJkdWUiLCJEYXRlIiwicmVwbGFjZSIsInJlbWluZGVyIiwib3BlbiIsInJlc3VsdCIsIkRhc2hib2FyZENvbnRyb2xsZXIiLCJSZWdpc3RlckNvbnRyb2xsZXIiLCJyZWdpc3RlclNlcnZpY2UiLCJyZWdpc3RlciIsInJlZ2lzdHJhdGlvbkNvbXBsZXRlIiwidXJsIiwiJHEiLCJpc0F1dGhlbnRpY2F0ZWRDb21wbGV0ZSIsImRlZmVycmVkIiwiT0siLCJyZWplY3QiLCJwcm9taXNlIiwiZGVmZXIiLCJzZXJ2aWNlIiwiSGVhZGVyQ29udHJvbGxlciIsIiRzY29wZSIsImhlYWRlclNlcnZpY2UiLCJnZXRVc2VyQ29tcGxldGUiLCIkZXZhbEFzeW5jIiwibmFtZSIsImdldFVzZXIiLCJoZWFkZXJEaXJlY3RpdmUiLCJnZXROYW1lQ29tcGxldGUiLCJTaWRlYmFyQ29udHJvbGxlciIsImNvbGxhcHNlZCIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyRGlyZWN0aXZlIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQyxZQU9BLFNBQVNBLEdBQWNDLEVBQVlDLEdBQ2xDRCxFQUFXRSxJQUFJLG9CQUFxQkQsRUFBV0Usa0JBTmhEQyxRQUNFQyxPQUFPLE9BQVEsVUFBVyxpQkFDMUJDLFdBQVcsZ0JBQWlCUCxHQUU5QkEsRUFBY1EsU0FBVyxhQUFjLGlCQUt4QyxXQUNDLFlBT0EsU0FBU0MsR0FBVUMsR0FxQ2xCLFFBQVNDLEdBQWdCQyxHQUN4QixNQUFPQSxHQUFjRCxrQkFHdEIsUUFBU0UsR0FBUUQsR0FDaEIsTUFBT0EsR0FBY0MsVUF6Q3RCSCxFQUNFSSxLQUFLLFVBQ0xDLFlBQWEsMkJBQ2JSLFdBQVksa0JBQ1pTLGFBQWMsT0FFZEYsS0FBSyxXQUNMQyxZQUFhLDZCQUNiUixXQUFZLG1CQUNaUyxhQUFjLE9BRWRGLEtBQUssYUFDTEMsWUFBYSwrQkFDYlIsV0FBWSxxQkFDWlMsYUFBYyxPQUVkRixLQUFLLGNBQ0xDLFlBQWEsaUNBQ2JSLFdBQVksc0JBQ1pTLGFBQWMsS0FDZEMsU0FDQ04saUJBQWtCLGdCQUFpQkEsTUFHcENHLEtBQUssVUFDTEMsWUFBYSx5QkFDYlIsV0FBWSxrQkFDWlMsYUFBYyxLQUNkQyxTQUNDSixTQUFVLGdCQUFpQkEsTUFHNUJLLFdBQ0FDLFdBQVksV0F2Q2ZkLFFBQ0VDLE9BQU8sT0FDUGMsT0FBT1gsR0FFVEEsRUFBVUQsU0FBVyxxQkErQ3RCLFdBQ0MsWUFPQSxTQUFTTixHQUFXbUIsRUFBV0MsR0FLOUIsUUFBU2xCLEdBQWlCbUIsRUFBT0MsRUFBU0MsRUFBVUMsR0FDL0NBLElBQWNKLEVBQWNLLGFBQy9CTixFQUFVTyxLQUFLLFVBQ0xGLElBQWNKLEVBQWNPLFdBQ3RDUixFQUFVTyxLQUFLLGNBUmpCLE9BQ0N4QixpQkFBa0JBLEdBUHBCQyxR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bEcsR0FDeEIsR0FBSW9FLEdBQU1wRSxFQUFTUCxJQUVuQixPQUFJMkUsR0FBSWxFLFdBQVksR0FDWDZGLE1BQU0sRUFBT2QsSUFBSyxZQUVuQmMsS0FBTTNCLEVBQUkzRSxLQUFNd0YsSUFBSyxlQVQ5QixNQUFPdkUsR0FBZUMsT0FBTyxRQUMzQnpCLEtBQUtnSCxHQU5SLE9BQ0NGLFFBQVNBLEdBUFhqSixRQUNFQyxPQUFPLE9BQ1B3QixRQUFRLGdCQUFpQm9ILEdBRTNCQSxFQUFjMUksU0FBVyxRQUFTLE9BQVEscUJBc0IzQyxXQUNDLFlBTUEsU0FBU2lKLEtBQ1IsR0FBSXRGLEdBQUsvQixJQUVUK0IsR0FBR3VGLFdBQVksRUFFZnZGLEVBQUd3RixjQUFnQixXQUNsQnhGLEVBQUd1RixXQUFhdkYsRUFBR3VGLFdBVnJCckosUUFDRUMsT0FBTyxPQUNQQyxXQUFXLG9CQUFxQmtKLE1BWW5DLFdBQ0MsWUFNQSxTQUFTRyxLQVNSLFFBQVNyRixHQUFLQyxFQUFPQyxFQUFTQyxHQUc3QixRQUFTaUYsR0FBY0QsR0FDbEJBLEVBQ0hqRixFQUFRb0YsWUFBWSxhQUVwQnBGLEVBQVFxRixTQUFTLGFBTm5CdEYsRUFBTWMsT0FBT1osRUFBTWtGLGlCQUFrQkQsR0FUdEMsT0FDQ3BGLEtBQU1BLEVBQ054RCxZQUFhLG9DQUNiUixXQUFZLG9CQUNaUyxhQUFjLEtBQ2RvRyxrQkFBa0IsR0FWcEIvRyxRQUNFQyxPQUFPLE9BQ1BvRixVQUFVLFlBQWFrRSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJywgJ3VpLmJvb3RzdHJhcCddKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0FwcENvbnRyb2xsZXInLCBBcHBDb250cm9sbGVyKTtcclxuXHJcblx0QXBwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJ2FwcFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBBcHBDb250cm9sbGVyKCRyb290U2NvcGUsIGFwcFNlcnZpY2UpIHtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VFcnJvcicsIGFwcFNlcnZpY2Uucm91dGVDaGFuZ2VFcnJvcik7XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb25maWcoYXBwQ29uZmlnKTtcclxuXHJcblx0YXBwQ29uZmlnLiRpbmplY3QgPSBbJyRyb3V0ZVByb3ZpZGVyJ107XHJcblx0ZnVuY3Rpb24gYXBwQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcblx0XHQkcm91dGVQcm92aWRlclxyXG5cdFx0XHQud2hlbignL2xvZ2luJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9sb2dpbi9sb2dpbi5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvbG9nb3V0Jywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9sb2dvdXQvbG9nb3V0Lmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdMb2dvdXRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9yZWdpc3RlcicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2Rhc2hib2FyZCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2Rhc2hib2FyZC9kYXNoYm9hcmQuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRpc0F1dGhlbnRpY2F0ZWQ6IFsnYWNjZXNzU2VydmljZScsIGlzQXV0aGVudGljYXRlZF1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvYWRtaW4nLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9hZG1pbi9hZG1pbi5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnQWRtaW5Db250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdFx0aXNBZG1pbjogWydhY2Nlc3NTZXJ2aWNlJywgaXNBZG1pbl1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC5vdGhlcndpc2Uoe1xyXG5cdFx0XHRcdHJlZGlyZWN0VG86ICcvbG9naW4nXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChhY2Nlc3NTZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiBhY2Nlc3NTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQWRtaW4oYWNjZXNzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gYWNjZXNzU2VydmljZS5pc0FkbWluKCk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdhcHBTZXJ2aWNlJywgYXBwU2VydmljZSk7XHJcblxyXG5cdGFwcFNlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJ3N0YXR1c1NlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBhcHBTZXJ2aWNlKCRsb2NhdGlvbiwgc3RhdHVzU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cm91dGVDaGFuZ2VFcnJvcjogcm91dGVDaGFuZ2VFcnJvclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByb3V0ZUNoYW5nZUVycm9yKGV2ZW50LCBjdXJyZW50LCBwcmV2aW91cywgcmVqZWN0aW9uKSB7XHJcblx0XHRcdGlmIChyZWplY3Rpb24gPT09IHN0YXR1c1NlcnZpY2UuVU5BVVRIT1JJWkVEKSB7XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHJlamVjdGlvbiA9PT0gc3RhdHVzU2VydmljZS5GT1JCSURERU4pIHtcclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2ZvcmJpZGRlbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3MgdGhlIGFwaSBvZiB0aGUgdmFyaW91cyBpdGVtIHR5cGVzLlxyXG5cdCogQW4gaW5zdGFuY2Ugb2YgY3J1ZCBtdXN0IGJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gdXNlIHRoZSBzZXJ2aWNlLlxyXG5cdCpcclxuXHQqIEFsbCBwcm9taXNlcyByZXR1cm4gJ3N1Y2Nlc3MnIGFuZCBlaXRoZXIgJ2RhdGEnIG9uIHN1Y2Nlc3Mgb3IsIG9uIGVycm9yLCAndGl0bGUnXHJcblx0KiB3aXRoIGEgZ2VuZXJhbCBlcnJvciBhbmQgJ2RldGFpbHMnIHdpdGggbW9yZSBkZXRhaWxzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnY3J1ZFNlcnZpY2UnLCBjcnVkU2VydmljZSk7XHJcblxyXG5cdGNydWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBjcnVkU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIGNydWQgPSBpbml0O1xyXG5cdFx0Y3J1ZC5wcm90b3R5cGUgPSB7XHJcblx0XHRcdGdldDogZ2V0LFxyXG5cdFx0XHRnZXRXaGVyZTogZ2V0V2hlcmUsXHJcblx0XHRcdGNyZWF0ZTogY3JlYXRlLFxyXG5cdFx0XHR1cGRhdGU6IHVwZGF0ZSxcclxuXHRcdFx0cmVtb3ZlOiByZW1vdmUsXHJcblx0XHRcdHJlbW92ZVdoZXJlOiByZW1vdmVXaGVyZSxcclxuXHRcdFx0cmVtb3ZlVW5lY2Vzc2FyeUtleXM6IHJlbW92ZVVuZWNlc3NhcnlLZXlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjcnVkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBJbml0aWFsaXplIHRoZSBiYXNlIHVybCB1c2luZyB0aGUgdHlwZSBvZiBpdGVtIHRvIGJlIGNhbGxlZCBvbi5cclxuXHRcdCogQWN0aXZpdGllcyBhbmQgdGhlaXIgcGFyZW50cyBoYXZlIGEgc3BlY2lmaWMgc3ViZm9sZGVyIHRvIGJlIHBvaW50ZWQgdG8sXHJcblx0XHQqIHdoaWxlIG90aGVycyBkbyBub3QuXHJcblx0XHQqXHJcblx0XHQqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgaXRlbS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBpbml0KHR5cGUpIHtcclxuXHRcdFx0LyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xyXG5cdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLyc7XHJcblx0XHRcdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0XHRcdGNhc2UgJ2V2ZW50JzpcclxuXHRcdFx0XHRjYXNlICdjYWxlbmRhcic6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L2NhbGVuZGFyLyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsYWJlbCc6XHJcblx0XHRcdFx0Y2FzZSAndGFzayc6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L3Rhc2svJztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICcvJztcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICdNYW5hZ2VyLnBocCc7XHJcblx0XHRcdC8qIGpzaGludCBpZ25vcmU6ZW5kICovXHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBnZXQuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXQoaWQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh0aGlzLmJhc2UgKyAnP2lkPScgKyBpZCkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIFx0e3N0cmluZ31cdHdoZXJlIFx0V2hlcmUgY2xhdXNlLlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHR1c2VySURcdEZvciBhY3Rpdml0aWVzICh0YXNrcywgZXZlbnRzKSwgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0dXNlciBmb3IgdGhlIGFjdGl2aXR5LiBQYXNzIGVtcHR5IHN0cmluZ1xyXG5cdFx0Klx0XHRcdFx0XHRcdFx0XHRvdGhlcndpc2UuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRXaGVyZSh3aGVyZSwgdXNlcklEKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz93aGVyZT10cnVlJmlkPScgKyB1c2VySUQsIHdoZXJlKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIGNyZWF0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09IDEgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xyXG5cdFx0XHRkYXRhID0gdGhpcy5yZW1vdmVVbmVjZXNzYXJ5S2V5cyhkYXRhKTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh0aGlzLmJhc2UsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byB1cGRhdGUuXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gdXBkYXRlLlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGlkLCBkYXRhKSB7XHJcblx0XHRcdGRhdGEgPSB0aGlzLnJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdHJldHVybiAkaHR0cC5wdXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBkZWxldGUuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09PSAxIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSBcdHtzdHJpbmd9XHR3aGVyZSBcdFdoZXJlIGNsYXVzZS5cclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0dXNlcklEXHRGb3IgYWN0aXZpdGllcyAodGFza3MsIGV2ZW50cyksIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdHVzZXIgZm9yIHRoZSBhY3Rpdml0eS4gUGFzcyBlbXB0eSBzdHJpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0b3RoZXJ3aXNlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA+PSAwIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlV2hlcmUod2hlcmUsIHVzZXJJRCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/d2hlcmU9dHJ1ZSZpZD0nICsgdXNlcklELCB3aGVyZSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gcXVlcnlpbmcgc2VydmVyLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogSXRlbSBkYXRhIHBhc3NlZCBpbiBtYXkgc3RpbGwgaGF2ZSB0aGVpciBpZHMgb3IgYWxpYXMgZmllbGRzIChmb3IgYWN0aXZpdGllcylcclxuXHRcdCogZW1iZWRkZWQsIHdoaWNoIHdpbGwgY2FuIGNhdXNlIGVycm9ycyBpbiB0aGUgU1FMLlxyXG5cdFx0KlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfSBkYXRhXHJcblx0XHQqIEByZXR1cm5cdHttaXhlZFtdfVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpIHtcclxuXHRcdFx0dmFyIHRvRGVsZXRlID0gWydpZCcsICdwZXJzb25faWQnLCB0aGlzLnR5cGUgKyAnX2lkJywgJ2FjdGl2aXR5X2luZm9faWQnLCAncGFyZW50X25hbWUnXTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRvRGVsZXRlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGFbdG9EZWxldGVbaV1dO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFVzZWQgdG8gYWNjZXNzIHNlc3Npb24gdmFyaWFibGVzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnc2Vzc2lvblNlcnZpY2UnLCBzZXNzaW9uU2VydmljZSk7XHJcblxyXG5cdHNlc3Npb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBzZXNzaW9uU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uYmFzZSA9ICdhcGkvc2Vzc2lvbi9zZXNzaW9uVmFyTWFuYWdlci5waHA/dmFyPSc7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VmFyOiBnZXRWYXIsXHJcblx0XHRcdHNldFZhcjogc2V0VmFyXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9ICRuYW1lXHRWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9IFx0XHRQcm9taXNlIG9yIGVycm9yIG9uIGZhaWwuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0VmFyKCRuYW1lKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodm0uYmFzZSArICRuYW1lKVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ30gJG5hbWVcdFZhcmlhYmxlIG5hbWUgdG8gZ2V0IGZyb20gc2Vzc2lvbi5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ30gXHRcdFByb21pc2Ugb3IgZXJyb3Igb24gZmFpbC5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzZXRWYXIoJG5hbWUsICR2YWx1ZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh2bS5iYXNlICsgJG5hbWUsICR2YWx1ZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUZhaWxlZChlcnJvcikge1xyXG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRzdWNjZXNzOiAnZmFsc2UnLFxyXG5cdFx0XHRcdHRpdGxlOiAnRXJyb3Igd2hlbiBhY2Nlc3NpbmcgdmFyaWFibGUuJyxcclxuXHRcdFx0XHRtZXNzYWdlOiBlcnJvclxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIENvbXBhcmUgYW4gaW5wdXQgZmllbGQgdG8gYW5vdGhlciBmaWVsZCwgZGV0ZXJtaW5lZCBieSB0aGUgZGV2LlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcENvbXBhcmVUbycsIGNvbXBhcmVUbyk7XHJcblxyXG5cdGZ1bmN0aW9uIGNvbXBhcmVUbygpIHtcclxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XHJcblx0XHRcdHJlcXVpcmU6ICduZ01vZGVsJyxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHRvdGhlck1vZGVsOiAnPXNwQ29tcGFyZVRvJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRsaW5rOiBsaW5rXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG5cdFx0XHR2YXIgdW5iaW5kV2F0Y2ggPSBzY29wZS4kd2F0Y2goJ290aGVyTW9kZWwnLCB2YWxpZGF0ZU9uQ2hhbmdlKTtcclxuXHRcdFx0bmdNb2RlbC4kdmFsaWRhdG9ycy5zcENvbXBhcmVUbyA9IGNvbXBhcmVWYWx1ZXM7XHJcblx0XHRcdGVsZW1lbnQub24oJyRkZXN0cm95JywgY2xlYW5VcCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjbGVhblVwKCkge1xyXG5cdFx0XHRcdHVuYmluZFdhdGNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGNvbXBhcmVWYWx1ZXModmlld1ZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuICh2aWV3VmFsdWUgPT09IHNjb3BlLm90aGVyTW9kZWwuJHZpZXdWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIHZhbGlkYXRlT25DaGFuZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcblx0XHRcdFx0bmdNb2RlbC4kdmFsaWRhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcclxuXHJcblx0TG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJ2xvZ2luU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihsb2dpblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHR2bS5lcnJvciA9ICcnO1xyXG5cclxuXHRcdHZtLmxvZ2luID0gbG9naW47XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIExvZ2luU2VydmljZSB3aWxsIHJlZGlyZWN0IGlmIHRoZXJlIGlzIG5vIGVycm9yLiBUaHVzLCB0aGVyZSdzIG9ubHkgYVxyXG5cdFx0KiBuZWVkIHRvIHJldHVybiBhIHByb21pc2UgaWYgdGhlcmUncyBhbiBlcnJvci5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBsb2dpbigpIHtcclxuXHRcdFx0dm0ubG9hZGluZyA9IHRydWU7XHJcblx0XHRcdGxvZ2luU2VydmljZS5sb2dpbih2bS51c2VyKVxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR2bS5lcnJvciA9IHJlc3BvbnNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnbG9naW5TZXJ2aWNlJywgbG9naW5TZXJ2aWNlKTtcclxuXHJcblx0bG9naW5TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2NhdGlvbicsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gbG9naW5TZXJ2aWNlKCRodHRwLCAkbG9jYXRpb24sICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsb2dpbjogbG9naW5cclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbG9naW4odXNlcikge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnYXBpL3VzZXIvbG9naW5NYW5hZ2VyLnBocCcsIHVzZXIpXHJcblx0XHRcdFx0LnRoZW4obG9naW5Db21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gobG9naW5GYWlsZWQpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gbG9naW5Db21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YS50aXRsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9kYXNoYm9hcmQnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gbG9naW5GYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHRyZXR1cm4gJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdNb2RhbENvbnRyb2xsZXInLCBNb2RhbENvbnRyb2xsZXIpO1xyXG5cclxuXHRNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHVpYk1vZGFsSW5zdGFuY2UnLCAnaXRlbSddO1xyXG5cdGZ1bmN0aW9uIE1vZGFsQ29udHJvbGxlcigkdWliTW9kYWxJbnN0YW5jZSwgaXRlbSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLml0ZW0gPSBpdGVtO1xyXG5cdFx0dm0uY2xvc2UgPSBjbG9zZTtcclxuXHRcdHZtLmNhbmNlbCA9IGNhbmNlbDtcclxuXHRcdHZtLmNvbmZpcm0gPSBjb25maXJtO1xyXG5cdFx0dm0ucmVtb3ZlID0gcmVtb3ZlO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNsb3NlKCkge1xyXG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGRhdGEpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuZGlzbWlzcyhkYXRhKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjb25maXJtKGRhdGEpIHtcclxuXHRcdFx0JHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoZGF0YSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdUYXNrc0NvbnRyb2xsZXInLCBUYXNrc0NvbnRyb2xsZXIpO1xyXG5cclxuXHRUYXNrc0NvbnRyb2xsZXIuJGluamVjdCA9IFsndGFza3NTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gVGFza3NDb250cm9sbGVyKHRhc2tzU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLnRhc2tzID0ge307XHJcblx0XHR2bS5zaG93VGFza0RpYWxvZyA9IHNob3dUYXNrRGlhbG9nO1xyXG5cclxuXHRcdGFjdGl2YXRlKCk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS5nZXRUYXNrcygpLnRoZW4odXBkYXRlVGFza3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3dUYXNrRGlhbG9nKHRhc2spIHtcclxuXHRcdFx0dGFza3NTZXJ2aWNlLm9wZW5UYXNrTW9kYWwodGFzaykudGhlbih1cGRhdGVUYXNrcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGFza3MocmVzcG9uc2UpIHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0udGFza3MgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFRhc2tzJywgdGFza3NEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiB0YXNrc0RpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy90YXNrcy90YXNrcy5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1Rhc2tzQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tzU2VydmljZScsIHRhc2tzU2VydmljZSk7XHJcblxyXG5cdHRhc2tzU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJyR1aWJNb2RhbCcsICdjcnVkU2VydmljZScsICdzZXNzaW9uU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHRhc2tzU2VydmljZSgkaHR0cCwgJGxvZywgJHVpYk1vZGFsLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLnRhc2sgPSBuZXcgY3J1ZFNlcnZpY2UoJ3Rhc2snKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVPclVwZGF0ZVRhc2s6IGNyZWF0ZU9yVXBkYXRlVGFzayxcclxuXHRcdFx0ZGVsZXRlVGFzazogZGVsZXRlVGFzayxcclxuXHRcdFx0Z2V0VGFza3M6IGdldFRhc2tzLFxyXG5cdFx0XHRvcGVuVGFza01vZGFsOiBvcGVuVGFza01vZGFsXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlVGFzayh0YXNrKSB7XHJcblx0XHRcdGlmICghdGFzay50YXNrX2lkKSB7XHJcblx0XHRcdFx0cmV0dXJuIHZtLnRhc2suY3JlYXRlKHRhc2spLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdm0udGFzay51cGRhdGUodGFzay50YXNrX2lkLCB0YXNrKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlVGFzayh0YXNrKSB7XHJcblx0XHRcdHJldHVybiB2bS50YXNrLnJlbW92ZSh0YXNrLnRhc2tfaWQpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldFRhc2tXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFRhc2tXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0udGFzay5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIG9wZW5UYXNrTW9kYWwodGFzaykge1xyXG5cdFx0XHRpZiAoYW5ndWxhci5pc1N0cmluZyh0YXNrLmR1ZSkpIHtcclxuXHRcdFx0XHR0YXNrLmR1ZSA9IG5ldyBEYXRlKHRhc2suZHVlLnJlcGxhY2UoLyguKykgKC4rKS8sIFwiJDFUJDJaXCIpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYW5ndWxhci5pc1N0cmluZyh0YXNrLnJlbWluZGVyKSkge1xyXG5cdFx0XHRcdHRhc2sucmVtaW5kZXIgPSBuZXcgRGF0ZSh0YXNrLnJlbWluZGVyLnJlcGxhY2UoLyguKykgKC4rKS8sIFwiJDFUJDJaXCIpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICR1aWJNb2RhbC5vcGVuKHtcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Rhc2tzL21vZGFsL3Rhc2subW9kYWwuaHRtbCcsXHJcblx0XHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdFx0aXRlbTogdGFza1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkucmVzdWx0XHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiBjcmVhdGVPclVwZGF0ZVRhc2socmVzcG9uc2UpLnRoZW4oZ2V0VGFza3MpO1xyXG5cdFx0XHRcdH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRpZiAocmVzcG9uc2UudGFza19pZCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVsZXRlVGFzayhyZXNwb25zZSkudGhlbihnZXRUYXNrcyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJywgRGFzaGJvYXJkQ29udHJvbGxlcik7XHJcblxyXG5cdGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoKSB7XHJcblxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcclxuXHJcblx0UmVnaXN0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ3JlZ2lzdGVyU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcihyZWdpc3RlclNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5lcnJvciA9ICcnO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcclxuXHJcblx0XHRmdW5jdGlvbiByZWdpc3RlcigpIHtcclxuXHRcdFx0dm0ubG9hZGluZyA9IHRydWU7XHJcblx0XHRcdHJlZ2lzdGVyU2VydmljZS5yZWdpc3Rlcih2bS51c2VyKVxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR2bS5lcnJvciA9IHJlc3BvbnNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgncmVnaXN0ZXJTZXJ2aWNlJywgcmVnaXN0ZXJTZXJ2aWNlKTtcclxuXHJcblx0cmVnaXN0ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckbG9nJywgJ2NydWRTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlKCRsb2NhdGlvbiwgJGxvZywgY3J1ZFNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmNydWQgPSBuZXcgY3J1ZFNlcnZpY2UoJ3VzZXInKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZWdpc3RlcjogcmVnaXN0ZXJcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVnaXN0ZXIodXNlcikge1xyXG5cdFx0XHRyZXR1cm4gdm0uY3J1ZC5jcmVhdGUodXNlcilcclxuXHRcdFx0XHQudGhlbihyZWdpc3RyYXRpb25Db21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiByZWdpc3RyYXRpb25Db21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5zdWNjZXNzID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0XHQkbG9nLmVycm9yKHJlc3BvbnNlLnRpdGxlKTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNwb25zZS50aXRsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JGxvY2F0aW9uLnVybCgnL2xvZ2luJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2FjY2Vzc1NlcnZpY2UnLCBhY2Nlc3NTZXJ2aWNlKTtcclxuXHJcblx0YWNjZXNzU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJHEnLCAnc2Vzc2lvblNlcnZpY2UnLCAnc3RhdHVzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGFjY2Vzc1NlcnZpY2UoJGxvY2F0aW9uLCAkcSwgc2Vzc2lvblNlcnZpY2UsIHN0YXR1c1NlcnZpY2UpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXHJcblx0XHRcdGlzQWRtaW46IGlzQWRtaW5cclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihpc0F1dGhlbnRpY2F0ZWRDb21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWRDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHN0YXR1c1NlcnZpY2UuT0spO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3Qoc3RhdHVzU2VydmljZS5VTkFVVEhPUklaRUQpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0FkbWluKCkge1xyXG5cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBTdGF0dXMgY29kZXMgdXNlZCB3aGVuIGFjY2Vzc2luZyB2YXJpb3VzIHBhZ2VzIGluIHRoZSBhcHAuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5zZXJ2aWNlKCdzdGF0dXNTZXJ2aWNlJywgc3RhdHVzU2VydmljZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHN0YXR1c1NlcnZpY2UoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRPSzogMjAwLFxyXG5cdFx0XHRVTkFVVEhPUklaRUQ6IDQwMSxcclxuXHRcdFx0Rk9SQklEREVOOiA0MDNcclxuXHRcdH07XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdoZWFkZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUsIGhlYWRlclNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5uYW1lID0gJyc7XHJcblx0XHR2bS51cmwgPSAnJztcclxuXHJcblx0XHRoZWFkZXJTZXJ2aWNlLmdldFVzZXIoKVxyXG5cdFx0XHQudGhlbihnZXRVc2VyQ29tcGxldGUpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFVzZXJDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHQkc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2bS5uYW1lID0gKHJlc3BvbnNlLm5hbWUgPT09IGZhbHNlKSA/ICdMb2dpbicgOiByZXNwb25zZS5uYW1lO1xyXG5cdFx0XHRcdHZtLnVybCA9IHJlc3BvbnNlLnVybDtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwSGVhZGVyJywgaGVhZGVyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gaGVhZGVyRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogbGluayxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9sYXlvdXQvaGVhZGVyL2hlYWRlci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2hlYWRlclNlcnZpY2UnLCBoZWFkZXJTZXJ2aWNlKTtcclxuXHJcblx0aGVhZGVyU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gaGVhZGVyU2VydmljZSgkaHR0cCwgJGxvZywgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFVzZXI6IGdldFVzZXJcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlcigpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oZ2V0TmFtZUNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldE5hbWVDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge25hbWU6IGZhbHNlLCB1cmw6ICcjL2xvZ2luJ307XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB7bmFtZTogcmVzLmRhdGEsIHVybDogJyMvZGFzaGJvYXJkJ307XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsIFNpZGViYXJDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gU2lkZWJhckNvbnRyb2xsZXIoKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmNvbGxhcHNlZCA9IHRydWU7XHJcblxyXG5cdFx0dm0udG9nZ2xlU2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2bS5jb2xsYXBzZWQgPSAhdm0uY29sbGFwc2VkO1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BTaWRlYmFyJywgc2lkZWJhckRpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHNpZGViYXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9zaWRlYmFyL3NpZGViYXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdTaWRlYmFyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0XHRzY29wZS4kd2F0Y2goYXR0cnMuc2lkZWJhckRpcmVjdGl2ZSwgdG9nZ2xlU2lkZWJhcik7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGlmIChjb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
