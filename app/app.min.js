!function(){"use strict";function e(e,t,r){function n(){console.log("changed route"),r.isAuthenticated()}e.$on("$locationChangeStart",n)}angular.module("app",["ngRoute"]).controller("AppController",e),e.$inject=["$rootScope","$location","appService"]}(),function(){"use strict";function e(e){e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).otherwise({redirectTo:"/dashboard"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function r(){function r(t){"false"===t.data&&e.url("/login"),console.log("authenticated!!")}t.getVar("name").then(r)}return{isAuthenticated:r}}angular.module("app").factory("appService",e),e.$inject=["$location","sessionService"]}(),function(){"use strict";function e(e,t){function r(e){this.base="api/"+e+"/"+e+"Manager.php"}function n(t){return e.get(this.base+"?id="+t).then(l)["catch"](c)}function o(t){return e.post(this.base,t).then(l)["catch"](c)}function a(t,r){return e.put(this.base+"?id="+t,r).then(l)["catch"](c)}function i(t){return e["delete"](this.base+"?id="+t).then(l)["catch"](c)}function l(e){return e.data}function c(e){return t.error(e),!1}var u=r;return u.prototype={get:n,create:o,update:a,remove:i},u}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function r(t){return e.get(i.base+t).then(o)["catch"](a)}function n(t,r){return e.post(i.base+t,r).then(o)["catch"](a)}function o(e){return e.data}function a(e){return t.error(e),!1}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:r,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,r,n){function o(){l()}function a(t){return t===e.otherModel.$viewValue}function i(e,t){n.$validate()}var l=e.$watch("otherModel",i);n.$validators.spCompareTo=a,t.on("$destroy",o)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){function t(e){r.loading=!1,r.error=e}r.loading=!0,e.login(r.user).then(t)}var r=this;r.loading=!1,r.error="",r.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r){function n(n){function o(e){return"true"===e.data&&t.url("/dashboard"),"Username or password was incorrect."}function a(e){return r.error(e),"Something went wrong. Please try again."}return e.post("api/managers/loginManager.php",n).then(o)["catch"](a)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function t(){function t(e){r.loading=!1,r.error=e}r.loading=!0,e.register(r.user).then(t)}var r=this;r.loading=!1,r.error="",r.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t){function r(t){function r(t){return"1"===t&&e.url("/login"),"Username taken."}return n.crud.create(t).then(r)}var n=this;return n.crud=new t("user"),{register:r}}angular.module("app").factory("registerService",e),e.$inject=["$location","crudService"]}(),function(){"use strict";function e(e){function t(e){r.name=e.name===!1?"Login":e.name,r.url=e.url}var r=this;r.name="",r.url="",e.getUser().then(t)}angular.module("app").controller("HeaderController",e),e.$inject=["headerService"]}(),function(){"use strict";function e(){function e(e,t,r){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e){function t(){function t(e){return"false"===e.data?{name:!1,url:"/login"}:{name:e,url:"/dashboard"}}e.getVar("name").then(t)}return{getUser:t}}angular.module("app").factory("headerService",e),e.$inject=["sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,r){function n(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(r.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJhcHBTZXJ2aWNlIiwiY2hlY2tBdXRoZW50aWNhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJpc0F1dGhlbnRpY2F0ZWQiLCIkb24iLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXJBcyIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzZXNzaW9uU2VydmljZSIsImlzQXV0aGVudGljYXRlZENvbXBsZXRlIiwicmVzcG9uc2UiLCJkYXRhIiwidXJsIiwiZ2V0VmFyIiwidGhlbiIsImZhY3RvcnkiLCJjcnVkU2VydmljZSIsIiRodHRwIiwiJGxvZyIsImluaXQiLCJ0eXBlIiwidGhpcyIsImJhc2UiLCJnZXQiLCJpZCIsInByb21pc2VDb21wbGV0ZSIsInByb21pc2VGYWlsZWQiLCJjcmVhdGUiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicmVtb3ZlIiwiZXJyb3IiLCJjcnVkIiwicHJvdG90eXBlIiwiJG5hbWUiLCJ2bSIsInNldFZhciIsIiR2YWx1ZSIsImNvbXBhcmVUbyIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJjbGVhblVwIiwidW5iaW5kV2F0Y2giLCJjb21wYXJlVmFsdWVzIiwidmlld1ZhbHVlIiwib3RoZXJNb2RlbCIsIiR2aWV3VmFsdWUiLCJ2YWxpZGF0ZU9uQ2hhbmdlIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsIiR2YWxpZGF0ZSIsIiR3YXRjaCIsIiR2YWxpZGF0b3JzIiwic3BDb21wYXJlVG8iLCJvbiIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJMb2dpbkNvbnRyb2xsZXIiLCJsb2dpblNlcnZpY2UiLCJsb2dpbiIsImxvZ2luQ29tcGxldGUiLCJsb2FkaW5nIiwidXNlciIsImxvZ2luRmFpbGVkIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJIZWFkZXJDb250cm9sbGVyIiwiaGVhZGVyU2VydmljZSIsImdldFVzZXJDb21wbGV0ZSIsIm5hbWUiLCJnZXRVc2VyIiwiaGVhZGVyRGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImdldE5hbWVDb21wbGV0ZSIsIlNpZGViYXJDb250cm9sbGVyIiwiY29sbGFwc2VkIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJEaXJlY3RpdmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBT0EsU0FBU0EsR0FBY0MsRUFBWUMsRUFBV0MsR0FHN0MsUUFBU0MsS0FDUkMsUUFBUUMsSUFBSSxpQkFDWkgsRUFBV0ksa0JBSlpOLEVBQVdPLElBQUksdUJBQXdCSixHQU54Q0ssUUFDRUMsT0FBTyxPQUFRLFlBQ2ZDLFdBQVcsZ0JBQWlCWCxHQUU5QkEsRUFBY1ksU0FBVyxhQUFjLFlBQWEsaUJBVXJELFdBQ0MsWUFPQSxTQUFTQyxHQUFPQyxHQUNmQSxFQUNFQyxLQUFLLFVBQ0xDLFlBQWEsMkJBQ2JMLFdBQVksa0JBQ1pNLGFBQWMsT0FFZEYsS0FBSyxXQUNMQyxZQUFhLDZCQUNiTCxXQUFZLG1CQUNaTSxhQUFjLE9BRWRGLEtBQUssYUFDTEMsWUFBYSwrQkFDYkwsV0FBWSxxQkFDWk0sYUFBYyxPQUVkRixLQUFLLGNBQ0xDLFlBQWEsaUNBQ2JMLFdBQVksc0JBQ1pNLGFBQWMsT0FFZEMsV0FDQUMsV0FBWSxlQTVCZlYsUUFDRUMsT0FBTyxPQUNQRyxPQUFPQSxHQUVUQSxFQUFPRCxTQUFXLHFCQTRCbkIsV0FDQyxZQU9BLFNBQVNULEdBQVdELEVBQVdrQixHQUs5QixRQUFTYixLQUlSLFFBQVNjLEdBQXdCQyxHQUNWLFVBQWxCQSxFQUFTQyxNQUNackIsRUFBVXNCLElBQUksVUFHZm5CLFFBQVFDLElBQUksbUJBUmJjLEVBQWVLLE9BQU8sUUFDcEJDLEtBQUtMLEdBTlIsT0FDQ2QsZ0JBQWlCQSxHQVBuQkUsUUFDRUMsT0FBTyxPQUNQaUIsUUFBUSxhQUFjeEIsR0FFeEJBLEVBQVdTLFNBQVcsWUFBYSxxQkFxQnBDLFdBQ0MsWUFZQSxTQUFTZ0IsR0FBWUMsRUFBT0MsR0FjM0IsUUFBU0MsR0FBS0MsR0FDYkMsS0FBS0MsS0FBTyxPQUFTRixFQUFPLElBQU1BLEVBQU8sY0FPMUMsUUFBU0csR0FBSUMsR0FDWixNQUFPUCxHQUFNTSxJQUFJRixLQUFLQyxLQUFPLE9BQVNFLEdBQ3BDVixLQUFLVyxHQURBUixTQUVDUyxHQU9ULFFBQVNDLEdBQU9oQixHQUNmLE1BQU9NLEdBQU1XLEtBQUtQLEtBQUtDLEtBQU1YLEdBQzNCRyxLQUFLVyxHQURBUixTQUVDUyxHQVNULFFBQVNHLEdBQU9MLEVBQUliLEdBQ25CLE1BQU9NLEdBQU1hLElBQUlULEtBQUtDLEtBQU8sT0FBU0UsRUFBSWIsR0FDeENHLEtBQUtXLEdBREFSLFNBRUNTLEdBT1QsUUFBU0ssR0FBT1AsR0FDZixNQUFPUCxHQUFBQSxVQUFhSSxLQUFLQyxLQUFPLE9BQVNFLEdBQ3ZDVixLQUFLVyxHQURBUixTQUVDUyxHQUdULFFBQVNELEdBQWdCZixHQUN4QixNQUFPQSxHQUFTQyxLQUdqQixRQUFTZSxHQUFjTSxHQUV0QixNQURBZCxHQUFLYyxNQUFNQSxJQUNKLEVBakVSLEdBQUlDLEdBQU9kLENBUVgsT0FQQWMsR0FBS0MsV0FDSlgsSUFBS0EsRUFDTEksT0FBUUEsRUFDUkUsT0FBUUEsRUFDUkUsT0FBUUEsR0FHRkUsRUFkUnBDLFFBQ0VDLE9BQU8sT0FDUGlCLFFBQVEsY0FBZUMsR0FFekJBLEVBQVloQixTQUFXLFFBQVMsV0F3RWpDLFdBQ0MsWUFXQSxTQUFTUSxHQUFlUyxFQUFPQyxHQWE5QixRQUFTTCxHQUFPc0IsR0FDZixNQUFPbEIsR0FBTU0sSUFBSWEsRUFBR2QsS0FBT2EsR0FDekJyQixLQUFLVyxHQURBUixTQUVDUyxHQU9ULFFBQVNXLEdBQU9GLEVBQU9HLEdBQ3RCLE1BQU9yQixHQUFNVyxLQUFLUSxFQUFHZCxLQUFPYSxFQUFPRyxHQUNqQ3hCLEtBQUtXLEdBREFSLFNBRUNTLEdBR1QsUUFBU0QsR0FBZ0JmLEdBQ3hCLE1BQU9BLEdBQVNDLEtBR2pCLFFBQVNlLEdBQWNNLEdBRXRCLE1BREFkLEdBQUtjLE1BQU1BLElBQ0osRUFsQ1IsR0FBSUksR0FBS2YsSUFHVCxPQUZBZSxHQUFHZCxLQUFPLDBDQUdUVCxPQUFRQSxFQUNSd0IsT0FBUUEsR0FYVnhDLFFBQ0VDLE9BQU8sT0FDUGlCLFFBQVEsaUJBQWtCUCxHQUU1QkEsRUFBZVIsU0FBVyxRQUFTLFdBeUNwQyxXQUNDLFlBVUEsU0FBU3VDLEtBVVIsUUFBU0MsR0FBS0MsRUFBT0MsRUFBU0MsRUFBT0MsR0FLcEMsUUFBU0MsS0FDUkMsSUFHRCxRQUFTQyxHQUFjQyxHQUN0QixNQUFRQSxLQUFjUCxFQUFNUSxXQUFXQyxXQUd4QyxRQUFTQyxHQUFpQkMsRUFBVUMsR0FDbkNULEVBQVFVLFlBYlQsR0FBSVIsR0FBY0wsRUFBTWMsT0FBTyxhQUFjSixFQUM3Q1AsR0FBUVksWUFBWUMsWUFBY1YsRUFDbENMLEVBQVFnQixHQUFHLFdBQVliLEdBWnhCLEdBQUljLElBQ0hDLFFBQVMsVUFDVG5CLE9BQ0NRLFdBQVksZ0JBRWJULEtBQU1BLEVBRVAsT0FBT21CLEdBWlI5RCxRQUNFQyxPQUFPLE9BQ1A2RCxVQUFVLGNBQWVwQixNQStCNUIsV0FDQyxZQU9BLFNBQVNzQixHQUFnQkMsR0FPeEIsUUFBU0MsS0FLUixRQUFTQyxHQUFjdEQsR0FDdEIwQixFQUFHNkIsU0FBVSxFQUNiN0IsRUFBR0osTUFBUXRCLEVBTlowQixFQUFHNkIsU0FBVSxFQUNiSCxFQUFhQyxNQUFNM0IsRUFBRzhCLE1BQ3BCcEQsS0FBS2tELEdBVFIsR0FBSTVCLEdBQUtmLElBQ1RlLEdBQUc2QixTQUFVLEVBQ2I3QixFQUFHSixNQUFRLEdBRVhJLEVBQUcyQixNQUFRQSxFQVZabEUsUUFDRUMsT0FBTyxPQUNQQyxXQUFXLGtCQUFtQjhELEdBRWhDQSxFQUFnQjdELFNBQVcsbUJBb0I1QixXQUNDLFlBT0EsU0FBUzhELEdBQWE3QyxFQUFPM0IsRUFBVzRCLEdBT3ZDLFFBQVM2QyxHQUFNRyxHQUtkLFFBQVNGLEdBQWN0RCxHQUl0QixNQUhzQixTQUFsQkEsRUFBU0MsTUFDWnJCLEVBQVVzQixJQUFJLGNBRVIsc0NBR1IsUUFBU3VELEdBQVluQyxHQUVwQixNQURBZCxHQUFLYyxNQUFNQSxHQUNKLDBDQWJSLE1BQU9mLEdBQU1XLEtBQUssZ0NBQWlDc0MsR0FDakRwRCxLQUFLa0QsR0FEQS9DLFNBRUNrRCxHQVBULE9BQ0NKLE1BQU9BLEdBVFRsRSxRQUNFQyxPQUFPLE9BQ1BpQixRQUFRLGVBQWdCK0MsR0FFMUJBLEVBQWE5RCxTQUFXLFFBQVMsWUFBYSxXQTRCL0MsV0FDQyxZQU1BLFNBQVNvRSxNQUpUdkUsUUFDRUMsT0FBTyxPQUNQQyxXQUFXLHNCQUF1QnFFLE1BTXJDLFdBQ0MsWUFPQSxTQUFTQyxHQUFtQkMsR0FPM0IsUUFBU0MsS0FLUixRQUFTQyxHQUFxQjlELEdBQzdCMEIsRUFBRzZCLFNBQVUsRUFDYjdCLEVBQUdKLE1BQVF0QixFQU5aMEIsRUFBRzZCLFNBQVUsRUFDYkssRUFBZ0JDLFNBQVNuQyxFQUFHOEIsTUFDMUJwRCxLQUFLMEQsR0FUUixHQUFJcEMsR0FBS2YsSUFDVGUsR0FBRzZCLFNBQVUsRUFDYjdCLEVBQUdKLE1BQVEsR0FFWEksRUFBR21DLFNBQVdBLEVBVmYxRSxRQUNFQyxPQUFPLE9BQ1BDLFdBQVcscUJBQXNCc0UsR0FFbkNBLEVBQW1CckUsU0FBVyxzQkFvQi9CLFdBQ0MsWUFPQSxTQUFTc0UsR0FBZ0JoRixFQUFXMEIsR0FRbkMsUUFBU3VELEdBQVNMLEdBSWpCLFFBQVNNLEdBQXFCOUQsR0FJN0IsTUFIaUIsTUFBYkEsR0FDSHBCLEVBQVVzQixJQUFJLFVBRVIsa0JBUFIsTUFBT3dCLEdBQUdILEtBQUtOLE9BQU91QyxHQUNwQnBELEtBQUswRCxHQVRSLEdBQUlwQyxHQUFLZixJQUdULE9BRkFlLEdBQUdILEtBQU8sR0FBSWpCLEdBQVksU0FHekJ1RCxTQUFVQSxHQVZaMUUsUUFDRUMsT0FBTyxPQUNQaUIsUUFBUSxrQkFBbUJ1RCxHQUU3QkEsRUFBZ0J0RSxTQUFXLFlBQWEsa0JBc0J6QyxXQUNDLFlBT0EsU0FBU3lFLEdBQWlCQyxHQVF6QixRQUFTQyxHQUFnQmpFLEdBQ3hCMEIsRUFBR3dDLEtBQVFsRSxFQUFTa0UsUUFBUyxFQUFTLFFBQVVsRSxFQUFTa0UsS0FDekR4QyxFQUFHeEIsSUFBTUYsRUFBU0UsSUFUbkIsR0FBSXdCLEdBQUtmLElBQ1RlLEdBQUd3QyxLQUFPLEdBQ1Z4QyxFQUFHeEIsSUFBTSxHQUVUOEQsRUFBY0csVUFDWi9ELEtBQUs2RCxHQVhSOUUsUUFDRUMsT0FBTyxPQUNQQyxXQUFXLG1CQUFvQjBFLEdBRWpDQSxFQUFpQnpFLFNBQVksb0JBZTlCLFdBQ0MsWUFNQSxTQUFTOEUsS0FTUixRQUFTdEMsR0FBS0MsRUFBT0MsRUFBU0MsSUFSOUIsT0FDQ0gsS0FBTUEsRUFDTnBDLFlBQWEsa0NBQ2JMLFdBQVksbUJBQ1pNLGFBQWMsS0FDZDBFLGtCQUFrQixHQVZwQmxGLFFBQ0VDLE9BQU8sT0FDUDZELFVBQVUsV0FBWW1CLE1BZXpCLFdBQ0MsWUFPQSxTQUFTSixHQUFjbEUsR0FTdEIsUUFBU3FFLEtBSVIsUUFBU0csR0FBZ0J0RSxHQUN4QixNQUFzQixVQUFsQkEsRUFBU0MsTUFDSmlFLE1BQU0sRUFBT2hFLElBQUssV0FHbkJnRSxLQUFNbEUsRUFBVUUsSUFBSyxjQVI5QkosRUFBZUssT0FBTyxRQUNwQkMsS0FBS2tFLEdBVlIsT0FDQ0gsUUFBU0EsR0FQWGhGLFFBQ0VDLE9BQU8sT0FDUGlCLFFBQVEsZ0JBQWlCMkQsR0FFM0JBLEVBQWMxRSxTQUFXLHFCQXlCMUIsV0FDQyxZQU1BLFNBQVNpRixLQUNSLEdBQUk3QyxHQUFLZixJQUVUZSxHQUFHOEMsV0FBWSxFQUVmOUMsRUFBRytDLGNBQWdCLFdBQ2xCL0MsRUFBRzhDLFdBQWE5QyxFQUFHOEMsV0FWckJyRixRQUNFQyxPQUFPLE9BQ1BDLFdBQVcsb0JBQXFCa0YsTUFZbkMsV0FDQyxZQU1BLFNBQVNHLEtBU1IsUUFBUzVDLEdBQUtDLEVBQU9DLEVBQVNDLEdBRzdCLFFBQVN3QyxHQUFjRCxHQUNsQkEsRUFDSHhDLEVBQVEyQyxZQUFZLGFBRXBCM0MsRUFBUTRDLFNBQVMsYUFObkI3QyxFQUFNYyxPQUFPWixFQUFNeUMsaUJBQWtCRCxHQVR0QyxPQUNDM0MsS0FBTUEsRUFDTnBDLFlBQWEsb0NBQ2JMLFdBQVksb0JBQ1pNLGFBQWMsS0FDZDBFLGtCQUFrQixHQVZwQmxGLFFBQ0VDLE9BQU8sT0FDUDZELFVBQVUsWUFBYXlCIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnXSlcclxuXHRcdC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgQXBwQ29udHJvbGxlcik7XHJcblxyXG5cdEFwcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnYXBwU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIEFwcENvbnRyb2xsZXIoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCBhcHBTZXJ2aWNlKSB7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBjaGVja0F1dGhlbnRpY2F0aW9uKTtcclxuXHJcblx0XHRmdW5jdGlvbiBjaGVja0F1dGhlbnRpY2F0aW9uKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnY2hhbmdlZCByb3V0ZScpO1xyXG5cdFx0XHRhcHBTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29uZmlnKGNvbmZpZyk7XHJcblxyXG5cdGNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cdGZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG5cdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9naW4vbG9naW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvbG9nb3V0Jywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9sb2dvdXQvbG9nb3V0Lmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdMb2dvdXRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9yZWdpc3RlcicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL3JlZ2lzdGVyL3JlZ2lzdGVyLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2Rhc2hib2FyZCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2Rhc2hib2FyZC9kYXNoYm9hcmQuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRyZWRpcmVjdFRvOiAnL2Rhc2hib2FyZCdcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdhcHBTZXJ2aWNlJywgYXBwU2VydmljZSk7XHJcblxyXG5cdGFwcFNlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gYXBwU2VydmljZSgkbG9jYXRpb24sIHNlc3Npb25TZXJ2aWNlKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZFxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XHJcblx0XHRcdHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oaXNBdXRoZW50aWNhdGVkQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YSA9PT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnVybCgnL2xvZ2luJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRlZCEhJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBVc2VkIHRvIGFjY2VzcyB0aGUgYXBpIG9mIHRoZSB2YXJpb3VzIGl0ZW0gdHlwZXMuXHJcblx0KiBBbiBpbnN0YW5jZSBvZiBjcnVkIG11c3QgYmUgY3JlYXRlZCBpbiBvcmRlciB0byB1c2UgdGhlIHNlcnZpY2UuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdjcnVkU2VydmljZScsIGNydWRTZXJ2aWNlKTtcclxuXHJcblx0Y3J1ZFNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGNydWRTZXJ2aWNlKCRodHRwLCAkbG9nKSB7XHJcblx0XHR2YXIgY3J1ZCA9IGluaXQ7XHJcblx0XHRjcnVkLnByb3RvdHlwZSA9IHtcclxuXHRcdFx0Z2V0OiBnZXQsXHJcblx0XHRcdGNyZWF0ZTogY3JlYXRlLFxyXG5cdFx0XHR1cGRhdGU6IHVwZGF0ZSxcclxuXHRcdFx0cmVtb3ZlOiByZW1vdmVcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIGNydWQ7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gaW5pdCh0eXBlKSB7XHJcblx0XHRcdHRoaXMuYmFzZSA9ICdhcGkvJyArIHR5cGUgKyAnLycgKyB0eXBlICsgJ01hbmFnZXIucGhwJzsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBnZXQuXHJcblx0XHQqIEByZXR1cm5cdHttaXhlZFtdfHN0cmluZ31cdFF1ZXJ5IHJlc3VsdHMgb3IgXCJmYWxzZVwiIG9uIGZhaWx1cmUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0KGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gY3JlYXRlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nfVx0XHRcdFwiMVwiIG9uIHN1Y2Nlc3Mgb3IgXCJmYWxzZVwiIG9uIGZhaWx1cmUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QodGhpcy5iYXNlLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gdXBkYXRlLlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIHVwZGF0ZS5cclxuXHRcdCpcclxuXHRcdCogQHJldHVyblx0e3N0cmluZ31cdFx0XHRcIjFcIiBvbiBzdWNjZXNzIG9yIFwiZmFsc2VcIiBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShpZCwgZGF0YSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KHRoaXMuYmFzZSArICc/aWQ9JyArIGlkLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZGVsZXRlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nfVx0XHRcdFwiMVwiIG9uIHN1Y2Nlc3Mgb3IgXCJmYWxzZVwiIG9uIGZhaWx1cmUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBVc2VkIHRvIGFjY2VzcyBzZXNzaW9uIHZhcmlhYmxlcy5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Nlc3Npb25TZXJ2aWNlJywgc2Vzc2lvblNlcnZpY2UpO1xyXG5cclxuXHRzZXNzaW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gc2Vzc2lvblNlcnZpY2UoJGh0dHAsICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmJhc2UgPSAnYXBpL3Nlc3Npb24vc2Vzc2lvblZhck1hbmFnZXIucGhwP3Zhcj0nO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFZhcjogZ2V0VmFyLFxyXG5cdFx0XHRzZXRWYXI6IHNldFZhclxyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtICB7c3RyaW5nfSAkbmFtZSBWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm4ge3N0cmluZ30gXHRcdCBWYXJpYWJsZSB2YWx1ZSBvciBmYWxzZSBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGdldFZhcigkbmFtZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KHZtLmJhc2UgKyAkbmFtZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW0ge3N0cmluZ30gJG5hbWUgVmFyaWFibGUgbmFtZSB0byBnZXQgZnJvbSBzZXNzaW9uLlxyXG5cdFx0KiBAcmV0dXJuIHtib29sfSBcdFx0VHJ1ZSBvbiBzdWNjZXNzIG9yIGZhbHNlIG9uIGZhaWx1cmUuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0VmFyKCRuYW1lLCAkdmFsdWUpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3Qodm0uYmFzZSArICRuYW1lLCAkdmFsdWUpXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUZhaWxlZChlcnJvcikge1xyXG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIENvbXBhcmUgYW4gaW5wdXQgZmllbGQgdG8gYW5vdGhlciBmaWVsZCwgZGV0ZXJtaW5lZCBieSB0aGUgZGV2LlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcENvbXBhcmVUbycsIGNvbXBhcmVUbyk7XHJcblxyXG5cdGZ1bmN0aW9uIGNvbXBhcmVUbygpIHtcclxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XHJcblx0XHRcdHJlcXVpcmU6ICduZ01vZGVsJyxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHRvdGhlck1vZGVsOiAnPXNwQ29tcGFyZVRvJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRsaW5rOiBsaW5rXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG5cdFx0XHR2YXIgdW5iaW5kV2F0Y2ggPSBzY29wZS4kd2F0Y2goJ290aGVyTW9kZWwnLCB2YWxpZGF0ZU9uQ2hhbmdlKTtcclxuXHRcdFx0bmdNb2RlbC4kdmFsaWRhdG9ycy5zcENvbXBhcmVUbyA9IGNvbXBhcmVWYWx1ZXM7XHJcblx0XHRcdGVsZW1lbnQub24oJyRkZXN0cm95JywgY2xlYW5VcCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjbGVhblVwKCkge1xyXG5cdFx0XHRcdHVuYmluZFdhdGNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGNvbXBhcmVWYWx1ZXModmlld1ZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuICh2aWV3VmFsdWUgPT09IHNjb3BlLm90aGVyTW9kZWwuJHZpZXdWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIHZhbGlkYXRlT25DaGFuZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcblx0XHRcdFx0bmdNb2RlbC4kdmFsaWRhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcclxuXHJcblx0TG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJ2xvZ2luU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihsb2dpblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHR2bS5lcnJvciA9ICcnO1xyXG5cclxuXHRcdHZtLmxvZ2luID0gbG9naW47XHJcblxyXG5cdFx0ZnVuY3Rpb24gbG9naW4oKSB7XHJcblx0XHRcdHZtLmxvYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRsb2dpblNlcnZpY2UubG9naW4odm0udXNlcilcclxuXHRcdFx0XHQudGhlbihsb2dpbkNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnbG9naW5TZXJ2aWNlJywgbG9naW5TZXJ2aWNlKTtcclxuXHJcblx0bG9naW5TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2NhdGlvbicsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gbG9naW5TZXJ2aWNlKCRodHRwLCAkbG9jYXRpb24sICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsb2dpbjogbG9naW5cclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbG9naW4odXNlcikge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnYXBpL21hbmFnZXJzL2xvZ2luTWFuYWdlci5waHAnLCB1c2VyKVxyXG5cdFx0XHRcdC50aGVuKGxvZ2luQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKGxvZ2luRmFpbGVkKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YSA9PT0gXCJ0cnVlXCIpIHtcclxuXHRcdFx0XHRcdCRsb2NhdGlvbi51cmwoJy9kYXNoYm9hcmQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICdVc2VybmFtZSBvciBwYXNzd29yZCB3YXMgaW5jb3JyZWN0Lic7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdFx0cmV0dXJuICdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIERhc2hib2FyZENvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG5cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFJlZ2lzdGVyQ29udHJvbGxlcik7XHJcblxyXG5cdFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydyZWdpc3RlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIocmVnaXN0ZXJTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0cmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4ocmVnaXN0cmF0aW9uQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmVnaXN0cmF0aW9uQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgncmVnaXN0ZXJTZXJ2aWNlJywgcmVnaXN0ZXJTZXJ2aWNlKTtcclxuXHJcblx0cmVnaXN0ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICdjcnVkU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZSgkbG9jYXRpb24sIGNydWRTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5jcnVkID0gbmV3IGNydWRTZXJ2aWNlKCd1c2VyJyk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cmVnaXN0ZXI6IHJlZ2lzdGVyXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmNydWQuY3JlYXRlKHVzZXIpXHJcblx0XHRcdFx0LnRoZW4ocmVnaXN0cmF0aW9uQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmVnaXN0cmF0aW9uQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UgPT09IFwiMVwiKSB7XHJcblx0XHRcdFx0XHQkbG9jYXRpb24udXJsKCcvbG9naW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICdVc2VybmFtZSB0YWtlbi4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XHJcblxyXG5cdEhlYWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFsgJ2hlYWRlclNlcnZpY2UnIF07XHJcblx0ZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcihoZWFkZXJTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubmFtZSA9ICcnO1xyXG5cdFx0dm0udXJsID0gJyc7XHJcblxyXG5cdFx0aGVhZGVyU2VydmljZS5nZXRVc2VyKClcclxuXHRcdFx0LnRoZW4oZ2V0VXNlckNvbXBsZXRlKTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0dm0ubmFtZSA9IChyZXNwb25zZS5uYW1lID09PSBmYWxzZSkgPyAnTG9naW4nIDogcmVzcG9uc2UubmFtZTtcclxuXHRcdFx0dm0udXJsID0gcmVzcG9uc2UudXJsO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcEhlYWRlcicsIGhlYWRlckRpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIGhlYWRlckRpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGxpbms6IGxpbmssXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvbGF5b3V0L2hlYWRlci9oZWFkZXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdoZWFkZXJTZXJ2aWNlJywgaGVhZGVyU2VydmljZSk7XHJcblxyXG5cdGhlYWRlclNlcnZpY2UuJGluamVjdCA9IFsnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBoZWFkZXJTZXJ2aWNlKHNlc3Npb25TZXJ2aWNlKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXRVc2VyOiBnZXRVc2VyXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBHZXQgdGhlIHVzZXJuYW1lIG9mIHRoZSBsb2dnZWQgaW4gdXNlci5cclxuXHRcdCogQHJldHVybiB7bmFtZTogc3RyaW5nfGZhbHNlLCB1cmw6IHN0cmluZ30gIFVzZXJuYW1lIChvciBmYWxzZSBpZiBub3QgbG9nZ2VkIGluKSBhbmQgdXJsIHRvIHJlZGlyZWN0IHRvIGluIHRoZSBoZWFkZXIuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlcigpIHtcclxuXHRcdFx0c2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihnZXROYW1lQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0TmFtZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEgPT09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdHJldHVybiB7bmFtZTogZmFsc2UsIHVybDogJy9sb2dpbid9O1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHtuYW1lOiByZXNwb25zZSwgdXJsOiAnL2Rhc2hib2FyZCd9O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignU2lkZWJhckNvbnRyb2xsZXInLCBTaWRlYmFyQ29udHJvbGxlcik7XHJcblxyXG5cdGZ1bmN0aW9uIFNpZGViYXJDb250cm9sbGVyKCkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHJcblx0XHR2bS5jb2xsYXBzZWQgPSB0cnVlO1xyXG5cclxuXHRcdHZtLnRvZ2dsZVNpZGViYXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0dm0uY29sbGFwc2VkID0gIXZtLmNvbGxhcHNlZDtcclxuXHRcdH07XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwU2lkZWJhcicsIHNpZGViYXJEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBzaWRlYmFyRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogbGluayxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9sYXlvdXQvc2lkZWJhci9zaWRlYmFyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnU2lkZWJhckNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuXHRcdFx0c2NvcGUuJHdhdGNoKGF0dHJzLnNpZGViYXJEaXJlY3RpdmUsIHRvZ2dsZVNpZGViYXIpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdG9nZ2xlU2lkZWJhcihjb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRpZiAoY29sbGFwc2VkKSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
