!function(){"use strict";function e(e,t,r){function n(){console.log("changed route"),r.isAuthenticated()}e.$on("$locationChangeStart",n)}angular.module("app",["ngRoute"]).controller("AppController",e),e.$inject=["$rootScope","$location","appService"]}(),function(){"use strict";function e(e){e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).otherwise({redirectTo:"/dashboard"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function r(){function r(t){"false"===t.data&&e.url("/login"),console.log("authenticated!!")}t.getVar("name").then(r)}return{isAuthenticated:r}}angular.module("app").factory("appService",e),e.$inject=["$location","sessionService"]}(),function(){"use strict";function e(e,t){function r(e){this.base="api/"+e+"/"+e+"Manager.php"}function n(t){return e.get(this.base+"?id="+t).then(l)["catch"](c)}function o(t){return e.post(this.base,t).then(l)["catch"](c)}function a(t,r){return e.put(this.base+"?id="+t,r).then(l)["catch"](c)}function i(t){return e["delete"](this.base+"?id="+t).then(l)["catch"](c)}function l(e){return e.data}function c(e){return t.error(e),!1}var u=r;return u.prototype={get:n,create:o,update:a,remove:i},u}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function r(t){return e.get(i.base+t).then(o)["catch"](a)}function n(t,r){return e.post(i.base+t,r).then(o)["catch"](a)}function o(e){return e.data}function a(e){return t.error(e),!1}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:r,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,r,n){function o(){l()}function a(t){return t===e.otherModel.$viewValue}function i(e,t){n.$validate()}var l=e.$watch("otherModel",i);n.$validators.spCompareTo=a,t.on("$destroy",o)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){function t(e){r.loading=!1,r.error=e}r.loading=!0,e.login(r.user).then(t)}var r=this;r.loading=!1,r.error="",r.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r){function n(n){function o(e){return"true"===e.data&&t.url("/dashboard"),"Username or password was incorrect."}function a(e){return r.error(e),"Something went wrong. Please try again."}return e.post("api/managers/loginManager.php",n).then(o)["catch"](a)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function t(){function t(e){r.loading=!1,r.error=e}r.loading=!0,e.register(r.user).then(t)}var r=this;r.loading=!1,r.error="",r.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t){function r(t){function r(t){return"1"===t&&e.url("/login"),"Username taken."}return n.crud.create(t).then(r)}var n=this;return n.crud=new t("user"),{register:r}}angular.module("app").factory("registerService",e),e.$inject=["$location","crudService"]}(),function(){"use strict";function e(e){function t(e){r.name=e.name===!1?"Login":e.name,r.url=e.url}var r=this;r.name="",r.url="",e.getUser().then(t)}angular.module("app").controller("HeaderController",e),e.$inject=["headerService"]}(),function(){"use strict";function e(){function e(e,t,r){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t){function r(){function r(e){return"false"===e.data?{name:"Login",url:"#/login"}:{name:e.data,url:"#/dashboard"}}function n(e){return t.error(e),"Something went wrong. Please try again."}return e.get("api/session/sessionVarManager.php?var=name").then(r)["catch"](n)}return{getUser:r}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,r){function n(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(r.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCIkbG9jYXRpb24iLCJhcHBTZXJ2aWNlIiwiY2hlY2tBdXRoZW50aWNhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJpc0F1dGhlbnRpY2F0ZWQiLCIkb24iLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXJBcyIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzZXNzaW9uU2VydmljZSIsImlzQXV0aGVudGljYXRlZENvbXBsZXRlIiwicmVzcG9uc2UiLCJkYXRhIiwidXJsIiwiZ2V0VmFyIiwidGhlbiIsImZhY3RvcnkiLCJjcnVkU2VydmljZSIsIiRodHRwIiwiJGxvZyIsImluaXQiLCJ0eXBlIiwidGhpcyIsImJhc2UiLCJnZXQiLCJpZCIsInByb21pc2VDb21wbGV0ZSIsInByb21pc2VGYWlsZWQiLCJjcmVhdGUiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicmVtb3ZlIiwiZXJyb3IiLCJjcnVkIiwicHJvdG90eXBlIiwiJG5hbWUiLCJ2bSIsInNldFZhciIsIiR2YWx1ZSIsImNvbXBhcmVUbyIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJjbGVhblVwIiwidW5iaW5kV2F0Y2giLCJjb21wYXJlVmFsdWVzIiwidmlld1ZhbHVlIiwib3RoZXJNb2RlbCIsIiR2aWV3VmFsdWUiLCJ2YWxpZGF0ZU9uQ2hhbmdlIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsIiR2YWxpZGF0ZSIsIiR3YXRjaCIsIiR2YWxpZGF0b3JzIiwic3BDb21wYXJlVG8iLCJvbiIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJMb2dpbkNvbnRyb2xsZXIiLCJsb2dpblNlcnZpY2UiLCJsb2dpbiIsImxvZ2luQ29tcGxldGUiLCJsb2FkaW5nIiwidXNlciIsImxvZ2luRmFpbGVkIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJIZWFkZXJDb250cm9sbGVyIiwiaGVhZGVyU2VydmljZSIsImdldFVzZXJDb21wbGV0ZSIsIm5hbWUiLCJnZXRVc2VyIiwiaGVhZGVyRGlyZWN0aXZlIiwiYmluZFRvQ29udHJvbGxlciIsImdldE5hbWVDb21wbGV0ZSIsImdldE5hbWVGYWlsZWQiLCJTaWRlYmFyQ29udHJvbGxlciIsImNvbGxhcHNlZCIsInRvZ2dsZVNpZGViYXIiLCJzaWRlYmFyRGlyZWN0aXZlIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQyxZQU9BLFNBQVNBLEdBQWNDLEVBQVlDLEVBQVdDLEdBRzdDLFFBQVNDLEtBQ1JDLFFBQVFDLElBQUksaUJBQ1pILEVBQVdJLGtCQUpaTixFQUFXTyxJQUFJLHVCQUF3QkosR0FOeENLLFFBQ0VDLE9BQU8sT0FBUSxZQUNmQyxXQUFXLGdCQUFpQlgsR0FFOUJBLEVBQWNZLFNBQVcsYUFBYyxZQUFhLGlCQVVyRCxXQUNDLFlBT0EsU0FBU0MsR0FBT0MsR0FDZkEsRUFDRUMsS0FBSyxVQUNMQyxZQUFhLDJCQUNiTCxXQUFZLGtCQUNaTSxhQUFjLE9BRWRGLEtBQUssV0FDTEMsWUFBYSw2QkFDYkwsV0FBWSxtQkFDWk0sYUFBYyxPQUVkRixLQUFLLGFBQ0xDLFlBQWEsK0JBQ2JMLFdBQVkscUJBQ1pNLGFBQWMsT0FFZEYsS0FBSyxjQUNMQyxZQUFhLGlDQUNiTCxXQUFZLHNCQUNaTSxhQUFjLE9BRWRDLFdBQ0FDLFdBQVksZUE1QmZWLFFBQ0VDLE9BQU8sT0FDUEcsT0FBT0EsR0FFVEEsRUFBT0QsU0FBVyxxQkE0Qm5CLFdBQ0MsWUFPQSxTQUFTVCxHQUFXRCxFQUFXa0IsR0FLOUIsUUFBU2IsS0FJUixRQUFTYyxHQUF3QkMsR0FDVixVQUFs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LEVBQWMxRSxTQUFXLFFBQVMsV0E2Qm5DLFdBQ0MsWUFNQSxTQUFTa0YsS0FDUixHQUFJOUMsR0FBS2YsSUFFVGUsR0FBRytDLFdBQVksRUFFZi9DLEVBQUdnRCxjQUFnQixXQUNsQmhELEVBQUcrQyxXQUFhL0MsRUFBRytDLFdBVnJCdEYsUUFDRUMsT0FBTyxPQUNQQyxXQUFXLG9CQUFxQm1GLE1BWW5DLFdBQ0MsWUFNQSxTQUFTRyxLQVNSLFFBQVM3QyxHQUFLQyxFQUFPQyxFQUFTQyxHQUc3QixRQUFTeUMsR0FBY0QsR0FDbEJBLEVBQ0h6QyxFQUFRNEMsWUFBWSxhQUVwQjVDLEVBQVE2QyxTQUFTLGFBTm5COUMsRUFBTWMsT0FBT1osRUFBTTBDLGlCQUFrQkQsR0FUdEMsT0FDQzVDLEtBQU1BLEVBQ05wQyxZQUFhLG9DQUNiTCxXQUFZLG9CQUNaTSxhQUFjLEtBQ2QwRSxrQkFBa0IsR0FWcEJsRixRQUNFQyxPQUFPLE9BQ1A2RCxVQUFVLFlBQWEwQiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJ10pXHJcblx0XHQuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIEFwcENvbnRyb2xsZXIpO1xyXG5cclxuXHRBcHBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJ2FwcFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBBcHBDb250cm9sbGVyKCRyb290U2NvcGUsICRsb2NhdGlvbiwgYXBwU2VydmljZSkge1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgY2hlY2tBdXRoZW50aWNhdGlvbik7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY2hlY2tBdXRoZW50aWNhdGlvbigpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2NoYW5nZWQgcm91dGUnKTtcclxuXHRcdFx0YXBwU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbmZpZyhjb25maWcpO1xyXG5cclxuXHRjb25maWcuJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcclxuXHRmdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuXHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdC53aGVuKCcvbG9naW4nLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL2xvZ2luL2xvZ2luLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2xvZ291dCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9nb3V0L2xvZ291dC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9kYXNoYm9hcmQnLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0Lm90aGVyd2lzZSh7XHJcblx0XHRcdFx0cmVkaXJlY3RUbzogJy9kYXNoYm9hcmQnXHJcblx0XHRcdH0pO1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnYXBwU2VydmljZScsIGFwcFNlcnZpY2UpO1xyXG5cclxuXHRhcHBTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICdzZXNzaW9uU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGFwcFNlcnZpY2UoJGxvY2F0aW9uLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWRcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xyXG5cdFx0XHRzZXNzaW9uU2VydmljZS5nZXRWYXIoJ25hbWUnKVxyXG5cdFx0XHRcdC50aGVuKGlzQXV0aGVudGljYXRlZENvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZENvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEgPT09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdCRsb2NhdGlvbi51cmwoJy9sb2dpbicpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2F1dGhlbnRpY2F0ZWQhIScpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3MgdGhlIGFwaSBvZiB0aGUgdmFyaW91cyBpdGVtIHR5cGVzLlxyXG5cdCogQW4gaW5zdGFuY2Ugb2YgY3J1ZCBtdXN0IGJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gdXNlIHRoZSBzZXJ2aWNlLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnY3J1ZFNlcnZpY2UnLCBjcnVkU2VydmljZSk7XHJcblxyXG5cdGNydWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBjcnVkU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIGNydWQgPSBpbml0O1xyXG5cdFx0Y3J1ZC5wcm90b3R5cGUgPSB7XHJcblx0XHRcdGdldDogZ2V0LFxyXG5cdFx0XHRjcmVhdGU6IGNyZWF0ZSxcclxuXHRcdFx0dXBkYXRlOiB1cGRhdGUsXHJcblx0XHRcdHJlbW92ZTogcmVtb3ZlXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjcnVkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW0ge3N0cmluZ30gdHlwZVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGluaXQodHlwZSkge1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLycgKyB0eXBlICsgJy8nICsgdHlwZSArICdNYW5hZ2VyLnBocCc7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZ2V0LlxyXG5cdFx0KiBAcmV0dXJuXHR7bWl4ZWRbXXxzdHJpbmd9XHRRdWVyeSByZXN1bHRzIG9yIFwiZmFsc2VcIiBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGdldChpZCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KHRoaXMuYmFzZSArICc/aWQ9JyArIGlkKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIGNyZWF0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ31cdFx0XHRcIjFcIiBvbiBzdWNjZXNzIG9yIFwiZmFsc2VcIiBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KHRoaXMuYmFzZSwgZGF0YSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0aWRcdFx0SUQgb2YgaXRlbSB0eXBlIHRvIHVwZGF0ZS5cclxuXHRcdCogQHBhcmFtXHR7bWl4ZWRbXX1cdGRhdGFcdERhdGEgb2YgaXRlbSB0byB1cGRhdGUuXHJcblx0XHQqXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9XHRcdFx0XCIxXCIgb24gc3VjY2VzcyBvciBcImZhbHNlXCIgb24gZmFpbHVyZS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiB1cGRhdGUoaWQsIGRhdGEpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnB1dCh0aGlzLmJhc2UgKyAnP2lkPScgKyBpZCwgZGF0YSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0aWRcdFx0SUQgb2YgaXRlbSB0eXBlIHRvIGRlbGV0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ31cdFx0XHRcIjFcIiBvbiBzdWNjZXNzIG9yIFwiZmFsc2VcIiBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZShpZCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/aWQ9JyArIGlkKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3Mgc2Vzc2lvbiB2YXJpYWJsZXMuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdzZXNzaW9uU2VydmljZScsIHNlc3Npb25TZXJ2aWNlKTtcclxuXHJcblx0c2Vzc2lvblNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIHNlc3Npb25TZXJ2aWNlKCRodHRwLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5iYXNlID0gJ2FwaS9zZXNzaW9uL3Nlc3Npb25WYXJNYW5hZ2VyLnBocD92YXI9JztcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXRWYXI6IGdldFZhcixcclxuXHRcdFx0c2V0VmFyOiBzZXRWYXJcclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSAge3N0cmluZ30gJG5hbWUgVmFyaWFibGUgbmFtZSB0byBnZXQgZnJvbSBzZXNzaW9uLlxyXG5cdFx0KiBAcmV0dXJuIHtzdHJpbmd9IFx0XHQgVmFyaWFibGUgdmFsdWUgb3IgZmFsc2Ugb24gZmFpbHVyZS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRWYXIoJG5hbWUpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh2bS5iYXNlICsgJG5hbWUpXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIHtzdHJpbmd9ICRuYW1lIFZhcmlhYmxlIG5hbWUgdG8gZ2V0IGZyb20gc2Vzc2lvbi5cclxuXHRcdCogQHJldHVybiB7Ym9vbH0gXHRcdFRydWUgb24gc3VjY2VzcyBvciBmYWxzZSBvbiBmYWlsdXJlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHNldFZhcigkbmFtZSwgJHZhbHVlKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KHZtLmJhc2UgKyAkbmFtZSwgJHZhbHVlKVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBDb21wYXJlIGFuIGlucHV0IGZpZWxkIHRvIGFub3RoZXIgZmllbGQsIGRldGVybWluZWQgYnkgdGhlIGRldi5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BDb21wYXJlVG8nLCBjb21wYXJlVG8pO1xyXG5cclxuXHRmdW5jdGlvbiBjb21wYXJlVG8oKSB7XHJcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xyXG5cdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXHJcblx0XHRcdHNjb3BlOiB7XHJcblx0XHRcdFx0b3RoZXJNb2RlbDogJz1zcENvbXBhcmVUbydcclxuXHRcdFx0fSxcclxuXHRcdFx0bGluazogbGlua1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuXHRcdFx0dmFyIHVuYmluZFdhdGNoID0gc2NvcGUuJHdhdGNoKCdvdGhlck1vZGVsJywgdmFsaWRhdGVPbkNoYW5nZSk7XHJcblx0XHRcdG5nTW9kZWwuJHZhbGlkYXRvcnMuc3BDb21wYXJlVG8gPSBjb21wYXJlVmFsdWVzO1xyXG5cdFx0XHRlbGVtZW50Lm9uKCckZGVzdHJveScsIGNsZWFuVXApO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY2xlYW5VcCgpIHtcclxuXHRcdFx0XHR1bmJpbmRXYXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjb21wYXJlVmFsdWVzKHZpZXdWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiAodmlld1ZhbHVlID09PSBzY29wZS5vdGhlck1vZGVsLiR2aWV3VmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB2YWxpZGF0ZU9uQ2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG5cdFx0XHRcdG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XHJcblxyXG5cdExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWydsb2dpblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIobG9naW5TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5sb2dpbiA9IGxvZ2luO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0bG9naW5TZXJ2aWNlLmxvZ2luKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4obG9naW5Db21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XHJcblxyXG5cdGxvZ2luU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9jYXRpb24nLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGxvZ2luU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJ2FwaS9tYW5hZ2Vycy9sb2dpbk1hbmFnZXIucGhwJywgdXNlcilcclxuXHRcdFx0XHQudGhlbihsb2dpbkNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChsb2dpbkZhaWxlZCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEgPT09IFwidHJ1ZVwiKSB7XHJcblx0XHRcdFx0XHQkbG9jYXRpb24udXJsKCcvZGFzaGJvYXJkJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAnVXNlcm5hbWUgb3IgcGFzc3dvcmQgd2FzIGluY29ycmVjdC4nO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkZhaWxlZChlcnJvcikge1xyXG5cdFx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRcdHJldHVybiAnU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uJztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBEYXNoYm9hcmRDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHtcclxuXHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsncmVnaXN0ZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKHJlZ2lzdGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdHZtLmVycm9yID0gJyc7XHJcblxyXG5cdFx0dm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcclxuXHJcblx0XHRmdW5jdGlvbiByZWdpc3RlcigpIHtcclxuXHRcdFx0dm0ubG9hZGluZyA9IHRydWU7XHJcblx0XHRcdHJlZ2lzdGVyU2VydmljZS5yZWdpc3Rlcih2bS51c2VyKVxyXG5cdFx0XHRcdC50aGVuKHJlZ2lzdHJhdGlvbkNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3JlZ2lzdGVyU2VydmljZScsIHJlZ2lzdGVyU2VydmljZSk7XHJcblxyXG5cdHJlZ2lzdGVyU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnY3J1ZFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiByZWdpc3RlclNlcnZpY2UoJGxvY2F0aW9uLCBjcnVkU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uY3J1ZCA9IG5ldyBjcnVkU2VydmljZSgndXNlcicpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlZ2lzdGVyOiByZWdpc3RlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByZWdpc3Rlcih1c2VyKSB7XHJcblx0XHRcdHJldHVybiB2bS5jcnVkLmNyZWF0ZSh1c2VyKVxyXG5cdFx0XHRcdC50aGVuKHJlZ2lzdHJhdGlvbkNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlID09PSBcIjFcIikge1xyXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnVybCgnL2xvZ2luJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAnVXNlcm5hbWUgdGFrZW4uJztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbICdoZWFkZXJTZXJ2aWNlJyBdO1xyXG5cdGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoaGVhZGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLm5hbWUgPSAnJztcclxuXHRcdHZtLnVybCA9ICcnO1xyXG5cclxuXHRcdGhlYWRlclNlcnZpY2UuZ2V0VXNlcigpXHJcblx0XHRcdC50aGVuKGdldFVzZXJDb21wbGV0ZSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlckNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZtLm5hbWUgPSAocmVzcG9uc2UubmFtZSA9PT0gZmFsc2UpID8gJ0xvZ2luJyA6IHJlc3BvbnNlLm5hbWU7XHJcblx0XHRcdHZtLnVybCA9IHJlc3BvbnNlLnVybDtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BIZWFkZXInLCBoZWFkZXJEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBoZWFkZXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9oZWFkZXIvaGVhZGVyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnaGVhZGVyU2VydmljZScsIGhlYWRlclNlcnZpY2UpO1xyXG5cclxuXHRoZWFkZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBoZWFkZXJTZXJ2aWNlKCRodHRwLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCdhcGkvc2Vzc2lvbi9zZXNzaW9uVmFyTWFuYWdlci5waHA/dmFyPW5hbWUnKVxyXG5cdFx0XHRcdC50aGVuKGdldE5hbWVDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2goZ2V0TmFtZUZhaWxlZCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnZXROYW1lQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YSA9PT0gJ2ZhbHNlJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtuYW1lOiAnTG9naW4nLCB1cmw6ICcjL2xvZ2luJ307XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4ge25hbWU6IHJlc3BvbnNlLmRhdGEsIHVybDogJyMvZGFzaGJvYXJkJ307XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldE5hbWVGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0XHRyZXR1cm4gJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsIFNpZGViYXJDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gU2lkZWJhckNvbnRyb2xsZXIoKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmNvbGxhcHNlZCA9IHRydWU7XHJcblxyXG5cdFx0dm0udG9nZ2xlU2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2bS5jb2xsYXBzZWQgPSAhdm0uY29sbGFwc2VkO1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BTaWRlYmFyJywgc2lkZWJhckRpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHNpZGViYXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9zaWRlYmFyL3NpZGViYXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdTaWRlYmFyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0XHRzY29wZS4kd2F0Y2goYXR0cnMuc2lkZWJhckRpcmVjdGl2ZSwgdG9nZ2xlU2lkZWJhcik7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGlmIChjb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
