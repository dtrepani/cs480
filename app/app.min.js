!function(){"use strict";function e(e,t){e.$on("$routeChangeError",t.routeChangeError)}angular.module("app",["ngRoute","ui.bootstrap","angularMoment"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function t(e){return e.getEvents()}function n(e){return e.getTasks()}function r(e){return e.isAuthenticated()}function a(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",r],tasks:["tasksService",n],events:["eventsService",t]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",a]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function n(n,r,a,o){o===t.UNAUTHORIZED?e.path("/login"):o===t.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:n}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e,t){function n(e){switch(this.type=e,this.base="api/",e){case"event":case"calendar":this.base+="activity/calendar/";break;case"label":case"task":this.base+="activity/task/";break;default:this.base+=e+"/"}this.base+=e+"Manager.php"}function r(t){return e.get(this.base+"?id="+t).then(u)["catch"](l)}function a(t,n){return e.get(this.base+"?usewhere=true&where="+escape(t)+"&id="+n).then(u)["catch"](l)}function o(t){return t=this.removeUnecessaryKeys(t),e.post(this.base,t).then(u)["catch"](l)}function i(t,n){return n=this.removeUnecessaryKeys(n),e.put(this.base+"?id="+t,n).then(u)["catch"](l)}function c(t){return e["delete"](this.base+"?id="+t).then(u)["catch"](l)}function s(t,n){return e["delete"](this.base+"?where=true&id="+n,t).then(u)["catch"](l)}function u(e){return e}function l(e){return t.error(e),{success:"false",title:"Error when querying server.",message:e}}function d(e){for(var t=["id","person_id",this.type+"_id","activity_info_id","parent_name"],n=0;n<t.length;n++)delete e[t[n]];return e}var f=n;return f.prototype={get:r,getWhere:a,create:o,update:i,remove:c,removeWhere:s,removeUnecessaryKeys:d},f}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function n(t){return e.get(i.base+t).then(a)["catch"](o)}function r(t,n){return e.post(i.base+t,n).then(a)["catch"](o)}function a(e){return e}function o(e){return t.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:n,setVar:r}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t,n){function r(){s.today=e.getToday(),s.selectedDay=s.today,s.month=e.getMonth(s.today)}function a(t){return e.isSameDay(t.fullDate,s.selectedDay)}function o(e){s.selectedDay=e.fullDate}function i(e){n.openEventModal(e).then(c)}function c(e){e&&(s.events=e)}var s=this;s.isSameDayAsSelected=a,s.selectDay=o,s.showEventModal=i,r()}angular.module("app").controller("EventsController",e),e.$inject=["calendarWidgetService","eventsService","eventModalService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/events/events.html",controller:"EventsController",controllerAs:"vm",bindToController:!0,scope:{events:"=",order:"="}}}angular.module("app").directive("spEvents",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return l.event.create(e).then(u)}function o(e){return e.event_id?s(e.event_id,e):a(e)}function i(e){return l.event.remove(e).then(u)}function c(){function e(e){var t=e.data;return t.success?l.event.getWhere("",t.data).then(u):t.title}return r.getVar("id").then(e)}function s(e,t){return l.event.update(e,t).then(u)}function u(e){var t=e.data;return t.success?t.data:t.title}var l=this;return l.event=new n("event"),{createEvent:a,createOrUpdateEvent:o,deleteEvent:i,getEvents:c,updateEvent:s}}angular.module("app").factory("eventsService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(){function e(e,t,n,r){function a(){c()}function o(t){return t===e.otherModel.$viewValue}function i(e,t){r.$validate()}var c=e.$watch("otherModel",i);r.$validators.spCompareTo=o,t.on("$destroy",a)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){n.loading=!0,e.login(n.user).then(function(e){n.loading=!1,n.error=e})}var n=this;n.loading=!1,n.error="",n.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,n){function r(r){function a(e){return e.data.success===!1?e.data.title:void t.path("/dashboard")}function o(e){return n.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",r).then(a)["catch"](o)}return{login:r}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e,t,n){function r(){e.close()}function a(){e.dismiss("cancel")}function o(t){e.dismiss(t)}function i(t){e.close(t)}var c=this;c.groups=t,c.item=n,c.close=r,c.cancel=a,c.confirm=i,c.remove=o}angular.module("app").controller("ModalController",e),e.$inject=["$uibModalInstance","groups","item"]}(),function(){"use strict";function e(e,t){function n(e){t.openTaskModal(e).then(a)}function r(t){e.toggleCompleted(t).then(a)}function a(e){e&&(o.tasks=e)}var o=this;o.showTaskModal=n,o.toggleCompleted=r}angular.module("app").controller("TasksController",e),e.$inject=["tasksService","taskModalService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0,scope:{tasks:"=",order:"="}}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return d.task.create(e).then(l)}function o(e){return e.task_id?u(e.task_id,e):a(e)}function i(e){return d.task.remove(e).then(l)}function c(){function e(e){var t=e.data;return t.success?d.task.getWhere("",t.data).then(l):t.title}return r.getVar("id").then(e)}function s(e){return e.completed=!parseInt(e.completed),u(e.task_id,e).then(c)}function u(e,t){return d.task.update(e,t).then(l)}function l(e){var t=e.data;return t.success?t.data:t.title}var d=this;return d.task=new n("task"),{createTask:a,createOrUpdateTask:o,deleteTask:i,getTasks:c,toggleCompleted:s,updateTask:u}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t,n){var r=this;r.tasks=t,r.events=n}angular.module("app").controller("DashboardController",e),e.$inject=["isAuthenticated","tasks","events"]}(),function(){"use strict";function e(e){function t(){n.loading=!0,e.register(n.user).then(function(e){n.loading=!1,n.error=e})}var n=this;n.error="",n.loading=!1,n.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t,n){function r(n){function r(n){return"false"===n.success?(t.error(n.title),n.title):void e.url("/login")}return a.crud.create(n).then(r)}var a=this;return a.crud=new n("user"),{register:r}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e,t,n,r){function a(){function e(e){return e.data.success!==!1?i.resolve(r.OK):i.reject(r.UNAUTHORIZED),i.promise}return n.getVar("name").then(e)}function o(){}var i=t.defer();return{isAuthenticated:a,isAdmin:o}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,t,n,r){function a(e){return u.calendar.create(e).then(s)}function o(e){return u.calendar.remove(e).then(s)}function i(){function e(e){var t=e.data;return t.success?u.calendar.getWhere("person_id="+t.data,"").then(s):t.title}return r.getVar("id").then(e)}function c(e,t){return u.calendar.update(e,t).then(s)}function s(e){var t=e.data;return t.success?t.data:t.title}var u=this;return u.calendar=new n("calendar"),{createCalendar:a,deleteCalendar:o,getCalendars:i,updateCalendar:c}}angular.module("app").factory("calendarService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t,n){function r(r){return angular.isString(r.due)&&(r.due=new Date(r.due.replace(/(.+) (.+)/,"$1T$2Z"))),angular.isString(r.reminder)&&(r.reminder=new Date(r.reminder.replace(/(.+) (.+)/,"$1T$2Z"))),e.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/events/modal/event.modal.html",resolve:{groups:t.getCalendars(),item:r}}).result.then(function(e){return n.createOrUpdateEvent(e).then(n.getEvents)},function(e){return"string"!=typeof e?n.deleteEvent(e).then(n.getEvents):void 0})}return{openEventModal:r}}angular.module("app").factory("eventModalService",e),e.$inject=["$uibModal","calendarService","eventsService"]}(),function(){"use strict";function e(e){function t(e){for(var t=[],n=e.clone().date(1).startOf("week"),a=e.month();a===e.month();a=n.month())t.push(r(n,e.month())),n=n.add(1,"weeks");return t}function n(){return e()}function r(t,n){for(var r=[],a=t.clone(),o=0;7>o;o++)r.push({number:a.date(),isTargetMonth:a.month()===n,isToday:a.isSame(e(),"day"),fullDate:a}),a=a.clone().add(1,"days");return r}function a(e,t){return e.isSame(t,"day")}return{getMonth:t,getWeek:r,getToday:n,isSameDay:a}}angular.module("app").factory("calendarWidgetService",e),e.$inject=["moment"]}(),function(){"use strict";function e(e,t,n,r){function a(e){return u.label.create(e).then(s)}function o(e){return u.label.remove(e).then(s)}function i(){function e(e){var t=e.data;return t.success?u.label.getWhere("person_id="+t.data,"").then(s):t.title}return r.getVar("id").then(e)}function c(e,t){return u.label.update(e,t).then(s)}function s(e){var t=e.data;return t.success?t.data:t.title}var u=this;return u.label=new n("label"),{createLabel:a,deleteLabel:o,getLabels:i,updateLabel:c}}angular.module("app").factory("labelService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(e,t,n){function r(r){return angular.isString(r.due)&&(r.due=new Date(r.due.replace(/(.+) (.+)/,"$1T$2Z"))),angular.isString(r.reminder)&&(r.reminder=new Date(r.reminder.replace(/(.+) (.+)/,"$1T$2Z"))),e.open({controller:"ModalController",controllerAs:"vm",templateUrl:"modules/tasks/modal/task.modal.html",resolve:{groups:t.getLabels(),item:r}}).result.then(function(e){return n.createOrUpdateTask(e).then(n.getTasks)},function(e){return"string"!=typeof e?n.deleteTask(e).then(n.getTasks):void 0})}return{openTaskModal:r}}angular.module("app").factory("taskModalService",e),e.$inject=["$uibModal","labelService","tasksService"]}(),function(){"use strict";function e(e,t){function n(t){e.$evalAsync(function(){r.name=t.name===!1?"Login":t.name,r.url=t.url})}var r=this;r.name="",r.url="",t.getUser().then(n)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,t,n){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t,n){function r(){function e(e){var t=e.data;return t.success===!1?{name:!1,url:"#/login"}:{name:t.data,url:"#/dashboard"}}return n.getVar("name").then(e)}return{getUser:r}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,n){function r(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(n.sidebarDirective,r)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiZ2V0RXZlbnRzIiwiZXZlbnRzU2VydmljZSIsImdldFRhc2tzIiwidGFza3NTZXJ2aWNlIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwidGFza3MiLCJldmVudHMiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiY29uZmlnIiwiJGxvY2F0aW9uIiwic3RhdHVzU2VydmljZSIsImV2ZW50IiwiY3VycmVudCIsInByZXZpb3VzIiwicmVqZWN0aW9uIiwiVU5BVVRIT1JJWkVEIiwicGF0aCIsIkZPUkJJRERFTiIsImZhY3RvcnkiLCJjcnVkU2VydmljZSIsIiRodHRwIiwiJGxvZyIsImluaXQiLCJ0eXBlIiwidGhpcyIsImJhc2UiLCJnZXQiLCJpZCIsInRoZW4iLCJwcm9taXNlQ29tcGxldGUiLCJwcm9taXNlRmFpbGVkIiwiZ2V0V2hlcmUiLCJ3aGVyZSIsInVzZXJJRCIsImVzY2FwZSIsImNyZWF0ZSIsImRhdGEiLCJyZW1vdmVVbmVjZXNzYXJ5S2V5cyIsInBvc3QiLCJ1cGRhdGUiLCJwdXQiLCJyZW1vdmUiLCJyZW1vdmVXaGVyZSIsInJlc3BvbnNlIiwiZXJyb3IiLCJzdWNjZXNzIiwidGl0bGUiLCJtZXNzYWdlIiwidG9EZWxldGUiLCJpIiwibGVuZ3RoIiwiY3J1ZCIsInByb3RvdHlwZSIsInNlc3Npb25TZXJ2aWNlIiwiZ2V0VmFyIiwiJG5hbWUiLCJ2bSIsInNldFZhciIsIiR2YWx1ZSIsIkV2ZW50c0NvbnRyb2xsZXIiLCJjYWxlbmRhcldpZGdldFNlcnZpY2UiLCJldmVudE1vZGFsU2VydmljZSIsImFjdGl2YXRlIiwidG9kYXkiLCJnZXRUb2RheSIsInNlbGVjdGVkRGF5IiwibW9udGgiLCJnZXRNb250aCIsImlzU2FtZURheUFzU2VsZWN0ZWQiLCJkYXkiLCJpc1NhbWVEYXkiLCJmdWxsRGF0ZSIsInNlbGVjdERheSIsInNob3dFdmVudE1vZGFsIiwib3BlbkV2ZW50TW9kYWwiLCJ1cGRhdGVFdmVudHMiLCJldmVudHNEaXJlY3RpdmUiLCJiaW5kVG9Db250cm9sbGVyIiwic2NvcGUiLCJvcmRlciIsImRpcmVjdGl2ZSIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlT3JVcGRhdGVFdmVudCIsImV2ZW50X2lkIiwidXBkYXRlRXZlbnQiLCJkZWxldGVFdmVudCIsImdldEV2ZW50V2l0aFVzZXJJRCIsInJlcyIsImNvbXBhcmVUbyIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ01vZGVsIiwiY2xlYW5VcCIsInVuYmluZFdhdGNoIiwiY29tcGFyZVZhbHVlcyIsInZpZXdWYWx1ZSIsIm90aGVyTW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsaWRhdGVPbkNoYW5nZSIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCIkdmFsaWRhdGUiLCIkd2F0Y2giLCIkdmFsaWRhdG9ycyIsInNwQ29tcGFyZVRvIiwib24iLCJyZXF1aXJlIiwiTG9naW5Db250cm9sbGVyIiwibG9naW5TZXJ2aWNlIiwibG9naW4iLCJsb2FkaW5nIiwidXNlciIsImxvZ2luQ29tcGxldGUiLCJsb2dpbkZhaWxlZCIsIk1vZGFsQ29udHJvbGxlciIsIiR1aWJNb2RhbEluc3RhbmNlIiwiZ3JvdXBzIiwiaXRlbSIsImNsb3NlIiwiY2FuY2VsIiwiZGlzbWlzcyIsImNvbmZpcm0iLCJUYXNrc0NvbnRyb2xsZXIiLCJ0YXNrTW9kYWxTZXJ2aWNlIiwic2hvd1Rhc2tNb2RhbCIsInRhc2siLCJvcGVuVGFza01vZGFsIiwidXBkYXRlVGFza3MiLCJ0b2dnbGVDb21wbGV0ZWQiLCJ0YXNrc0RpcmVjdGl2ZSIsImNyZWF0ZVRhc2siLCJjcmVhdGVPclVwZGF0ZVRhc2siLCJ0YXNrX2lkIiwidXBkYXRlVGFzayIsImRlbGV0ZVRhc2siLCJnZXRUYXNrV2l0aFVzZXJJRCIsImNvbXBsZXRlZCIsInBhcnNlSW50IiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJ1cmwiLCIkcSIsImlzQXV0aGVudGljYXRlZENvbXBsZXRlIiwiZGVmZXJyZWQiLCJPSyIsInJlamVjdCIsInByb21pc2UiLCJkZWZlciIsInNlcnZpY2UiLCJjYWxlbmRhclNlcnZpY2UiLCJjcmVhdGVDYWxlbmRhciIsImNhbGVuZGFyIiwiZGVsZXRlQ2FsZW5kYXIiLCJnZXRDYWxlbmRhcnMiLCJnZXRDYWxlbmRhcldpdGhVc2VySUQiLCJ1cGRhdGVDYWxlbmRhciIsIiR1aWJNb2RhbCIsImlzU3RyaW5nIiwiZHVlIiwiRGF0ZSIsInJlcGxhY2UiLCJyZW1pbmRlciIsIm9wZW4iLCJyZXN1bHQiLCJtb21lbnQiLCJhRGF5IiwiY2xvbmUiLCJkYXRlIiwic3RhcnRPZiIsInB1c2giLCJnZXRXZWVrIiwiYWRkIiwic3RhcnREYXkiLCJ0YXJnZXRNb250aCIsIndlZWsiLCJudW1iZXIiLCJpc1RhcmdldE1vbnRoIiwiaXNUb2RheSIsImlzU2FtZSIsImRheTEiLCJkYXkyIiwibGFiZWxTZXJ2aWNlIiwiY3JlYXRlTGFiZWwiLCJsYWJlbCIsImRlbGV0ZUxhYmVsIiwiZ2V0TGFiZWxzIiwiZ2V0TGFiZWxXaXRoVXNlcklEIiwidXBkYXRlTGFiZWwiLCJIZWFkZXJDb250cm9sbGVyIiwiJHNjb3BlIiwiaGVhZGVyU2VydmljZSIsImdldFVzZXJDb21wbGV0ZSIsIiRldmFsQXN5bmMiLCJuYW1lIiwiZ2V0VXNlciIsImhlYWRlckRpcmVjdGl2ZSIsImdldE5hbWVDb21wbGV0ZSIsIlNpZGViYXJDb250cm9sbGVyIiwiY29sbGFwc2VkIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJEaXJlY3RpdmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBT0EsU0FBU0EsR0FBY0MsRUFBWUMsR0FDbENELEVBQVdFLElBQUksb0JBQXFCRCxFQUFXRSxrQkFOaERDLFFBQ0VDLE9BQU8sT0FBUSxVQUFXLGVBQWdCLGtCQUMxQ0MsV0FBVyxnQkFBaUJQLEdBRTlCQSxFQUFjUSxTQUFXLGFBQWMsaUJBS3hDLFdBQ0MsWUFPQSxTQUFTQyxHQUFVQyxHQXVDbEIsUUFBU0MsR0FBVUMsR0FDbEIsTUFBT0EsR0FBY0QsWUFHdEIsUUFBU0UsR0FBU0MsR0FDakIsTUFBT0EsR0FBYUQsV0FHckIsUUFBU0UsR0FBZ0JDLEdBQ3hCLE1BQU9BLEdBQWNELGtCQUd0QixRQUFTRSxHQUFRRCxHQUNoQixNQUFPQSxHQUFjQyxVQW5EdEJQLEVBQ0VRLEtBQUssVUFDTEMsWUFBYSwyQkFDYlosV0FBWSxrQkFDWmEsYUFBYyxPQUVkRixLQUFLLFdBQ0xDLFlBQWEsNkJBQ2JaLFdBQVksbUJBQ1phLGFBQWMsT0FFZEYsS0FBSyxhQUNMQyxZQUFhLCtCQUNiWixXQUFZLHFCQUNaYSxhQUFjLE9BRWRGLEtBQUssY0FDTEMsWUFBYSxpQ0FDYlosV0FBWSxzQkFDWmEsYUFBYyxLQUNkQyxTQUNDTixpQkFBa0IsZ0JBQWlCQSxHQUNuQ08sT0FBUSxlQUFnQlQsR0FDeEJVLFFBQVMsZ0JBQWlCWixNQUczQk8sS0FBSyxVQUNMQyxZQUFhLHlCQUNiWixXQUFZLGtCQUNaYSxhQUFjLEtBQ2RDLFNBQ0NKLFNBQVUsZ0JBQWlCQSxNQUc1Qk8sV0FDQUMsV0FBWSxXQXpDZnBCLFFBQ0VDLE9BQU8sT0FDUG9CLE9BQU9qQixHQUVUQSxFQUFVRCxTQUFXLHFCQXlEdEIsV0FDQyxZQU9BLFNBQVNOLEdBQVd5QixFQUFXQyxHQUs5QixRQUFTeEIsR0FBaUJ5QixFQUFPQyxFQUFTQyxFQUFVQyxHQUMvQ0EsSUFBY0osRUFBY0ssYUFD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QixPQUFPWixFQUFNaUgsaUJBQWtCRCxHQVR0QyxPQUNDbEgsS0FBTUEsRUFDTnhGLFlBQWEsb0NBQ2JaLFdBQVksb0JBQ1phLGFBQWMsS0FDZDJFLGtCQUFrQixHQVZwQjFGLFFBQ0VDLE9BQU8sT0FDUDRGLFVBQVUsWUFBYTRIIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnLCAndWkuYm9vdHN0cmFwJywgJ2FuZ3VsYXJNb21lbnQnXSlcclxuXHRcdC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgQXBwQ29udHJvbGxlcik7XHJcblxyXG5cdEFwcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICdhcHBTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkcm9vdFNjb3BlLCBhcHBTZXJ2aWNlKSB7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBhcHBTZXJ2aWNlLnJvdXRlQ2hhbmdlRXJyb3IpO1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG5cdGFwcENvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cdGZ1bmN0aW9uIGFwcENvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG5cdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9naW4vbG9naW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2xvZ291dCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9nb3V0L2xvZ291dC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9kYXNoYm9hcmQnLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdFx0aXNBdXRoZW50aWNhdGVkOiBbJ2FjY2Vzc1NlcnZpY2UnLCBpc0F1dGhlbnRpY2F0ZWRdLFxyXG5cdFx0XHRcdFx0dGFza3M6IFsndGFza3NTZXJ2aWNlJywgZ2V0VGFza3NdLFxyXG5cdFx0XHRcdFx0ZXZlbnRzOiBbJ2V2ZW50c1NlcnZpY2UnLCBnZXRFdmVudHNdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2FkbWluJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvYWRtaW4vYWRtaW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0FkbWluQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGlzQWRtaW46IFsnYWNjZXNzU2VydmljZScsIGlzQWRtaW5dXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRyZWRpcmVjdFRvOiAnL2xvZ2luJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRFdmVudHMoZXZlbnRzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gZXZlbnRzU2VydmljZS5nZXRFdmVudHMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcyh0YXNrc1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIHRhc2tzU2VydmljZS5nZXRUYXNrcygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChhY2Nlc3NTZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiBhY2Nlc3NTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQWRtaW4oYWNjZXNzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gYWNjZXNzU2VydmljZS5pc0FkbWluKCk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdhcHBTZXJ2aWNlJywgYXBwU2VydmljZSk7XHJcblxyXG5cdGFwcFNlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJ3N0YXR1c1NlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBhcHBTZXJ2aWNlKCRsb2NhdGlvbiwgc3RhdHVzU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cm91dGVDaGFuZ2VFcnJvcjogcm91dGVDaGFuZ2VFcnJvclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByb3V0ZUNoYW5nZUVycm9yKGV2ZW50LCBjdXJyZW50LCBwcmV2aW91cywgcmVqZWN0aW9uKSB7XHJcblx0XHRcdGlmIChyZWplY3Rpb24gPT09IHN0YXR1c1NlcnZpY2UuVU5BVVRIT1JJWkVEKSB7XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHJlamVjdGlvbiA9PT0gc3RhdHVzU2VydmljZS5GT1JCSURERU4pIHtcclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2ZvcmJpZGRlbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3MgdGhlIGFwaSBvZiB0aGUgdmFyaW91cyBpdGVtIHR5cGVzLlxyXG5cdCogQW4gaW5zdGFuY2Ugb2YgY3J1ZCBtdXN0IGJlIGNyZWF0ZWQgaW4gb3JkZXIgdG8gdXNlIHRoZSBzZXJ2aWNlLlxyXG5cdCpcclxuXHQqIEFsbCBwcm9taXNlcyByZXR1cm4gJ3N1Y2Nlc3MnIGFuZCBlaXRoZXIgJ2RhdGEnIG9uIHN1Y2Nlc3Mgb3IsIG9uIGVycm9yLCAndGl0bGUnXHJcblx0KiB3aXRoIGEgZ2VuZXJhbCBlcnJvciBhbmQgJ2RldGFpbHMnIHdpdGggbW9yZSBkZXRhaWxzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnY3J1ZFNlcnZpY2UnLCBjcnVkU2VydmljZSk7XHJcblxyXG5cdGNydWRTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBjcnVkU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIGNydWQgPSBpbml0O1xyXG5cdFx0Y3J1ZC5wcm90b3R5cGUgPSB7XHJcblx0XHRcdGdldDogZ2V0LFxyXG5cdFx0XHRnZXRXaGVyZTogZ2V0V2hlcmUsXHJcblx0XHRcdGNyZWF0ZTogY3JlYXRlLFxyXG5cdFx0XHR1cGRhdGU6IHVwZGF0ZSxcclxuXHRcdFx0cmVtb3ZlOiByZW1vdmUsXHJcblx0XHRcdHJlbW92ZVdoZXJlOiByZW1vdmVXaGVyZSxcclxuXHRcdFx0cmVtb3ZlVW5lY2Vzc2FyeUtleXM6IHJlbW92ZVVuZWNlc3NhcnlLZXlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjcnVkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBJbml0aWFsaXplIHRoZSBiYXNlIHVybCB1c2luZyB0aGUgdHlwZSBvZiBpdGVtIHRvIGJlIGNhbGxlZCBvbi5cclxuXHRcdCogQWN0aXZpdGllcyBhbmQgdGhlaXIgcGFyZW50cyBoYXZlIGEgc3BlY2lmaWMgc3ViZm9sZGVyIHRvIGJlIHBvaW50ZWQgdG8sXHJcblx0XHQqIHdoaWxlIG90aGVycyBkbyBub3QuXHJcblx0XHQqXHJcblx0XHQqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgaXRlbS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBpbml0KHR5cGUpIHtcclxuXHRcdFx0LyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xyXG5cdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLyc7XHJcblx0XHRcdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0XHRcdGNhc2UgJ2V2ZW50JzpcclxuXHRcdFx0XHRjYXNlICdjYWxlbmRhcic6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L2NhbGVuZGFyLyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsYWJlbCc6XHJcblx0XHRcdFx0Y2FzZSAndGFzayc6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L3Rhc2svJztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICcvJztcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICdNYW5hZ2VyLnBocCc7XHJcblx0XHRcdC8qIGpzaGludCBpZ25vcmU6ZW5kICovXHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBnZXQuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXQoaWQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh0aGlzLmJhc2UgKyAnP2lkPScgKyBpZCkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIFx0e3N0cmluZ31cdHdoZXJlIFx0V2hlcmUgY2xhdXNlLlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHR1c2VySURcdEZvciBhY3Rpdml0aWVzICh0YXNrcywgZXZlbnRzKSwgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0dXNlciBmb3IgdGhlIGFjdGl2aXR5LiBQYXNzIGVtcHR5IHN0cmluZ1xyXG5cdFx0Klx0XHRcdFx0XHRcdFx0XHRvdGhlcndpc2UuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRXaGVyZSh3aGVyZSwgdXNlcklEKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz91c2V3aGVyZT10cnVlJndoZXJlPScgKyBlc2NhcGUod2hlcmUpICsgJyZpZD0nICsgdXNlcklEKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIGNyZWF0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09IDEgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xyXG5cdFx0XHRkYXRhID0gdGhpcy5yZW1vdmVVbmVjZXNzYXJ5S2V5cyhkYXRhKTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh0aGlzLmJhc2UsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byB1cGRhdGUuXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gdXBkYXRlLlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGlkLCBkYXRhKSB7XHJcblx0XHRcdGRhdGEgPSB0aGlzLnJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdHJldHVybiAkaHR0cC5wdXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBkZWxldGUuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09PSAxIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSBcdHtzdHJpbmd9XHR3aGVyZSBcdFdoZXJlIGNsYXVzZS5cclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0dXNlcklEXHRGb3IgYWN0aXZpdGllcyAodGFza3MsIGV2ZW50cyksIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdHVzZXIgZm9yIHRoZSBhY3Rpdml0eS4gUGFzcyBlbXB0eSBzdHJpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0b3RoZXJ3aXNlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA+PSAwIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlV2hlcmUod2hlcmUsIHVzZXJJRCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/d2hlcmU9dHJ1ZSZpZD0nICsgdXNlcklELCB3aGVyZSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gcXVlcnlpbmcgc2VydmVyLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogSXRlbSBkYXRhIHBhc3NlZCBpbiBtYXkgc3RpbGwgaGF2ZSB0aGVpciBpZHMgb3IgYWxpYXMgZmllbGRzIChmb3IgYWN0aXZpdGllcylcclxuXHRcdCogZW1iZWRkZWQsIHdoaWNoIHdpbGwgY2FuIGNhdXNlIGVycm9ycyBpbiB0aGUgU1FMLlxyXG5cdFx0KlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfSBkYXRhXHJcblx0XHQqIEByZXR1cm5cdHttaXhlZFtdfVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHJlbW92ZVVuZWNlc3NhcnlLZXlzKGRhdGEpIHtcclxuXHRcdFx0dmFyIHRvRGVsZXRlID0gWydpZCcsICdwZXJzb25faWQnLCB0aGlzLnR5cGUgKyAnX2lkJywgJ2FjdGl2aXR5X2luZm9faWQnLCAncGFyZW50X25hbWUnXTsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRvRGVsZXRlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGFbdG9EZWxldGVbaV1dO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFVzZWQgdG8gYWNjZXNzIHNlc3Npb24gdmFyaWFibGVzLlxyXG5cdCovXHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnc2Vzc2lvblNlcnZpY2UnLCBzZXNzaW9uU2VydmljZSk7XHJcblxyXG5cdHNlc3Npb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBzZXNzaW9uU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uYmFzZSA9ICdhcGkvc2Vzc2lvbi9zZXNzaW9uVmFyTWFuYWdlci5waHA/dmFyPSc7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VmFyOiBnZXRWYXIsXHJcblx0XHRcdHNldFZhcjogc2V0VmFyXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9ICRuYW1lXHRWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9IFx0XHRQcm9taXNlIG9yIGVycm9yIG9uIGZhaWwuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0VmFyKCRuYW1lKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodm0uYmFzZSArICRuYW1lKVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ30gJG5hbWVcdFZhcmlhYmxlIG5hbWUgdG8gZ2V0IGZyb20gc2Vzc2lvbi5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ30gXHRcdFByb21pc2Ugb3IgZXJyb3Igb24gZmFpbC5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBzZXRWYXIoJG5hbWUsICR2YWx1ZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh2bS5iYXNlICsgJG5hbWUsICR2YWx1ZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUZhaWxlZChlcnJvcikge1xyXG5cdFx0XHQkbG9nLmVycm9yKGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRzdWNjZXNzOiAnZmFsc2UnLFxyXG5cdFx0XHRcdHRpdGxlOiAnRXJyb3Igd2hlbiBhY2Nlc3NpbmcgdmFyaWFibGUuJyxcclxuXHRcdFx0XHRtZXNzYWdlOiBlcnJvclxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0V2ZW50c0NvbnRyb2xsZXInLCBFdmVudHNDb250cm9sbGVyKTtcclxuXHJcblx0RXZlbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWydjYWxlbmRhcldpZGdldFNlcnZpY2UnLCAnZXZlbnRzU2VydmljZScsICdldmVudE1vZGFsU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIEV2ZW50c0NvbnRyb2xsZXIoY2FsZW5kYXJXaWRnZXRTZXJ2aWNlLCBldmVudHNTZXJ2aWNlLCBldmVudE1vZGFsU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmlzU2FtZURheUFzU2VsZWN0ZWQgPSBpc1NhbWVEYXlBc1NlbGVjdGVkO1xyXG5cdFx0dm0uc2VsZWN0RGF5ID0gc2VsZWN0RGF5O1xyXG5cdFx0dm0uc2hvd0V2ZW50TW9kYWwgPSBzaG93RXZlbnRNb2RhbDtcclxuXHJcblx0XHRhY3RpdmF0ZSgpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG5cdFx0XHR2bS50b2RheSA9IGNhbGVuZGFyV2lkZ2V0U2VydmljZS5nZXRUb2RheSgpO1xyXG5cdFx0XHR2bS5zZWxlY3RlZERheSA9IHZtLnRvZGF5O1xyXG5cdFx0XHR2bS5tb250aCA9IGNhbGVuZGFyV2lkZ2V0U2VydmljZS5nZXRNb250aCh2bS50b2RheSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNTYW1lRGF5QXNTZWxlY3RlZChkYXkpIHtcclxuXHRcdFx0cmV0dXJuIGNhbGVuZGFyV2lkZ2V0U2VydmljZS5pc1NhbWVEYXkoZGF5LmZ1bGxEYXRlLCB2bS5zZWxlY3RlZERheSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2VsZWN0RGF5KGRheSkge1xyXG5cdFx0XHR2bS5zZWxlY3RlZERheSA9IGRheS5mdWxsRGF0ZTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaG93RXZlbnRNb2RhbChldmVudCkge1xyXG5cdFx0XHRldmVudE1vZGFsU2VydmljZS5vcGVuRXZlbnRNb2RhbChldmVudCkudGhlbih1cGRhdGVFdmVudHMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50cyhyZXNwb25zZSkge1xyXG5cdFx0XHRpZiAocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2bS5ldmVudHMgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcEV2ZW50cycsIGV2ZW50c0RpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIGV2ZW50c0RpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9ldmVudHMvZXZlbnRzLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRXZlbnRzQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHRldmVudHM6ICc9JyxcclxuXHRcdFx0XHRvcmRlcjogJz0nXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdldmVudHNTZXJ2aWNlJywgZXZlbnRzU2VydmljZSk7XHJcblxyXG5cdGV2ZW50c1NlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZycsICdjcnVkU2VydmljZScsICdzZXNzaW9uU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGV2ZW50c1NlcnZpY2UoJGh0dHAsICRsb2csIGNydWRTZXJ2aWNlLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uZXZlbnQgPSBuZXcgY3J1ZFNlcnZpY2UoJ2V2ZW50Jyk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Y3JlYXRlRXZlbnQ6IGNyZWF0ZUV2ZW50LFxyXG5cdFx0XHRjcmVhdGVPclVwZGF0ZUV2ZW50OiBjcmVhdGVPclVwZGF0ZUV2ZW50LFxyXG5cdFx0XHRkZWxldGVFdmVudDogZGVsZXRlRXZlbnQsXHJcblx0XHRcdGdldEV2ZW50czogZ2V0RXZlbnRzLFxyXG5cdFx0XHR1cGRhdGVFdmVudDogdXBkYXRlRXZlbnRcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlRXZlbnQoZXZlbnQpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmV2ZW50LmNyZWF0ZShldmVudCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRXZlbnQoZXZlbnQpIHtcclxuXHRcdFx0aWYgKCFldmVudC5ldmVudF9pZCkge1xyXG5cdFx0XHRcdHJldHVybiBjcmVhdGVFdmVudChldmVudCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHVwZGF0ZUV2ZW50KGV2ZW50LmV2ZW50X2lkLCBldmVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlRXZlbnQoaWQpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmV2ZW50LnJlbW92ZShpZCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldEV2ZW50cygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldEV2ZW50V2l0aFVzZXJJRCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnZXRFdmVudFdpdGhVc2VySUQocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiB2bS5ldmVudC5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50KGlkLCBldmVudCkge1xyXG5cdFx0XHRyZXR1cm4gdm0uZXZlbnQudXBkYXRlKGlkLCBldmVudCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogQ29tcGFyZSBhbiBpbnB1dCBmaWVsZCB0byBhbm90aGVyIGZpZWxkLCBkZXRlcm1pbmVkIGJ5IHRoZSBkZXYuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwQ29tcGFyZVRvJywgY29tcGFyZVRvKTtcclxuXHJcblx0ZnVuY3Rpb24gY29tcGFyZVRvKCkge1xyXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcclxuXHRcdFx0cmVxdWlyZTogJ25nTW9kZWwnLFxyXG5cdFx0XHRzY29wZToge1xyXG5cdFx0XHRcdG90aGVyTW9kZWw6ICc9c3BDb21wYXJlVG8nXHJcblx0XHRcdH0sXHJcblx0XHRcdGxpbms6IGxpbmtcclxuXHRcdH07XHJcblx0XHRyZXR1cm4gZGlyZWN0aXZlO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcblx0XHRcdHZhciB1bmJpbmRXYXRjaCA9IHNjb3BlLiR3YXRjaCgnb3RoZXJNb2RlbCcsIHZhbGlkYXRlT25DaGFuZ2UpO1xyXG5cdFx0XHRuZ01vZGVsLiR2YWxpZGF0b3JzLnNwQ29tcGFyZVRvID0gY29tcGFyZVZhbHVlcztcclxuXHRcdFx0ZWxlbWVudC5vbignJGRlc3Ryb3knLCBjbGVhblVwKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGNsZWFuVXAoKSB7XHJcblx0XHRcdFx0dW5iaW5kV2F0Y2goKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY29tcGFyZVZhbHVlcyh2aWV3VmFsdWUpIHtcclxuXHRcdFx0XHRyZXR1cm4gKHZpZXdWYWx1ZSA9PT0gc2NvcGUub3RoZXJNb2RlbC4kdmlld1ZhbHVlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdmFsaWRhdGVPbkNoYW5nZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuXHRcdFx0XHRuZ01vZGVsLiR2YWxpZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xyXG5cclxuXHRMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnbG9naW5TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gTG9naW5Db250cm9sbGVyKGxvZ2luU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdHZtLmVycm9yID0gJyc7XHJcblxyXG5cdFx0dm0ubG9naW4gPSBsb2dpbjtcclxuXHJcblx0XHQvKipcclxuXHRcdCogTG9naW5TZXJ2aWNlIHdpbGwgcmVkaXJlY3QgaWYgdGhlcmUgaXMgbm8gZXJyb3IuIFRodXMsIHRoZXJlJ3Mgb25seSBhXHJcblx0XHQqIG5lZWQgdG8gcmV0dXJuIGEgcHJvbWlzZSBpZiB0aGVyZSdzIGFuIGVycm9yLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0bG9naW5TZXJ2aWNlLmxvZ2luKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdsb2dpblNlcnZpY2UnLCBsb2dpblNlcnZpY2UpO1xyXG5cclxuXHRsb2dpblNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvY2F0aW9uJywgJyRsb2cnXTtcclxuXHRmdW5jdGlvbiBsb2dpblNlcnZpY2UoJGh0dHAsICRsb2NhdGlvbiwgJGxvZykge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGxvZ2luOiBsb2dpblxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsb2dpbih1c2VyKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdXNlci9sb2dpbk1hbmFnZXIucGhwJywgdXNlcilcclxuXHRcdFx0XHQudGhlbihsb2dpbkNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChsb2dpbkZhaWxlZCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcyA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiByZXNwb25zZS5kYXRhLnRpdGxlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2Rhc2hib2FyZCcpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkZhaWxlZChlcnJvcikge1xyXG5cdFx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRcdHJldHVybiAnU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uJztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ01vZGFsQ29udHJvbGxlcicsIE1vZGFsQ29udHJvbGxlcik7XHJcblxyXG5cdE1vZGFsQ29udHJvbGxlci4kaW5qZWN0ID0gWyckdWliTW9kYWxJbnN0YW5jZScsICdncm91cHMnLCAnaXRlbSddO1xyXG5cdGZ1bmN0aW9uIE1vZGFsQ29udHJvbGxlcigkdWliTW9kYWxJbnN0YW5jZSwgZ3JvdXBzLCBpdGVtKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uZ3JvdXBzID0gZ3JvdXBzO1xyXG5cdFx0dm0uaXRlbSA9IGl0ZW07XHJcblx0XHR2bS5jbG9zZSA9IGNsb3NlO1xyXG5cdFx0dm0uY2FuY2VsID0gY2FuY2VsO1xyXG5cdFx0dm0uY29uZmlybSA9IGNvbmZpcm07XHJcblx0XHR2bS5yZW1vdmUgPSByZW1vdmU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY2xvc2UoKSB7XHJcblx0XHRcdCR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCkge1xyXG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByZW1vdmUoZGF0YSkge1xyXG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5kaXNtaXNzKGRhdGEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbmZpcm0oZGF0YSkge1xyXG5cdFx0XHQkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShkYXRhKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1Rhc2tzQ29udHJvbGxlcicsIFRhc2tzQ29udHJvbGxlcik7XHJcblxyXG5cdFRhc2tzQ29udHJvbGxlci4kaW5qZWN0ID0gWyd0YXNrc1NlcnZpY2UnLCAndGFza01vZGFsU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIFRhc2tzQ29udHJvbGxlcih0YXNrc1NlcnZpY2UsIHRhc2tNb2RhbFNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5zaG93VGFza01vZGFsID0gc2hvd1Rhc2tNb2RhbDtcclxuXHRcdHZtLnRvZ2dsZUNvbXBsZXRlZCA9IHRvZ2dsZUNvbXBsZXRlZDtcclxuXHJcblx0XHRmdW5jdGlvbiBzaG93VGFza01vZGFsKHRhc2spIHtcclxuXHRcdFx0dGFza01vZGFsU2VydmljZS5vcGVuVGFza01vZGFsKHRhc2spLnRoZW4odXBkYXRlVGFza3MpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS50b2dnbGVDb21wbGV0ZWQodGFzaykudGhlbih1cGRhdGVUYXNrcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGFza3MocmVzcG9uc2UpIHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0udGFza3MgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFRhc2tzJywgdGFza3NEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiB0YXNrc0RpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnbW9kdWxlcy90YXNrcy90YXNrcy5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1Rhc2tzQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcclxuXHRcdFx0c2NvcGU6IHtcclxuXHRcdFx0XHR0YXNrczogJz0nLFxyXG5cdFx0XHRcdG9yZGVyOiAnPSdcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tzU2VydmljZScsIHRhc2tzU2VydmljZSk7XHJcblxyXG5cdHRhc2tzU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ2NydWRTZXJ2aWNlJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gdGFza3NTZXJ2aWNlKCRodHRwLCAkbG9nLCBjcnVkU2VydmljZSwgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLnRhc2sgPSBuZXcgY3J1ZFNlcnZpY2UoJ3Rhc2snKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVUYXNrOiBjcmVhdGVUYXNrLFxyXG5cdFx0XHRjcmVhdGVPclVwZGF0ZVRhc2s6IGNyZWF0ZU9yVXBkYXRlVGFzayxcclxuXHRcdFx0ZGVsZXRlVGFzazogZGVsZXRlVGFzayxcclxuXHRcdFx0Z2V0VGFza3M6IGdldFRhc2tzLFxyXG5cdFx0XHR0b2dnbGVDb21wbGV0ZWQ6IHRvZ2dsZUNvbXBsZXRlZCxcclxuXHRcdFx0dXBkYXRlVGFzazogdXBkYXRlVGFza1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVUYXNrKHRhc2spIHtcclxuXHRcdFx0cmV0dXJuIHZtLnRhc2suY3JlYXRlKHRhc2spLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVRhc2sodGFzaykge1xyXG5cdFx0XHRpZiAoIXRhc2sudGFza19pZCkge1xyXG5cdFx0XHRcdHJldHVybiBjcmVhdGVUYXNrKHRhc2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB1cGRhdGVUYXNrKHRhc2sudGFza19pZCwgdGFzayk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xyXG5cdFx0XHRyZXR1cm4gdm0udGFzay5yZW1vdmUoaWQpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldFRhc2tXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFRhc2tXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0udGFzay5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbXBsZXRlZCh0YXNrKSB7XHJcblx0XHRcdHRhc2suY29tcGxldGVkID0gIXBhcnNlSW50KHRhc2suY29tcGxldGVkKTtcclxuXHRcdFx0cmV0dXJuIHVwZGF0ZVRhc2sodGFzay50YXNrX2lkLCB0YXNrKS50aGVuKGdldFRhc2tzKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVUYXNrKGlkLCB0YXNrKSB7XHJcblx0XHRcdHJldHVybiB2bS50YXNrLnVwZGF0ZShpZCwgdGFzaykudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIERhc2hib2FyZENvbnRyb2xsZXIpO1xyXG5cclxuXHREYXNoYm9hcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJ2lzQXV0aGVudGljYXRlZCcsICd0YXNrcycsICdldmVudHMnXTtcclxuXHRmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKGlzQXV0aGVudGljYXRlZCwgdGFza3MsIGV2ZW50cykge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLnRhc2tzID0gdGFza3M7XHJcblx0XHR2bS5ldmVudHMgPSBldmVudHM7XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsncmVnaXN0ZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKHJlZ2lzdGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmVycm9yID0gJyc7XHJcblx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHR2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0cmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdyZWdpc3RlclNlcnZpY2UnLCByZWdpc3RlclNlcnZpY2UpO1xyXG5cclxuXHRyZWdpc3RlclNlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRsb2cnLCAnY3J1ZFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiByZWdpc3RlclNlcnZpY2UoJGxvY2F0aW9uLCAkbG9nLCBjcnVkU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uY3J1ZCA9IG5ldyBjcnVkU2VydmljZSgndXNlcicpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlZ2lzdGVyOiByZWdpc3RlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByZWdpc3Rlcih1c2VyKSB7XHJcblx0XHRcdHJldHVybiB2bS5jcnVkLmNyZWF0ZSh1c2VyKVxyXG5cdFx0XHRcdC50aGVuKHJlZ2lzdHJhdGlvbkNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdCRsb2cuZXJyb3IocmVzcG9uc2UudGl0bGUpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLnRpdGxlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkbG9jYXRpb24udXJsKCcvbG9naW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnYWNjZXNzU2VydmljZScsIGFjY2Vzc1NlcnZpY2UpO1xyXG5cclxuXHRhY2Nlc3NTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckcScsICdzZXNzaW9uU2VydmljZScsICdzdGF0dXNTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gYWNjZXNzU2VydmljZSgkbG9jYXRpb24sICRxLCBzZXNzaW9uU2VydmljZSwgc3RhdHVzU2VydmljZSkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcclxuXHRcdFx0aXNBZG1pbjogaXNBZG1pblxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XHJcblx0XHRcdHJldHVybiBzZXNzaW9uU2VydmljZS5nZXRWYXIoJ25hbWUnKVxyXG5cdFx0XHRcdC50aGVuKGlzQXV0aGVudGljYXRlZENvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZENvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcyAhPT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoc3RhdHVzU2VydmljZS5PSyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChzdGF0dXNTZXJ2aWNlLlVOQVVUSE9SSVpFRCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQWRtaW4oKSB7XHJcblxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFN0YXR1cyBjb2RlcyB1c2VkIHdoZW4gYWNjZXNzaW5nIHZhcmlvdXMgcGFnZXMgaW4gdGhlIGFwcC5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LnNlcnZpY2UoJ3N0YXR1c1NlcnZpY2UnLCBzdGF0dXNTZXJ2aWNlKTtcclxuXHJcblx0ZnVuY3Rpb24gc3RhdHVzU2VydmljZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdE9LOiAyMDAsXHJcblx0XHRcdFVOQVVUSE9SSVpFRDogNDAxLFxyXG5cdFx0XHRGT1JCSURERU46IDQwM1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdjYWxlbmRhclNlcnZpY2UnLCBjYWxlbmRhclNlcnZpY2UpO1xyXG5cclxuXHRjYWxlbmRhclNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZycsICdjcnVkU2VydmljZScsICdzZXNzaW9uU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGNhbGVuZGFyU2VydmljZSgkaHR0cCwgJGxvZywgY3J1ZFNlcnZpY2UsIHNlc3Npb25TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5jYWxlbmRhciA9IG5ldyBjcnVkU2VydmljZSgnY2FsZW5kYXInKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVDYWxlbmRhcjogY3JlYXRlQ2FsZW5kYXIsXHJcblx0XHRcdGRlbGV0ZUNhbGVuZGFyOiBkZWxldGVDYWxlbmRhcixcclxuXHRcdFx0Z2V0Q2FsZW5kYXJzOiBnZXRDYWxlbmRhcnMsXHJcblx0XHRcdHVwZGF0ZUNhbGVuZGFyOiB1cGRhdGVDYWxlbmRhclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVDYWxlbmRhcihjYWxlbmRhcikge1xyXG5cdFx0XHRyZXR1cm4gdm0uY2FsZW5kYXIuY3JlYXRlKGNhbGVuZGFyKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlQ2FsZW5kYXIoaWQpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmNhbGVuZGFyLnJlbW92ZShpZCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldENhbGVuZGFycygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldENhbGVuZGFyV2l0aFVzZXJJRCk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnZXRDYWxlbmRhcldpdGhVc2VySUQocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiB2bS5jYWxlbmRhci5nZXRXaGVyZSgncGVyc29uX2lkPScgKyByZXMuZGF0YSwgJycpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUNhbGVuZGFyKGlkLCBjYWxlbmRhcikge1xyXG5cdFx0XHRyZXR1cm4gdm0uY2FsZW5kYXIudXBkYXRlKGlkLCBjYWxlbmRhcikudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnZXZlbnRNb2RhbFNlcnZpY2UnLCBldmVudE1vZGFsU2VydmljZSk7XHJcblxyXG5cdGV2ZW50TW9kYWxTZXJ2aWNlLiRpbmplY3QgPSBbJyR1aWJNb2RhbCcsICdjYWxlbmRhclNlcnZpY2UnLCAnZXZlbnRzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGV2ZW50TW9kYWxTZXJ2aWNlKCR1aWJNb2RhbCwgY2FsZW5kYXJTZXJ2aWNlLCBldmVudHNTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0b3BlbkV2ZW50TW9kYWw6IG9wZW5FdmVudE1vZGFsXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIG9wZW5FdmVudE1vZGFsKGV2ZW50KSB7XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKGV2ZW50LmR1ZSkpIHtcclxuXHRcdFx0XHRldmVudC5kdWUgPSBuZXcgRGF0ZShldmVudC5kdWUucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKGV2ZW50LnJlbWluZGVyKSkge1xyXG5cdFx0XHRcdGV2ZW50LnJlbWluZGVyID0gbmV3IERhdGUoZXZlbnQucmVtaW5kZXIucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvZXZlbnRzL21vZGFsL2V2ZW50Lm1vZGFsLmh0bWwnLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGdyb3VwczogY2FsZW5kYXJTZXJ2aWNlLmdldENhbGVuZGFycygpLFxyXG5cdFx0XHRcdFx0aXRlbTogZXZlbnRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLnJlc3VsdFxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZXZlbnRzU2VydmljZS5jcmVhdGVPclVwZGF0ZUV2ZW50KHJlc3BvbnNlKVxyXG5cdFx0XHRcdFx0XHQudGhlbihldmVudHNTZXJ2aWNlLmdldEV2ZW50cyk7XHJcblx0XHRcdFx0fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzcG9uc2UgIT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBldmVudHNTZXJ2aWNlLmRlbGV0ZUV2ZW50KHJlc3BvbnNlKVxyXG5cdFx0XHRcdFx0XHRcdC50aGVuKGV2ZW50c1NlcnZpY2UuZ2V0RXZlbnRzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdjYWxlbmRhcldpZGdldFNlcnZpY2UnLCBjYWxlbmRhcldpZGdldFNlcnZpY2UpO1xyXG5cclxuXHRjYWxlbmRhcldpZGdldFNlcnZpY2UuJGluamVjdCA9IFsnbW9tZW50J107XHJcblx0ZnVuY3Rpb24gY2FsZW5kYXJXaWRnZXRTZXJ2aWNlKG1vbWVudCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0TW9udGg6IGdldE1vbnRoLFxyXG5cdFx0XHRnZXRXZWVrOiBnZXRXZWVrLFxyXG5cdFx0XHRnZXRUb2RheTogZ2V0VG9kYXksXHJcblx0XHRcdGlzU2FtZURheTogaXNTYW1lRGF5XHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW0ge01vbWVudCBPYmplY3R9IGFEYXkgRGF5IHRvIGJ1aWxkIG1vbnRoIGFyb3VuZC5cclxuXHRcdCogQHJldHVybiB7TW9tZW50IE9iamVjdFtdW119XHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0TW9udGgoYURheSkge1xyXG5cdFx0XHR2YXIgbW9udGggPSBbXTtcclxuXHRcdFx0dmFyIGRheSA9IGFEYXkuY2xvbmUoKS5kYXRlKDEpLnN0YXJ0T2YoJ3dlZWsnKTtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IGFEYXkubW9udGgoKTsgaSA9PT0gYURheS5tb250aCgpOyBpID0gZGF5Lm1vbnRoKCkpIHtcclxuXHRcdFx0XHRtb250aC5wdXNoKGdldFdlZWsoZGF5LCBhRGF5Lm1vbnRoKCkpKTtcclxuXHRcdFx0XHRkYXkgPSBkYXkuYWRkKDEsICd3ZWVrcycpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBtb250aDtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUb2RheSgpIHtcclxuXHRcdFx0cmV0dXJuIG1vbWVudCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW0ge01vbWVudCBPYmplY3R9XHRzdGFydERheVx0U3RhcnRpbmcgZGF5IG9mIGEgd2Vlay5cclxuXHRcdCogQHBhcmFtIHtpbnR9XHRcdFx0XHR0YXJnZXRNb250aFx0TW9udGggbnVtYmVyIGJlaW5nIGJ1aWx0LlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuIHtNb21lbnQgT2JqZWN0W119XHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0V2VlayhzdGFydERheSwgdGFyZ2V0TW9udGgpIHtcclxuXHRcdFx0dmFyIHdlZWsgPSBbXTtcclxuXHJcblx0XHRcdHZhciBkYXkgPSBzdGFydERheS5jbG9uZSgpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xyXG5cdFx0XHRcdHdlZWsucHVzaCh7XHJcblx0XHRcdFx0XHRudW1iZXI6IGRheS5kYXRlKCksXHJcblx0XHRcdFx0XHRpc1RhcmdldE1vbnRoOiAoZGF5Lm1vbnRoKCkgPT09IHRhcmdldE1vbnRoKSxcclxuXHRcdFx0XHRcdGlzVG9kYXk6IGRheS5pc1NhbWUobW9tZW50KCksICdkYXknKSxcclxuXHRcdFx0XHRcdGZ1bGxEYXRlOiBkYXlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkYXkgPSBkYXkuY2xvbmUoKS5hZGQoMSwgJ2RheXMnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHdlZWs7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSB7TW9tZW50IE9iamVjdH1cdGRheTFcclxuXHRcdCogQHBhcmFtIHtNb21lbnQgT2JqZWN0fVx0ZGF5MlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuIHtib29sfVxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGlzU2FtZURheShkYXkxLCBkYXkyKSB7XHJcblx0XHRcdHJldHVybiBkYXkxLmlzU2FtZShkYXkyLCAnZGF5Jyk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnbGFiZWxTZXJ2aWNlJywgbGFiZWxTZXJ2aWNlKTtcclxuXHJcblx0bGFiZWxTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnY3J1ZFNlcnZpY2UnLCAnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBsYWJlbFNlcnZpY2UoJGh0dHAsICRsb2csIGNydWRTZXJ2aWNlLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0ubGFiZWwgPSBuZXcgY3J1ZFNlcnZpY2UoJ2xhYmVsJyk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Y3JlYXRlTGFiZWw6IGNyZWF0ZUxhYmVsLFxyXG5cdFx0XHRkZWxldGVMYWJlbDogZGVsZXRlTGFiZWwsXHJcblx0XHRcdGdldExhYmVsczogZ2V0TGFiZWxzLFxyXG5cdFx0XHR1cGRhdGVMYWJlbDogdXBkYXRlTGFiZWxcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlTGFiZWwobGFiZWwpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmxhYmVsLmNyZWF0ZShsYWJlbCkudGhlbihwcm9taXNlQ29tcGxldGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGRlbGV0ZUxhYmVsKGlkKSB7XHJcblx0XHRcdHJldHVybiB2bS5sYWJlbC5yZW1vdmUoaWQpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBnZXRMYWJlbHMoKSB7XHJcblx0XHRcdHJldHVybiBzZXNzaW9uU2VydmljZS5nZXRWYXIoJ2lkJylcclxuXHRcdFx0XHQudGhlbihnZXRMYWJlbFdpdGhVc2VySUQpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0TGFiZWxXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0ubGFiZWwuZ2V0V2hlcmUoJ3BlcnNvbl9pZD0nICsgcmVzLmRhdGEsICcnKS50aGVuKHByb21pc2VDb21wbGV0ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVMYWJlbChpZCwgbGFiZWwpIHtcclxuXHRcdFx0cmV0dXJuIHZtLmxhYmVsLnVwZGF0ZShpZCwgbGFiZWwpLnRoZW4ocHJvbWlzZUNvbXBsZXRlKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdGlmIChyZXMuc3VjY2Vzcykge1xyXG5cdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzLnRpdGxlO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Rhc2tNb2RhbFNlcnZpY2UnLCB0YXNrTW9kYWxTZXJ2aWNlKTtcclxuXHJcblx0dGFza01vZGFsU2VydmljZS4kaW5qZWN0ID0gWyckdWliTW9kYWwnLCAnbGFiZWxTZXJ2aWNlJywgJ3Rhc2tzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIHRhc2tNb2RhbFNlcnZpY2UoJHVpYk1vZGFsLCBsYWJlbFNlcnZpY2UsIHRhc2tzU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdG9wZW5UYXNrTW9kYWw6IG9wZW5UYXNrTW9kYWxcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gb3BlblRhc2tNb2RhbCh0YXNrKSB7XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKHRhc2suZHVlKSkge1xyXG5cdFx0XHRcdHRhc2suZHVlID0gbmV3IERhdGUodGFzay5kdWUucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhbmd1bGFyLmlzU3RyaW5nKHRhc2sucmVtaW5kZXIpKSB7XHJcblx0XHRcdFx0dGFzay5yZW1pbmRlciA9IG5ldyBEYXRlKHRhc2sucmVtaW5kZXIucmVwbGFjZSgvKC4rKSAoLispLywgXCIkMVQkMlpcIikpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJHVpYk1vZGFsLm9wZW4oe1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdGFza3MvbW9kYWwvdGFzay5tb2RhbC5odG1sJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRncm91cHM6IGxhYmVsU2VydmljZS5nZXRMYWJlbHMoKSxcclxuXHRcdFx0XHRcdGl0ZW06IHRhc2tcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLnJlc3VsdFxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGFza3NTZXJ2aWNlLmNyZWF0ZU9yVXBkYXRlVGFzayhyZXNwb25zZSlcclxuXHRcdFx0XHRcdFx0LnRoZW4odGFza3NTZXJ2aWNlLmdldFRhc2tzKTtcclxuXHRcdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNwb25zZSAhPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRhc2tzU2VydmljZS5kZWxldGVUYXNrKHJlc3BvbnNlKVxyXG5cdFx0XHRcdFx0XHRcdC50aGVuKHRhc2tzU2VydmljZS5nZXRUYXNrcyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdoZWFkZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUsIGhlYWRlclNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5uYW1lID0gJyc7XHJcblx0XHR2bS51cmwgPSAnJztcclxuXHJcblx0XHRoZWFkZXJTZXJ2aWNlLmdldFVzZXIoKVxyXG5cdFx0XHQudGhlbihnZXRVc2VyQ29tcGxldGUpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFVzZXJDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHQkc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2bS5uYW1lID0gKHJlc3BvbnNlLm5hbWUgPT09IGZhbHNlKSA/ICdMb2dpbicgOiByZXNwb25zZS5uYW1lO1xyXG5cdFx0XHRcdHZtLnVybCA9IHJlc3BvbnNlLnVybDtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwSGVhZGVyJywgaGVhZGVyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gaGVhZGVyRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogbGluayxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9sYXlvdXQvaGVhZGVyL2hlYWRlci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2hlYWRlclNlcnZpY2UnLCBoZWFkZXJTZXJ2aWNlKTtcclxuXHJcblx0aGVhZGVyU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gaGVhZGVyU2VydmljZSgkaHR0cCwgJGxvZywgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFVzZXI6IGdldFVzZXJcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlcigpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oZ2V0TmFtZUNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldE5hbWVDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge25hbWU6IGZhbHNlLCB1cmw6ICcjL2xvZ2luJ307XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB7bmFtZTogcmVzLmRhdGEsIHVybDogJyMvZGFzaGJvYXJkJ307XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsIFNpZGViYXJDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gU2lkZWJhckNvbnRyb2xsZXIoKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmNvbGxhcHNlZCA9IHRydWU7XHJcblxyXG5cdFx0dm0udG9nZ2xlU2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2bS5jb2xsYXBzZWQgPSAhdm0uY29sbGFwc2VkO1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BTaWRlYmFyJywgc2lkZWJhckRpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHNpZGViYXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9zaWRlYmFyL3NpZGViYXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdTaWRlYmFyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0XHRzY29wZS4kd2F0Y2goYXR0cnMuc2lkZWJhckRpcmVjdGl2ZSwgdG9nZ2xlU2lkZWJhcik7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGlmIChjb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
