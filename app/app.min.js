!function(){"use strict";function e(e,t){e.$on("$routeChangeError",t.routeChangeError)}angular.module("app",["ngRoute"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function t(e){return e.isAuthenticated()}function r(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",t]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",r]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,t){function r(r,n,o,a){a===t.UNAUTHORIZED?e.path("/login"):a===t.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:r}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e,t){function r(e){switch(this.base="api/",e){case"event":case"calendar":this.base+="activity/calendar/";break;case"label":case"task":this.base+="activity/task/";break;default:this.base+=e+"/"}this.base+=e+"Manager.php"}function n(t){return e.get(this.base+"?id="+t).then(u)["catch"](l)}function o(t,r){return e.get(this.base+"?where=true&id="+r,t).then(u)["catch"](l)}function a(t){return e.post(this.base,t).then(u)["catch"](l)}function i(t,r){return e.put(this.base+"?id="+t,r).then(u)["catch"](l)}function c(t){return e["delete"](this.base+"?id="+t).then(u)["catch"](l)}function s(t,r){return e["delete"](this.base+"?where=true&id="+r,t).then(u)["catch"](l)}function u(e){return e}function l(e){return t.error(e),{success:"false",title:"Error when querying server.",message:e}}var d=r;return d.prototype={get:n,getWhere:o,create:a,update:i,remove:c,removeWhere:s},d}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function r(t){return e.get(i.base+t).then(o)["catch"](a)}function n(t,r){return e.post(i.base+t,r).then(o)["catch"](a)}function o(e){return e}function a(e){return t.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var i=this;return i.base="api/session/sessionVarManager.php?var=",{getVar:r,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,t,r,n){function o(){c()}function a(t){return t===e.otherModel.$viewValue}function i(e,t){n.$validate()}var c=e.$watch("otherModel",i);n.$validators.spCompareTo=a,t.on("$destroy",o)}var t={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return t}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.login(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.loading=!1,r.error="",r.login=t}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,t,r){function n(n){function o(e){return e.data.success===!1?e.data.title:void t.path("/dashboard")}function a(e){return r.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",n).then(o)["catch"](a)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e){function t(){e.getTasks().then(function(e){r.tasks=e})}var r=this;r.tasks={},t()}angular.module("app").controller("TasksController",e),e.$inject=["tasksService"]}(),function(){"use strict";function e(){return{templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,t,r,n){function o(){function e(e){var r=e.data;return r.success?a.task.getWhere("",r.data).then(t):r.title}function t(e){var t=e.data;return t.success?t.data:t.title}return n.getVar("id").then(e)}var a=this;return a.task=new r("task"),{getTasks:o}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log","crudService","sessionService"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function t(){r.loading=!0,e.register(r.user).then(function(e){r.loading=!1,r.error=e})}var r=this;r.error="",r.loading=!1,r.register=t}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,t,r){function n(r){function n(r){return"false"===r.success?(t.error(r.title),r.title):void e.url("/login")}return o.crud.create(r).then(n)}var o=this;return o.crud=new r("user"),{register:n}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e,t,r,n){function o(){function e(e){return e.data.success!==!1?i.resolve(n.OK):i.reject(n.UNAUTHORIZED),i.promise}return r.getVar("name").then(e)}function a(){}var i=t.defer();return{isAuthenticated:o,isAdmin:a}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,t){function r(t){e.$evalAsync(function(){n.name=t.name===!1?"Login":t.name,n.url=t.url})}var n=this;n.name="",n.url="",t.getUser().then(r)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,t,r){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,t,r){function n(){function e(e){var t=e.data;return t.success===!1?{name:!1,url:"#/login"}:{name:t.data,url:"#/dashboard"}}return r.getVar("name").then(e)}return{getUser:n}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,t,r){function n(e){e?t.removeClass("collapsed"):t.addClass("collapsed")}e.$watch(r.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImNvbmZpZyIsIiRsb2NhdGlvbiIsInN0YXR1c1NlcnZpY2UiLCJldmVudCIsImN1cnJlbnQiLCJwcmV2aW91cyIsInJlamVjdGlvbiIsIlVOQVVUSE9SSVpFRCIsInBhdGgiLCJGT1JCSURERU4iLCJmYWN0b3J5IiwiY3J1ZFNlcnZpY2UiLCIkaHR0cCIsIiRsb2ciLCJpbml0IiwidHlwZSIsInRoaXMiLCJiYXNlIiwiZ2V0IiwiaWQiLCJ0aGVuIiwicHJvbWlzZUNvbXBsZXRlIiwicHJvbWlzZUZhaWxlZCIsImdldFdoZXJlIiwid2hlcmUiLCJ1c2VySUQiLCJjcmVhdGUiLCJkYXRhIiwicG9zdCIsInVwZGF0ZSIsInB1dCIsInJlbW92ZSIsInJlbW92ZVdoZXJlIiwicmVzcG9uc2UiLCJlcnJvciIsInN1Y2Nlc3MiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJjcnVkIiwicHJvdG90eXBlIiwic2Vzc2lvblNlcnZpY2UiLCJnZXRWYXIiLCIkbmFtZSIsInZtIiwic2V0VmFyIiwiJHZhbHVlIiwiY29tcGFyZVRvIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwibmdNb2RlbCIsImNsZWFuVXAiLCJ1bmJpbmRXYXRjaCIsImNvbXBhcmVWYWx1ZXMiLCJ2aWV3VmFsdWUiLCJvdGhlck1vZGVsIiwiJHZpZXdWYWx1ZSIsInZhbGlkYXRlT25DaGFuZ2UiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiJHZhbGlkYXRlIiwiJHdhdGNoIiwiJHZhbGlkYXRvcnMiLCJzcENvbXBhcmVUbyIsIm9uIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsIkxvZ2luQ29udHJvbGxlciIsImxvZ2luU2VydmljZSIsImxvZ2luIiwibG9hZGluZyIsInVzZXIiLCJsb2dpbkNvbXBsZXRlIiwibG9naW5GYWlsZWQiLCJUYXNrc0NvbnRyb2xsZXIiLCJ0YXNrc1NlcnZpY2UiLCJhY3RpdmF0ZSIsImdldFRhc2tzIiwidGFza3MiLCJ0YXNrc0RpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJnZXRUYXNrV2l0aFVzZXJJRCIsInJlcyIsInRhc2siLCJnZXRXaGVyZUNvbXBsZXRlIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJ1cmwiLCIkcSIsImlzQXV0aGVudGljYXRlZENvbXBsZXRlIiwiZGVmZXJyZWQiLCJPSyIsInJlamVjdCIsInByb21pc2UiLCJkZWZlciIsInNlcnZpY2UiLCJIZWFkZXJDb250cm9sbGVyIiwiJHNjb3BlIiwiaGVhZGVyU2VydmljZSIsImdldFVzZXJDb21wbGV0ZSIsIiRldmFsQXN5bmMiLCJuYW1lIiwiZ2V0VXNlciIsImhlYWRlckRpcmVjdGl2ZSIsImdldE5hbWVDb21wbGV0ZSIsIlNpZGViYXJDb250cm9sbGVyIiwiY29sbGFwc2VkIiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXJEaXJlY3RpdmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBT0EsU0FBU0EsR0FBY0MsRUFBWUMsR0FDbENELEVBQVdFLElBQUksb0JBQXFCRCxFQUFXRSxrQkFOaERDLFFBQ0VDLE9BQU8sT0FBUSxZQUNmQyxXQUFXLGdCQUFpQlAsR0FFOUJBLEVBQWNRLFNBQVcsYUFBYyxpQkFLeEMsV0FDQyxZQU9BLFNB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e1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJ10pXHJcblx0XHQuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIEFwcENvbnRyb2xsZXIpO1xyXG5cclxuXHRBcHBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnYXBwU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIEFwcENvbnRyb2xsZXIoJHJvb3RTY29wZSwgYXBwU2VydmljZSkge1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZUVycm9yJywgYXBwU2VydmljZS5yb3V0ZUNoYW5nZUVycm9yKTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbmZpZyhhcHBDb25maWcpO1xyXG5cclxuXHRhcHBDb25maWcuJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcclxuXHRmdW5jdGlvbiBhcHBDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuXHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdC53aGVuKCcvbG9naW4nLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL2xvZ2luL2xvZ2luLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9sb2dvdXQnLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL2xvZ291dC9sb2dvdXQuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ291dENvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL3JlZ2lzdGVyJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvZGFzaGJvYXJkJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvZGFzaGJvYXJkL2Rhc2hib2FyZC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGlzQXV0aGVudGljYXRlZDogWydhY2Nlc3NTZXJ2aWNlJywgaXNBdXRoZW50aWNhdGVkXVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9hZG1pbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2FkbWluL2FkbWluLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdBZG1pbkNvbnRyb2xsZXInLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0XHRpc0FkbWluOiBbJ2FjY2Vzc1NlcnZpY2UnLCBpc0FkbWluXVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0Lm90aGVyd2lzZSh7XHJcblx0XHRcdFx0cmVkaXJlY3RUbzogJy9sb2dpbidcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKGFjY2Vzc1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIGFjY2Vzc1NlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBZG1pbihhY2Nlc3NTZXJ2aWNlKSB7XHJcblx0XHRcdHJldHVybiBhY2Nlc3NTZXJ2aWNlLmlzQWRtaW4oKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2FwcFNlcnZpY2UnLCBhcHBTZXJ2aWNlKTtcclxuXHJcblx0YXBwU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnc3RhdHVzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGFwcFNlcnZpY2UoJGxvY2F0aW9uLCBzdGF0dXNTZXJ2aWNlKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyb3V0ZUNoYW5nZUVycm9yOiByb3V0ZUNoYW5nZUVycm9yXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJvdXRlQ2hhbmdlRXJyb3IoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzLCByZWplY3Rpb24pIHtcclxuXHRcdFx0aWYgKHJlamVjdGlvbiA9PT0gc3RhdHVzU2VydmljZS5VTkFVVEhPUklaRUQpIHtcclxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAocmVqZWN0aW9uID09PSBzdGF0dXNTZXJ2aWNlLkZPUkJJRERFTikge1xyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZm9yYmlkZGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBVc2VkIHRvIGFjY2VzcyB0aGUgYXBpIG9mIHRoZSB2YXJpb3VzIGl0ZW0gdHlwZXMuXHJcblx0KiBBbiBpbnN0YW5jZSBvZiBjcnVkIG11c3QgYmUgY3JlYXRlZCBpbiBvcmRlciB0byB1c2UgdGhlIHNlcnZpY2UuXHJcblx0KlxyXG5cdCogQWxsIHByb21pc2VzIHJldHVybiAnc3VjY2VzcycgYW5kIGVpdGhlciAnZGF0YScgb24gc3VjY2VzcyBvciwgb24gZXJyb3IsICd0aXRsZSdcclxuXHQqIHdpdGggYSBnZW5lcmFsIGVycm9yIGFuZCAnZGV0YWlscycgd2l0aCBtb3JlIGRldGFpbHMuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdjcnVkU2VydmljZScsIGNydWRTZXJ2aWNlKTtcclxuXHJcblx0Y3J1ZFNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGNydWRTZXJ2aWNlKCRodHRwLCAkbG9nKSB7XHJcblx0XHR2YXIgY3J1ZCA9IGluaXQ7XHJcblx0XHRjcnVkLnByb3RvdHlwZSA9IHtcclxuXHRcdFx0Z2V0OiBnZXQsXHJcblx0XHRcdGdldFdoZXJlOiBnZXRXaGVyZSxcclxuXHRcdFx0Y3JlYXRlOiBjcmVhdGUsXHJcblx0XHRcdHVwZGF0ZTogdXBkYXRlLFxyXG5cdFx0XHRyZW1vdmU6IHJlbW92ZSxcclxuXHRcdFx0cmVtb3ZlV2hlcmU6IHJlbW92ZVdoZXJlXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBjcnVkO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBJbml0aWFsaXplIHRoZSBiYXNlIHVybCB1c2luZyB0aGUgdHlwZSBvZiBpdGVtIHRvIGJlIGNhbGxlZCBvbi5cclxuXHRcdCogQWN0aXZpdGllcyBhbmQgdGhlaXIgcGFyZW50cyBoYXZlIGEgc3BlY2lmaWMgc3ViZm9sZGVyIHRvIGJlIHBvaW50ZWQgdG8sXHJcblx0XHQqIHdoaWxlIG90aGVycyBkbyBub3QuXHJcblx0XHQqXHJcblx0XHQqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgaXRlbS5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBpbml0KHR5cGUpIHtcclxuXHRcdFx0LyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLyc7XHJcblx0XHRcdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0XHRcdGNhc2UgJ2V2ZW50JzpcclxuXHRcdFx0XHRjYXNlICdjYWxlbmRhcic6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L2NhbGVuZGFyLyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsYWJlbCc6XHJcblx0XHRcdFx0Y2FzZSAndGFzayc6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gJ2FjdGl2aXR5L3Rhc2svJztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICcvJztcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJhc2UgKz0gdHlwZSArICdNYW5hZ2VyLnBocCc7XHJcblx0XHRcdC8qIGpzaGludCBpZ25vcmU6ZW5kICovXHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBnZXQuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXQoaWQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh0aGlzLmJhc2UgKyAnP2lkPScgKyBpZCkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIFx0e3N0cmluZ31cdHdoZXJlIFx0V2hlcmUgY2xhdXNlLlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHR1c2VySURcdEZvciBhY3Rpdml0aWVzICh0YXNrcywgZXZlbnRzKSwgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0dXNlciBmb3IgdGhlIGFjdGl2aXR5LiBQYXNzIGVtcHR5IHN0cmluZ1xyXG5cdFx0Klx0XHRcdFx0XHRcdFx0XHRvdGhlcndpc2UuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09IHF1ZXJ5IHJlc3VsdHMgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRXaGVyZSh3aGVyZSwgdXNlcklEKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz93aGVyZT10cnVlJmlkPScgKyB1c2VySUQsIHdoZXJlKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIGNyZWF0ZS5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09IDEgb24gc3VjY2Vzcy5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBjcmVhdGUoZGF0YSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCh0aGlzLmJhc2UsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byB1cGRhdGUuXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gdXBkYXRlLlxyXG5cdFx0KlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGlkLCBkYXRhKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wdXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQsIGRhdGEpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ31cdGlkXHRcdElEIG9mIGl0ZW0gdHlwZSB0byBkZWxldGUuXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmdbXX1cdFx0XHRQcm9taXNlIHdpdGggJ2RhdGEnID09PSAxIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbSBcdHtzdHJpbmd9XHR3aGVyZSBcdFdoZXJlIGNsYXVzZS5cclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfVx0dXNlcklEXHRGb3IgYWN0aXZpdGllcyAodGFza3MsIGV2ZW50cyksIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHQqXHRcdFx0XHRcdFx0XHRcdHVzZXIgZm9yIHRoZSBhY3Rpdml0eS4gUGFzcyBlbXB0eSBzdHJpbmdcclxuXHRcdCpcdFx0XHRcdFx0XHRcdFx0b3RoZXJ3aXNlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA+PSAwIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlV2hlcmUod2hlcmUsIHVzZXJJRCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKHRoaXMuYmFzZSArICc/d2hlcmU9dHJ1ZSZpZD0nICsgdXNlcklELCB3aGVyZSkgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gcXVlcnlpbmcgc2VydmVyLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBVc2VkIHRvIGFjY2VzcyBzZXNzaW9uIHZhcmlhYmxlcy5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ3Nlc3Npb25TZXJ2aWNlJywgc2Vzc2lvblNlcnZpY2UpO1xyXG5cclxuXHRzZXNzaW9uU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gc2Vzc2lvblNlcnZpY2UoJGh0dHAsICRsb2cpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmJhc2UgPSAnYXBpL3Nlc3Npb24vc2Vzc2lvblZhck1hbmFnZXIucGhwP3Zhcj0nO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFZhcjogZ2V0VmFyLFxyXG5cdFx0XHRzZXRWYXI6IHNldFZhclxyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfSAkbmFtZVx0VmFyaWFibGUgbmFtZSB0byBnZXQgZnJvbSBzZXNzaW9uLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nfSBcdFx0UHJvbWlzZSBvciBlcnJvciBvbiBmYWlsLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGdldFZhcigkbmFtZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KHZtLmJhc2UgKyAkbmFtZSlcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9ICRuYW1lXHRWYXJpYWJsZSBuYW1lIHRvIGdldCBmcm9tIHNlc3Npb24uXHJcblx0XHQqIEByZXR1cm5cdHtzdHJpbmd9IFx0XHRQcm9taXNlIG9yIGVycm9yIG9uIGZhaWwuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0VmFyKCRuYW1lLCAkdmFsdWUpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3Qodm0uYmFzZSArICRuYW1lLCAkdmFsdWUpXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHByb21pc2VGYWlsZWQoZXJyb3IpIHtcclxuXHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3VjY2VzczogJ2ZhbHNlJyxcclxuXHRcdFx0XHR0aXRsZTogJ0Vycm9yIHdoZW4gYWNjZXNzaW5nIHZhcmlhYmxlLicsXHJcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBDb21wYXJlIGFuIGlucHV0IGZpZWxkIHRvIGFub3RoZXIgZmllbGQsIGRldGVybWluZWQgYnkgdGhlIGRldi5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BDb21wYXJlVG8nLCBjb21wYXJlVG8pO1xyXG5cclxuXHRmdW5jdGlvbiBjb21wYXJlVG8oKSB7XHJcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xyXG5cdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXHJcblx0XHRcdHNjb3BlOiB7XHJcblx0XHRcdFx0b3RoZXJNb2RlbDogJz1zcENvbXBhcmVUbydcclxuXHRcdFx0fSxcclxuXHRcdFx0bGluazogbGlua1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuXHRcdFx0dmFyIHVuYmluZFdhdGNoID0gc2NvcGUuJHdhdGNoKCdvdGhlck1vZGVsJywgdmFsaWRhdGVPbkNoYW5nZSk7XHJcblx0XHRcdG5nTW9kZWwuJHZhbGlkYXRvcnMuc3BDb21wYXJlVG8gPSBjb21wYXJlVmFsdWVzO1xyXG5cdFx0XHRlbGVtZW50Lm9uKCckZGVzdHJveScsIGNsZWFuVXApO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY2xlYW5VcCgpIHtcclxuXHRcdFx0XHR1bmJpbmRXYXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjb21wYXJlVmFsdWVzKHZpZXdWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiAodmlld1ZhbHVlID09PSBzY29wZS5vdGhlck1vZGVsLiR2aWV3VmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB2YWxpZGF0ZU9uQ2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG5cdFx0XHRcdG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XHJcblxyXG5cdExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWydsb2dpblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIobG9naW5TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5sb2dpbiA9IGxvZ2luO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBMb2dpblNlcnZpY2Ugd2lsbCByZWRpcmVjdCBpZiB0aGVyZSBpcyBubyBlcnJvci4gVGh1cywgdGhlcmUncyBvbmx5IGFcclxuXHRcdCogbmVlZCB0byByZXR1cm4gYSBwcm9taXNlIGlmIHRoZXJlJ3MgYW4gZXJyb3IuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gbG9naW4oKSB7XHJcblx0XHRcdHZtLmxvYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRsb2dpblNlcnZpY2UubG9naW4odm0udXNlcilcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XHJcblxyXG5cdGxvZ2luU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9jYXRpb24nLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGxvZ2luU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJ2FwaS91c2VyL2xvZ2luTWFuYWdlci5waHAnLCB1c2VyKVxyXG5cdFx0XHRcdC50aGVuKGxvZ2luQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKGxvZ2luRmFpbGVkKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGEudGl0bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZGFzaGJvYXJkJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdFx0cmV0dXJuICdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignVGFza3NDb250cm9sbGVyJywgVGFza3NDb250cm9sbGVyKTtcclxuXHJcblx0VGFza3NDb250cm9sbGVyLiRpbmplY3QgPSBbJ3Rhc2tzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIFRhc2tzQ29udHJvbGxlcih0YXNrc1NlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS50YXNrcyA9IHt9O1xyXG5cclxuXHRcdGFjdGl2YXRlKCk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcblx0XHRcdHRhc2tzU2VydmljZS5nZXRUYXNrcygpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsgdm0udGFza3MgPSByZXNwb25zZTsgfSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwVGFza3MnLCB0YXNrc0RpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHRhc2tzRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Rhc2tzL3Rhc2tzLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnVGFza3NDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgndGFza3NTZXJ2aWNlJywgdGFza3NTZXJ2aWNlKTtcclxuXHJcblx0dGFza3NTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnY3J1ZFNlcnZpY2UnLCAnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiB0YXNrc1NlcnZpY2UoJGh0dHAsICRsb2csIGNydWRTZXJ2aWNlLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0udGFzayA9IG5ldyBjcnVkU2VydmljZSgndGFzaycpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFRhc2tzOiBnZXRUYXNrc1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignaWQnKVxyXG5cdFx0XHRcdC50aGVuKGdldFRhc2tXaXRoVXNlcklEKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFRhc2tXaXRoVXNlcklEKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdm0udGFzay5nZXRXaGVyZSgnJywgcmVzLmRhdGEpLnRoZW4oZ2V0V2hlcmVDb21wbGV0ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiByZXMudGl0bGU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldFdoZXJlQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHJlcy50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBEYXNoYm9hcmRDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigpIHtcclxuXHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRSZWdpc3RlckNvbnRyb2xsZXIuJGluamVjdCA9IFsncmVnaXN0ZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKHJlZ2lzdGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmVycm9yID0gJyc7XHJcblx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHR2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0cmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdyZWdpc3RlclNlcnZpY2UnLCByZWdpc3RlclNlcnZpY2UpO1xyXG5cclxuXHRyZWdpc3RlclNlcnZpY2UuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRsb2cnLCAnY3J1ZFNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiByZWdpc3RlclNlcnZpY2UoJGxvY2F0aW9uLCAkbG9nLCBjcnVkU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0dm0uY3J1ZCA9IG5ldyBjcnVkU2VydmljZSgndXNlcicpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlZ2lzdGVyOiByZWdpc3RlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByZWdpc3Rlcih1c2VyKSB7XHJcblx0XHRcdHJldHVybiB2bS5jcnVkLmNyZWF0ZSh1c2VyKVxyXG5cdFx0XHRcdC50aGVuKHJlZ2lzdHJhdGlvbkNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09ICdmYWxzZScpIHtcclxuXHRcdFx0XHRcdCRsb2cuZXJyb3IocmVzcG9uc2UudGl0bGUpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLnRpdGxlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkbG9jYXRpb24udXJsKCcvbG9naW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnYWNjZXNzU2VydmljZScsIGFjY2Vzc1NlcnZpY2UpO1xyXG5cclxuXHRhY2Nlc3NTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckcScsICdzZXNzaW9uU2VydmljZScsICdzdGF0dXNTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gYWNjZXNzU2VydmljZSgkbG9jYXRpb24sICRxLCBzZXNzaW9uU2VydmljZSwgc3RhdHVzU2VydmljZSkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcclxuXHRcdFx0aXNBZG1pbjogaXNBZG1pblxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7XHJcblx0XHRcdHJldHVybiBzZXNzaW9uU2VydmljZS5nZXRWYXIoJ25hbWUnKVxyXG5cdFx0XHRcdC50aGVuKGlzQXV0aGVudGljYXRlZENvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZENvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcyAhPT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoc3RhdHVzU2VydmljZS5PSyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChzdGF0dXNTZXJ2aWNlLlVOQVVUSE9SSVpFRCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGlzQWRtaW4oKSB7XHJcblxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFN0YXR1cyBjb2RlcyB1c2VkIHdoZW4gYWNjZXNzaW5nIHZhcmlvdXMgcGFnZXMgaW4gdGhlIGFwcC5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LnNlcnZpY2UoJ3N0YXR1c1NlcnZpY2UnLCBzdGF0dXNTZXJ2aWNlKTtcclxuXHJcblx0ZnVuY3Rpb24gc3RhdHVzU2VydmljZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdE9LOiAyMDAsXHJcblx0XHRcdFVOQVVUSE9SSVpFRDogNDAxLFxyXG5cdFx0XHRGT1JCSURERU46IDQwM1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgSGVhZGVyQ29udHJvbGxlcik7XHJcblxyXG5cdEhlYWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJ2hlYWRlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRzY29wZSwgaGVhZGVyU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLm5hbWUgPSAnJztcclxuXHRcdHZtLnVybCA9ICcnO1xyXG5cclxuXHRcdGhlYWRlclNlcnZpY2UuZ2V0VXNlcigpXHJcblx0XHRcdC50aGVuKGdldFVzZXJDb21wbGV0ZSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlckNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdCRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZtLm5hbWUgPSAocmVzcG9uc2UubmFtZSA9PT0gZmFsc2UpID8gJ0xvZ2luJyA6IHJlc3BvbnNlLm5hbWU7XHJcblx0XHRcdFx0dm0udXJsID0gcmVzcG9uc2UudXJsO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BIZWFkZXInLCBoZWFkZXJEaXJlY3RpdmUpO1xyXG5cclxuXHRmdW5jdGlvbiBoZWFkZXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9oZWFkZXIvaGVhZGVyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnaGVhZGVyU2VydmljZScsIGhlYWRlclNlcnZpY2UpO1xyXG5cclxuXHRoZWFkZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnLCAnc2Vzc2lvblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBoZWFkZXJTZXJ2aWNlKCRodHRwLCAkbG9nLCBzZXNzaW9uU2VydmljZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlclxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihnZXROYW1lQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gZ2V0TmFtZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7XHJcblxyXG5cdFx0XHRcdGlmIChyZXMuc3VjY2VzcyA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiB7bmFtZTogZmFsc2UsIHVybDogJyMvbG9naW4nfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHtuYW1lOiByZXMuZGF0YSwgdXJsOiAnIy9kYXNoYm9hcmQnfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1NpZGViYXJDb250cm9sbGVyJywgU2lkZWJhckNvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBTaWRlYmFyQ29udHJvbGxlcigpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0dm0uY29sbGFwc2VkID0gdHJ1ZTtcclxuXHJcblx0XHR2bS50b2dnbGVTaWRlYmFyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZtLmNvbGxhcHNlZCA9ICF2bS5jb2xsYXBzZWQ7XHJcblx0XHR9O1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZGlyZWN0aXZlKCdzcFNpZGViYXInLCBzaWRlYmFyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gc2lkZWJhckRpcmVjdGl2ZSgpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGxpbms6IGxpbmssXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvbGF5b3V0L3NpZGViYXIvc2lkZWJhci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1NpZGViYXJDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcblx0XHRcdHNjb3BlLiR3YXRjaChhdHRycy5zaWRlYmFyRGlyZWN0aXZlLCB0b2dnbGVTaWRlYmFyKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoY29sbGFwc2VkKSB7XHJcblx0XHRcdFx0aWYgKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
