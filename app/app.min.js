!function(){"use strict";function e(e,r){e.$on("$routeChangeError",r.routeChangeError)}angular.module("app",["ngRoute"]).controller("AppController",e),e.$inject=["$rootScope","appService"]}(),function(){"use strict";function e(e){function r(e){return e.isAuthenticated()}function t(e){return e.isAdmin()}e.when("/login",{templateUrl:"modules/login/login.html",controller:"LoginController",controllerAs:"vm"}).when("/logout",{templateUrl:"modules/logout/logout.html",controller:"LogoutController",controllerAs:"vm"}).when("/register",{templateUrl:"pages/register/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/dashboard",{templateUrl:"pages/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",resolve:{isAuthenticated:["accessService",r]}}).when("/admin",{templateUrl:"pages/admin/admin.html",controller:"AdminController",controllerAs:"vm",resolve:{isAdmin:["accessService",t]}}).otherwise({redirectTo:"/login"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e,r){function t(t,n,o,i){i===r.UNAUTHORIZED?e.path("/login"):i===r.FORBIDDEN&&e.path("/forbidden")}return{routeChangeError:t}}angular.module("app").factory("appService",e),e.$inject=["$location","statusService"]}(),function(){"use strict";function e(e,r){function t(e){this.base="api/"+e+"/"+e+"Manager.php"}function n(r){return e.get(this.base+"?id="+r).then(c)["catch"](l)}function o(r){return e.post(this.base,r).then(c)["catch"](l)}function i(r,t){return e.put(this.base+"?id="+r,t).then(c)["catch"](l)}function a(r){return e["delete"](this.base+"?id="+r).then(c)["catch"](l)}function c(e){return e}function l(e){return r.error(e),{success:"false",title:"Error when querying server.",message:e}}var u=t;return u.prototype={get:n,create:o,update:i,remove:a},u}angular.module("app").factory("crudService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,r){function t(r){return e.get(a.base+r).then(o)["catch"](i)}function n(r,t){return e.post(a.base+r,t).then(o)["catch"](i)}function o(e){return e}function i(e){return r.error(e),{success:"false",title:"Error when accessing variable.",message:e}}var a=this;return a.base="api/session/sessionVarManager.php?var=",{getVar:t,setVar:n}}angular.module("app").factory("sessionService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){}angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e){function r(){function r(e){t.loading=!1,t.error=e}t.loading=!0,e.register(t.user).then(r)}var t=this;t.loading=!1,t.error="",t.register=r}angular.module("app").controller("RegisterController",e),e.$inject=["registerService"]}(),function(){"use strict";function e(e,r,t){function n(t){function n(t){return"false"===t.success?(r.error(t.title),t.title):void e.url("/login")}return o.crud.create(t).then(n)}var o=this;return o.crud=new t("user"),{register:n}}angular.module("app").factory("registerService",e),e.$inject=["$location","$log","crudService"]}(),function(){"use strict";function e(e){function r(){function r(e){t.loading=!1,t.error=e}t.loading=!0,e.login(t.user).then(r)}var t=this;t.loading=!1,t.error="",t.login=r}angular.module("app").controller("LoginController",e),e.$inject=["loginService"]}(),function(){"use strict";function e(e,r,t){function n(n){function o(e){return e.data.success===!1?e.data.title:void r.path("/dashboard")}function i(e){return t.error(e),"Something went wrong. Please try again."}return e.post("api/user/loginManager.php",n).then(o)["catch"](i)}return{login:n}}angular.module("app").factory("loginService",e),e.$inject=["$http","$location","$log"]}(),function(){"use strict";function e(e){}angular.module("app").controller("TasksController",e),e.$inject=["tasksService"]}(),function(){"use strict";function e(){function e(e,r,t){}return{link:e,templateUrl:"modules/tasks/tasks.html",controller:"TasksController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spTasks",e)}(),function(){"use strict";function e(e,r){return{}}angular.module("app").factory("tasksService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(){function e(e,r,t,n){function o(){c()}function i(r){return r===e.otherModel.$viewValue}function a(e,r){n.$validate()}var c=e.$watch("otherModel",a);n.$validators.spCompareTo=i,r.on("$destroy",o)}var r={require:"ngModel",scope:{otherModel:"=spCompareTo"},link:e};return r}angular.module("app").directive("spCompareTo",e)}(),function(){"use strict";function e(e,r,t,n){function o(){function e(e){return e.data.success!==!1?a.resolve(n.OK):a.reject(n.UNAUTHORIZED),a.promise}return t.getVar("name").then(e)}function i(){}var a=r.defer();return{isAuthenticated:o,isAdmin:i}}angular.module("app").factory("accessService",e),e.$inject=["$location","$q","sessionService","statusService"]}(),function(){"use strict";function e(){return{OK:200,UNAUTHORIZED:401,FORBIDDEN:403}}angular.module("app").service("statusService",e)}(),function(){"use strict";function e(e,r){function t(r){e.$evalAsync(function(){n.name=r.name===!1?"Login":r.name,n.url=r.url})}var n=this;n.name="",n.url="",r.getUser().then(t)}angular.module("app").controller("HeaderController",e),e.$inject=["$scope","headerService"]}(),function(){"use strict";function e(){function e(e,r,t){}return{link:e,templateUrl:"pages/layout/header/header.html",controller:"HeaderController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spHeader",e)}(),function(){"use strict";function e(e,r,t){function n(){function e(e){var r=e.data;return r.success===!1?{name:!1,url:"#/login"}:{name:r.data,url:"#/dashboard"}}return t.getVar("name").then(e)}return{getUser:n}}angular.module("app").factory("headerService",e),e.$inject=["$http","$log","sessionService"]}(),function(){"use strict";function e(){var e=this;e.collapsed=!0,e.toggleSidebar=function(){e.collapsed=!e.collapsed}}angular.module("app").controller("SidebarController",e)}(),function(){"use strict";function e(){function e(e,r,t){function n(e){e?r.removeClass("collapsed"):r.addClass("collapsed")}e.$watch(t.sidebarDirective,n)}return{link:e,templateUrl:"pages/layout/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("spSidebar",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsiQXBwQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJhcHBTZXJ2aWNlIiwiJG9uIiwicm91dGVDaGFuZ2VFcnJvciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsImFwcENvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiaXNBdXRoZW50aWNhdGVkIiwiYWNjZXNzU2VydmljZSIsImlzQWRtaW4iLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImNvbmZpZyIsIiRsb2NhdGlvbiIsInN0YXR1c1NlcnZpY2UiLCJldmVudCIsImN1cnJlbnQiLCJwcmV2aW91cyIsInJlamVjdGlvbiIsIlVOQVVUSE9SSVpFRCIsInBhdGgiLCJGT1JCSURERU4iLCJmYWN0b3J5IiwiY3J1ZFNlcnZpY2UiLCIkaHR0cCIsIiRsb2ciLCJpbml0IiwidHlwZSIsInRoaXMiLCJiYXNlIiwiZ2V0IiwiaWQiLCJ0aGVuIiwicHJvbWlzZUNvbXBsZXRlIiwicHJvbWlzZUZhaWxlZCIsImNyZWF0ZSIsImRhdGEiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicmVtb3ZlIiwicmVzcG9uc2UiLCJlcnJvciIsInN1Y2Nlc3MiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJjcnVkIiwicHJvdG90eXBlIiwic2Vzc2lvblNlcnZpY2UiLCJnZXRWYXIiLCIkbmFtZSIsInZtIiwic2V0VmFyIiwiJHZhbHVlIiwiRGFzaGJvYXJkQ29udHJvbGxlciIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInJlZ2lzdGVyU2VydmljZSIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJsb2FkaW5nIiwidXNlciIsInVybCIsIkxvZ2luQ29udHJvbGxlciIsImxvZ2luU2VydmljZSIsImxvZ2luIiwibG9naW5Db21wbGV0ZSIsImxvZ2luRmFpbGVkIiwiVGFza3NDb250cm9sbGVyIiwidGFza3NTZXJ2aWNlIiwidGFza3NEaXJlY3RpdmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJiaW5kVG9Db250cm9sbGVyIiwiZGlyZWN0aXZlIiwiY29tcGFyZVRvIiwibmdNb2RlbCIsImNsZWFuVXAiLCJ1bmJpbmRXYXRjaCIsImNvbXBhcmVWYWx1ZXMiLCJ2aWV3VmFsdWUiLCJvdGhlck1vZGVsIiwiJHZpZXdWYWx1ZSIsInZhbGlkYXRlT25DaGFuZ2UiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiJHZhbGlkYXRlIiwiJHdhdGNoIiwiJHZhbGlkYXRvcnMiLCJzcENvbXBhcmVUbyIsIm9uIiwicmVxdWlyZSIsIiRxIiwiaXNBdXRoZW50aWNhdGVkQ29tcGxldGUiLCJkZWZlcnJlZCIsIk9LIiwicmVqZWN0IiwicHJvbWlzZSIsImRlZmVyIiwic2VydmljZSIsIkhlYWRlckNvbnRyb2xsZXIiLCIkc2NvcGUiLCJoZWFkZXJTZXJ2aWNlIiwiZ2V0VXNlckNvbXBsZXRlIiwiJGV2YWxBc3luYyIsIm5hbWUiLCJnZXRVc2VyIiwiaGVhZGVyRGlyZWN0aXZlIiwiZ2V0TmFtZUNvbXBsZXRlIiwicmVzIiwiU2lkZWJhckNvbnRyb2xsZXIiLCJjb2xsYXBzZWQiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhckRpcmVjdGl2ZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0MsWUFPQSxTQUFTQSxHQUFjQyxFQUFZQyxHQUNsQ0QsRUFBV0UsSUFBSSxvQkFBcUJELEVBQVdFLGtCQU5oREMsUUFDRUMsT0FBTyxPQUFRLFlBQ2ZDLFdBQVcsZ0JBQWlCUCxHQUU5QkEsRUFBY1EsU0FBVyxhQUFjLGlCQUt4QyxXQUNDLFlBT0EsU0FBU0MsR0FBVUMsR0FxQ2xCLFFBQVNDLEdBQWdCQyxHQUN4QixNQUFPQSxHQUFjRCxrQkFHdEIsUUFBU0UsR0FBUUQsR0FDaEIsTUFBT0EsR0FBY0MsVUF6Q3RCSCxFQUNFSSxLQUFLLFVBQ0xDLFlBQWEsMkJB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dCI6WyIoZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnLCBbJ25nUm91dGUnXSlcclxuXHRcdC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgQXBwQ29udHJvbGxlcik7XHJcblxyXG5cdEFwcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICdhcHBTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gQXBwQ29udHJvbGxlcigkcm9vdFNjb3BlLCBhcHBTZXJ2aWNlKSB7XHJcblx0XHQkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBhcHBTZXJ2aWNlLnJvdXRlQ2hhbmdlRXJyb3IpO1xyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG5cdGFwcENvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cdGZ1bmN0aW9uIGFwcENvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG5cdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9naW4vbG9naW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2xvZ291dCcsIHtcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ21vZHVsZXMvbG9nb3V0L2xvZ291dC5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9nb3V0Q29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXHJcblx0XHRcdH0pXHJcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnUmVnaXN0ZXJDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9kYXNoYm9hcmQnLCB7XHJcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdFx0aXNBdXRoZW50aWNhdGVkOiBbJ2FjY2Vzc1NlcnZpY2UnLCBpc0F1dGhlbnRpY2F0ZWRdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL2FkbWluJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFnZXMvYWRtaW4vYWRtaW4uaHRtbCcsXHJcblx0XHRcdFx0Y29udHJvbGxlcjogJ0FkbWluQ29udHJvbGxlcicsXHJcblx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRcdHJlc29sdmU6IHtcclxuXHRcdFx0XHRcdGlzQWRtaW46IFsnYWNjZXNzU2VydmljZScsIGlzQWRtaW5dXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRyZWRpcmVjdFRvOiAnL2xvZ2luJ1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoYWNjZXNzU2VydmljZSkge1xyXG5cdFx0XHRyZXR1cm4gYWNjZXNzU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0FkbWluKGFjY2Vzc1NlcnZpY2UpIHtcclxuXHRcdFx0cmV0dXJuIGFjY2Vzc1NlcnZpY2UuaXNBZG1pbigpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgnYXBwU2VydmljZScsIGFwcFNlcnZpY2UpO1xyXG5cclxuXHRhcHBTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICdzdGF0dXNTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gYXBwU2VydmljZSgkbG9jYXRpb24sIHN0YXR1c1NlcnZpY2UpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJvdXRlQ2hhbmdlRXJyb3I6IHJvdXRlQ2hhbmdlRXJyb3JcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcm91dGVDaGFuZ2VFcnJvcihldmVudCwgY3VycmVudCwgcHJldmlvdXMsIHJlamVjdGlvbikge1xyXG5cdFx0XHRpZiAocmVqZWN0aW9uID09PSBzdGF0dXNTZXJ2aWNlLlVOQVVUSE9SSVpFRCkge1xyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcclxuXHRcdFx0fSBlbHNlIGlmIChyZWplY3Rpb24gPT09IHN0YXR1c1NlcnZpY2UuRk9SQklEREVOKSB7XHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9mb3JiaWRkZW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQqIFVzZWQgdG8gYWNjZXNzIHRoZSBhcGkgb2YgdGhlIHZhcmlvdXMgaXRlbSB0eXBlcy5cclxuXHQqIEFuIGluc3RhbmNlIG9mIGNydWQgbXVzdCBiZSBjcmVhdGVkIGluIG9yZGVyIHRvIHVzZSB0aGUgc2VydmljZS5cclxuXHQqXHJcblx0KiBBbGwgcHJvbWlzZXMgcmV0dXJuICdzdWNjZXNzJyBhbmQgZWl0aGVyICdkYXRhJyBvbiBzdWNjZXNzIG9yLCBvbiBlcnJvciwgJ3RpdGxlJ1xyXG5cdCogd2l0aCBhIGdlbmVyYWwgZXJyb3IgYW5kICdkZXRhaWxzJyB3aXRoIG1vcmUgZGV0YWlscy5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2NydWRTZXJ2aWNlJywgY3J1ZFNlcnZpY2UpO1xyXG5cclxuXHRjcnVkU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XHJcblx0ZnVuY3Rpb24gY3J1ZFNlcnZpY2UoJGh0dHAsICRsb2cpIHtcclxuXHRcdHZhciBjcnVkID0gaW5pdDtcclxuXHRcdGNydWQucHJvdG90eXBlID0ge1xyXG5cdFx0XHRnZXQ6IGdldCxcclxuXHRcdFx0Y3JlYXRlOiBjcmVhdGUsXHJcblx0XHRcdHVwZGF0ZTogdXBkYXRlLFxyXG5cdFx0XHRyZW1vdmU6IHJlbW92ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gY3J1ZDtcclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtIHtzdHJpbmd9IHR5cGUgU2V0IHRoZSBiYXNlIHVybCB1c2luZyB0aGUgQ1JVRCB0eXBlLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIGluaXQodHlwZSkge1xyXG5cdFx0XHR0aGlzLmJhc2UgPSAnYXBpLycgKyB0eXBlICsgJy8nICsgdHlwZSArICdNYW5hZ2VyLnBocCc7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZ2V0LlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PSBxdWVyeSByZXN1bHRzIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0KGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e21peGVkW119XHRkYXRhXHREYXRhIG9mIGl0ZW0gdG8gY3JlYXRlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QodGhpcy5iYXNlLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gdXBkYXRlLlxyXG5cdFx0KiBAcGFyYW1cdHttaXhlZFtdfVx0ZGF0YVx0RGF0YSBvZiBpdGVtIHRvIHVwZGF0ZS5cclxuXHRcdCpcclxuXHRcdCogQHJldHVyblx0e3N0cmluZ1tdfVx0XHRcdFByb21pc2Ugd2l0aCAnZGF0YScgPT09ICcxJyBvbiBzdWNjZXNzLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShpZCwgZGF0YSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KHRoaXMuYmFzZSArICc/aWQ9JyArIGlkLCBkYXRhKSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdFx0XHQudGhlbihwcm9taXNlQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKHByb21pc2VGYWlsZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0KiBAcGFyYW1cdHtzdHJpbmd9XHRpZFx0XHRJRCBvZiBpdGVtIHR5cGUgdG8gZGVsZXRlLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nW119XHRcdFx0UHJvbWlzZSB3aXRoICdkYXRhJyA9PT0gJzEnIG9uIHN1Y2Nlc3MuXHJcblx0XHQqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUodGhpcy5iYXNlICsgJz9pZD0nICsgaWQpIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHJldHVybiByZXNwb25zZTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHN1Y2Nlc3M6ICdmYWxzZScsXHJcblx0XHRcdFx0dGl0bGU6ICdFcnJvciB3aGVuIHF1ZXJ5aW5nIHNlcnZlci4nLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCogVXNlZCB0byBhY2Nlc3Mgc2Vzc2lvbiB2YXJpYWJsZXMuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCdzZXNzaW9uU2VydmljZScsIHNlc3Npb25TZXJ2aWNlKTtcclxuXHJcblx0c2Vzc2lvblNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIHNlc3Npb25TZXJ2aWNlKCRodHRwLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblx0XHR2bS5iYXNlID0gJ2FwaS9zZXNzaW9uL3Nlc3Npb25WYXJNYW5hZ2VyLnBocD92YXI9JztcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRnZXRWYXI6IGdldFZhcixcclxuXHRcdFx0c2V0VmFyOiBzZXRWYXJcclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQqIEBwYXJhbVx0e3N0cmluZ30gJG5hbWVcdFZhcmlhYmxlIG5hbWUgdG8gZ2V0IGZyb20gc2Vzc2lvbi5cclxuXHRcdCogQHJldHVyblx0e3N0cmluZ30gXHRcdFByb21pc2Ugb3IgZXJyb3Igb24gZmFpbC5cclxuXHRcdCovXHJcblx0XHRmdW5jdGlvbiBnZXRWYXIoJG5hbWUpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCh2bS5iYXNlICsgJG5hbWUpXHJcblx0XHRcdFx0LnRoZW4ocHJvbWlzZUNvbXBsZXRlKVxyXG5cdFx0XHRcdC5jYXRjaChwcm9taXNlRmFpbGVkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCogQHBhcmFtXHR7c3RyaW5nfSAkbmFtZVx0VmFyaWFibGUgbmFtZSB0byBnZXQgZnJvbSBzZXNzaW9uLlxyXG5cdFx0KiBAcmV0dXJuXHR7c3RyaW5nfSBcdFx0UHJvbWlzZSBvciBlcnJvciBvbiBmYWlsLlxyXG5cdFx0Ki9cclxuXHRcdGZ1bmN0aW9uIHNldFZhcigkbmFtZSwgJHZhbHVlKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KHZtLmJhc2UgKyAkbmFtZSwgJHZhbHVlKVxyXG5cdFx0XHRcdC50aGVuKHByb21pc2VDb21wbGV0ZSlcclxuXHRcdFx0XHQuY2F0Y2gocHJvbWlzZUZhaWxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gcHJvbWlzZUNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdHJldHVybiByZXNwb25zZTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBwcm9taXNlRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdCRsb2cuZXJyb3IoZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHN1Y2Nlc3M6ICdmYWxzZScsXHJcblx0XHRcdFx0dGl0bGU6ICdFcnJvciB3aGVuIGFjY2Vzc2luZyB2YXJpYWJsZS4nLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIERhc2hib2FyZENvbnRyb2xsZXIpO1xyXG5cclxuXHRmdW5jdGlvbiBEYXNoYm9hcmRDb250cm9sbGVyKCkge1xyXG5cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFJlZ2lzdGVyQ29udHJvbGxlcik7XHJcblxyXG5cdFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydyZWdpc3RlclNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIocmVnaXN0ZXJTZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0cmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4ocmVnaXN0cmF0aW9uQ29tcGxldGUpO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gcmVnaXN0cmF0aW9uQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0dm0uZXJyb3IgPSByZXNwb25zZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTtcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuZmFjdG9yeSgncmVnaXN0ZXJTZXJ2aWNlJywgcmVnaXN0ZXJTZXJ2aWNlKTtcclxuXHJcblx0cmVnaXN0ZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICckbG9nJywgJ2NydWRTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlKCRsb2NhdGlvbiwgJGxvZywgY3J1ZFNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7ICAvLyBqc2hpbnQgaWdub3JlOmxpbmVcclxuXHRcdHZtLmNydWQgPSBuZXcgY3J1ZFNlcnZpY2UoJ3VzZXInKTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZWdpc3RlcjogcmVnaXN0ZXJcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVnaXN0ZXIodXNlcikge1xyXG5cdFx0XHRyZXR1cm4gdm0uY3J1ZC5jcmVhdGUodXNlcilcclxuXHRcdFx0XHQudGhlbihyZWdpc3RyYXRpb25Db21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiByZWdpc3RyYXRpb25Db21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5zdWNjZXNzID09PSAnZmFsc2UnKSB7XHJcblx0XHRcdFx0XHQkbG9nLmVycm9yKHJlc3BvbnNlLnRpdGxlKTtcclxuXHRcdFx0XHRcdHJldHVybiByZXNwb25zZS50aXRsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JGxvY2F0aW9uLnVybCgnL2xvZ2luJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIExvZ2luQ29udHJvbGxlcik7XHJcblxyXG5cdExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWydsb2dpblNlcnZpY2UnXTtcclxuXHRmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIobG9naW5TZXJ2aWNlKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0dm0uZXJyb3IgPSAnJztcclxuXHJcblx0XHR2bS5sb2dpbiA9IGxvZ2luO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKCkge1xyXG5cdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0bG9naW5TZXJ2aWNlLmxvZ2luKHZtLnVzZXIpXHJcblx0XHRcdFx0LnRoZW4obG9naW5Db21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbkNvbXBsZXRlKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHZtLmVycm9yID0gcmVzcG9uc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2xvZ2luU2VydmljZScsIGxvZ2luU2VydmljZSk7XHJcblxyXG5cdGxvZ2luU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9jYXRpb24nLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIGxvZ2luU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCAkbG9nKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzOyAgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJ2FwaS91c2VyL2xvZ2luTWFuYWdlci5waHAnLCB1c2VyKVxyXG5cdFx0XHRcdC50aGVuKGxvZ2luQ29tcGxldGUpXHJcblx0XHRcdFx0LmNhdGNoKGxvZ2luRmFpbGVkKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luQ29tcGxldGUocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlLmRhdGEudGl0bGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvZGFzaGJvYXJkJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luRmFpbGVkKGVycm9yKSB7XHJcblx0XHRcdFx0JGxvZy5lcnJvcihlcnJvcik7XHJcblx0XHRcdFx0cmV0dXJuICdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignVGFza3NDb250cm9sbGVyJywgVGFza3NDb250cm9sbGVyKTtcclxuXHJcblx0VGFza3NDb250cm9sbGVyLiRpbmplY3QgPSBbJ3Rhc2tzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIFRhc2tzQ29udHJvbGxlcih0YXNrc1NlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwVGFza3MnLCB0YXNrc0RpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHRhc2tzRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogbGluayxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdtb2R1bGVzL3Rhc2tzL3Rhc2tzLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnVGFza3NDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxyXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5mYWN0b3J5KCd0YXNrc1NlcnZpY2UnLCB0YXNrc1NlcnZpY2UpO1xyXG5cclxuXHR0YXNrc1NlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJGxvZyddO1xyXG5cdGZ1bmN0aW9uIHRhc2tzU2VydmljZSgkaHR0cCwgJGxvZykge1xyXG5cdFx0dmFyIHZtID0gdGhpczsgIC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHR9O1xyXG5cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBDb21wYXJlIGFuIGlucHV0IGZpZWxkIHRvIGFub3RoZXIgZmllbGQsIGRldGVybWluZWQgYnkgdGhlIGRldi5cclxuXHQqL1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BDb21wYXJlVG8nLCBjb21wYXJlVG8pO1xyXG5cclxuXHRmdW5jdGlvbiBjb21wYXJlVG8oKSB7XHJcblx0XHR2YXIgZGlyZWN0aXZlID0ge1xyXG5cdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXHJcblx0XHRcdHNjb3BlOiB7XHJcblx0XHRcdFx0b3RoZXJNb2RlbDogJz1zcENvbXBhcmVUbydcclxuXHRcdFx0fSxcclxuXHRcdFx0bGluazogbGlua1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBkaXJlY3RpdmU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuXHRcdFx0dmFyIHVuYmluZFdhdGNoID0gc2NvcGUuJHdhdGNoKCdvdGhlck1vZGVsJywgdmFsaWRhdGVPbkNoYW5nZSk7XHJcblx0XHRcdG5nTW9kZWwuJHZhbGlkYXRvcnMuc3BDb21wYXJlVG8gPSBjb21wYXJlVmFsdWVzO1xyXG5cdFx0XHRlbGVtZW50Lm9uKCckZGVzdHJveScsIGNsZWFuVXApO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gY2xlYW5VcCgpIHtcclxuXHRcdFx0XHR1bmJpbmRXYXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBjb21wYXJlVmFsdWVzKHZpZXdWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiAodmlld1ZhbHVlID09PSBzY29wZS5vdGhlck1vZGVsLiR2aWV3VmFsdWUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB2YWxpZGF0ZU9uQ2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xyXG5cdFx0XHRcdG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2FjY2Vzc1NlcnZpY2UnLCBhY2Nlc3NTZXJ2aWNlKTtcclxuXHJcblx0YWNjZXNzU2VydmljZS4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJHEnLCAnc2Vzc2lvblNlcnZpY2UnLCAnc3RhdHVzU2VydmljZSddO1xyXG5cdGZ1bmN0aW9uIGFjY2Vzc1NlcnZpY2UoJGxvY2F0aW9uLCAkcSwgc2Vzc2lvblNlcnZpY2UsIHN0YXR1c1NlcnZpY2UpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXHJcblx0XHRcdGlzQWRtaW46IGlzQWRtaW5cclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkge1xyXG5cdFx0XHRyZXR1cm4gc2Vzc2lvblNlcnZpY2UuZ2V0VmFyKCduYW1lJylcclxuXHRcdFx0XHQudGhlbihpc0F1dGhlbnRpY2F0ZWRDb21wbGV0ZSk7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWRDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHN0YXR1c1NlcnZpY2UuT0spO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3Qoc3RhdHVzU2VydmljZS5VTkFVVEhPUklaRUQpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0FkbWluKCkge1xyXG5cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0KiBTdGF0dXMgY29kZXMgdXNlZCB3aGVuIGFjY2Vzc2luZyB2YXJpb3VzIHBhZ2VzIGluIHRoZSBhcHAuXHJcblx0Ki9cclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5zZXJ2aWNlKCdzdGF0dXNTZXJ2aWNlJywgc3RhdHVzU2VydmljZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHN0YXR1c1NlcnZpY2UoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRPSzogMjAwLFxyXG5cdFx0XHRVTkFVVEhPUklaRUQ6IDQwMSxcclxuXHRcdFx0Rk9SQklEREVOOiA0MDNcclxuXHRcdH07XHJcblx0fVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHRIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdoZWFkZXJTZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUsIGhlYWRlclNlcnZpY2UpIHtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5uYW1lID0gJyc7XHJcblx0XHR2bS51cmwgPSAnJztcclxuXHJcblx0XHRoZWFkZXJTZXJ2aWNlLmdldFVzZXIoKVxyXG5cdFx0XHQudGhlbihnZXRVc2VyQ29tcGxldGUpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldFVzZXJDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHQkc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2bS5uYW1lID0gKHJlc3BvbnNlLm5hbWUgPT09IGZhbHNlKSA/ICdMb2dpbicgOiByZXNwb25zZS5uYW1lO1xyXG5cdFx0XHRcdHZtLnVybCA9IHJlc3BvbnNlLnVybDtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5kaXJlY3RpdmUoJ3NwSGVhZGVyJywgaGVhZGVyRGlyZWN0aXZlKTtcclxuXHJcblx0ZnVuY3Rpb24gaGVhZGVyRGlyZWN0aXZlKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGluazogbGluayxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYWdlcy9sYXlvdXQvaGVhZGVyL2hlYWRlci5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmZhY3RvcnkoJ2hlYWRlclNlcnZpY2UnLCBoZWFkZXJTZXJ2aWNlKTtcclxuXHJcblx0aGVhZGVyU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJywgJ3Nlc3Npb25TZXJ2aWNlJ107XHJcblx0ZnVuY3Rpb24gaGVhZGVyU2VydmljZSgkaHR0cCwgJGxvZywgc2Vzc2lvblNlcnZpY2UpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdldFVzZXI6IGdldFVzZXJcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0VXNlcigpIHtcclxuXHRcdFx0cmV0dXJuIHNlc3Npb25TZXJ2aWNlLmdldFZhcignbmFtZScpXHJcblx0XHRcdFx0LnRoZW4oZ2V0TmFtZUNvbXBsZXRlKTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIGdldE5hbWVDb21wbGV0ZShyZXNwb25zZSkge1xyXG5cdFx0XHRcdHZhciByZXMgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4ge25hbWU6IGZhbHNlLCB1cmw6ICcjL2xvZ2luJ307XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB7bmFtZTogcmVzLmRhdGEsIHVybDogJyMvZGFzaGJvYXJkJ307XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb250cm9sbGVyKCdTaWRlYmFyQ29udHJvbGxlcicsIFNpZGViYXJDb250cm9sbGVyKTtcclxuXHJcblx0ZnVuY3Rpb24gU2lkZWJhckNvbnRyb2xsZXIoKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmNvbGxhcHNlZCA9IHRydWU7XHJcblxyXG5cdFx0dm0udG9nZ2xlU2lkZWJhciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2bS5jb2xsYXBzZWQgPSAhdm0uY29sbGFwc2VkO1xyXG5cdFx0fTtcclxuXHR9XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnc3BTaWRlYmFyJywgc2lkZWJhckRpcmVjdGl2ZSk7XHJcblxyXG5cdGZ1bmN0aW9uIHNpZGViYXJEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRsaW5rOiBsaW5rLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhZ2VzL2xheW91dC9zaWRlYmFyL3NpZGViYXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdTaWRlYmFyQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdFx0XHRzY29wZS4kd2F0Y2goYXR0cnMuc2lkZWJhckRpcmVjdGl2ZSwgdG9nZ2xlU2lkZWJhcik7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKGNvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGlmIChjb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
